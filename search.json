[{"title":"typora","url":"/dabb0af1.html","content":"\n## Typora 快捷键\n\n- 无序列表：输入-或者*之后输入空格\n- 有序列表：输入数字+“.”之后输入空格\n- 任务列表：输入-，再空格，再[]，在空格，再在]后面空格-\n- 有序列表：Ctrl+Shift+[\n- 无序列表：Ctrl+Shift+]\n\n------\n\n- 标题：Ctrl+1/2/3/4/5\n- 段落：Ctrl+0\n- 增大标题级别：Ctrl++\n- 减少标题级别：Ctrl+-\n- 增加缩进：Ctrl+]\n- 减少缩进：Ctrl+[\n\n------\n\n- 选中一整行：Ctrl+L\n- 选中单词：Ctrl+D\n- 选中相同格式的文字：Ctrl+E\n- 跳转到文章开头：Ctrl+Home\n- 跳转到文章结尾：Ctrl+end\n- 跳转到所选内容：Ctrl+J\n\n------\n\n- 搜索：Ctrl+F\n- 替换：Ctrl+H\n- 清除格式：Ctrl+\\\n\n------\n\n- 表格：Ctrl+T\n- 代码块：Ctrl+Shift+K\n- 公式块：Ctrl+Shift+M\n- 引用：Ctrl+Shift+Q\n- 代码：Ctrl+Shift+`\n- 图像：Ctrl+Shift+I\n- 任务列表：Ctrl+Shift+X\n\n------\n\n- 引用：输入>之后输入空格>\n\n- 生成目录：\n  目录\n\n- - [Typora 快捷键](https://link.zhihu.com/?target=https%3A//www.cnblogs.com/SaturnRing/p/16794566.html%23typora-%E5%BF%AB%E6%8D%B7%E9%94%AE)\n  - [菜单栏](https://link.zhihu.com/?target=https%3A//www.cnblogs.com/SaturnRing/p/16794566.html%23%E8%8F%9C%E5%8D%95%E6%A0%8F)\n  - [文件](https://link.zhihu.com/?target=https%3A//www.cnblogs.com/SaturnRing/p/16794566.html%23%E6%96%87%E4%BB%B6)\n  - [编辑](https://link.zhihu.com/?target=https%3A//www.cnblogs.com/SaturnRing/p/16794566.html%23%E7%BC%96%E8%BE%91)\n\n\n\n\n\n- 高亮\n\n- 上标：1\n\n- 下标：1\n\n- 脚注：[^1]\n\n- `着重关键字`：Ctrl+shift+`\n\n- **加粗：Ctrl+B**\n\n- *倾斜：Ctrl+I*\n\n- 下划线：Ctrl+U\n\n- 删除线：Alt+shift+5\n\n- 插入图片：直接拖动到指定位置即可或者Ctrl+shift+i\n\n- 超链接：Ctrl+K 百度 [http://www.baidu.com](https://link.zhihu.com/?target=http%3A//www.baidu.com)\n\n- - 第一种：直接打出网址，自动生成超链接\n  - 第二种：要对网址进行命名，则需要输入：\n\n## 菜单栏\n\n文件：Alt+F\n\n编辑：Alt+E\n\n段落：Alt+P\n\n格式：Alt+O\n\n视图：Alt+V\n\n主题：Alt+T\n\n帮助：Alt+H\n\n## 文件\n\n新建：Ctrl+N\n\n新建窗口：Ctrl+Shift+N\n\n打开：Ctrl+O\n\n快速打开：Ctrl+P\n\n保存：Ctrl+S\n\n另存为：Ctrl+Shift+S\n\n偏好：Ctrl+,\n\n关闭：Ctrl+W\n\n## 编辑\n\n撤销：Ctrl+Z\n\n重做：Ctrl+Y\n\n剪切：Ctrl+X\n\n复制：Ctrl+C\n\n粘贴：Ctrl+V\n\n全选：Ctrl+A\n","tags":["typora"],"categories":["typora"]},{"title":"杂七杂八的小杂本本","url":"/b9184143.html","content":"\n### 输入圆点\n\n+ `alt+0149   :    •`\n\n+ `搜狗输入法按「Ctrl+Shift+z」进入「字符大全」面板，搜索「加重号」`\n\n### excel表格中换行\n\n`alt+enter`\n\n","tags":["杂记","输入法"],"categories":["杂记"]},{"title":"一天一个教招-教师职业道德","url":"/ca5ab67f.html","tags":["教招/教编","教师职业道德"],"categories":["教招"]},{"title":"一天一个教招-新课改","url":"/ba70881a.html","tags":["教招/教编","新课程改革"],"categories":["教招"]},{"title":"一天一个教招-教育政策法规解读","url":"/5befc35b.html","tags":["教招/教编","教育政策法规解读"],"categories":["教招"]},{"title":"一天一个教招-教育心理学","url":"/26936de9.html","content":"\n## 第一章:教育心理学概述\n\n### 一:研究对象\n\n1. 概念:学校教育情景中**学与教**的基本心里规律的科学\n2. 研究内容:如何学?如何教?学与教之间的关系\n3. 学科性质:\n   1. 应用心理学\n   2. 心理学与教育学的交叉学科\n   3. 教育心理学不是心理学在教育中的简单应用**(是一门独立的学科,有自己的研究内容、方法和原则)**\n\n### 二：研究内容（五要素+三过程）\n\n+ 五要素\n  1. 学生（主体）\n  2. 教师（主导）\n  3. 教学内容\n  4. 教学媒体：教学内容的载体，教学内容的表现形式，师生之间传递信息的工具\n  5. 教学环境\n     1. 物质环境（看得见的）\n     2. 社会环境（看不见的，摸不着的）\n\n+ 三过程\n  1. 学习过程(核心)\n  2. 教学过程\n  3. 评价/反思过程\n\n### 三:作用\n\n教学心理学对教育实践具有**描述、解释、预测、控制**的作用\n\n1. 帮助教师准确地了解问题\n2. 为实际教学提供科学的理论指导\n3. 帮助教师预测并干预学生\n4. 帮助教师结合实际教学进行研究\n","tags":["教招/教编","教育心理学"],"categories":["教招"]},{"title":"一天一个教招-心理学","url":"/9a3d01b7.html","content":"\n## 第一章 心理学概述\n\n### 一:心理学的研究对象及其结构\n\n心理学是研究**人**的**心理现象**及其**发生发展规律**的科学\n\n心理现象又称心理活动\n\n学科性质:**中间**/**边缘学科**(自然科学和社会科学)\n\n心理学是一门研究人类以及动物的**心理现象**,**精神功能和行为**的科学\n\n​\t\t即是理论学科也是一门应用学科(本质区别:人有意识,具有自觉能动性)\n\n`总结`:\n\n+ 心理学是一门古老又年轻的学科\n+ 心理学即是一门自然科学,又是一门社会科学\n+ 心理学既是一门理论科学,又是一门应用科学\n\n#### 心理现象结构表\n\n心理现象(心理活动):\n\n+ 心理过程--动态-共性\n  + 认知过程:感知觉,记忆,思维,想象(**感知记相思**)\n  + 情绪情感过程:喜怒哀惧等\n  + 意志过程(客服困难,实现目标)\n\n注意:中间环节,过渡阶段\n\n+ 个性心理--静态-个性\n  + 个性心理倾向:理想,兴趣,信念,需要,动机,价值观,世界观,(**理性性爱需动三观**)---**动力系统-最活跃的因素**\n  + 个性心理特征:能力,气质,性格\n\n> 注意不是一个独立的心理过程,仅仅是一种心理状态,伴随其他心理过程产生\n","tags":["教招/教编","心理学"],"categories":["教招"]},{"title":"一天一个教招-教育学","url":"/9c9799ad.html","content":"\n## 第一章:教育与教育学\n\n### 第一节 教育的产生和发展\n\n#### 一:教育的概念、本质\n\n##### 1. 教育的由来\n\n+ 我国,**\"教育\"一词最早见于《孟子•尽心上》**\n  + 孟子曰:\"君子有三乐也,而王天下不与存焉.父母俱存,兄弟无故,一乐也;仰不愧于天,俯不怍于人,二乐也;**得天下英才而教育之,三乐也**.\"\n  + **东汉 许慎《说文解字》解释了教育**\n    + 教:上所施,下所效;\n    + 育:养子使作善.\n\n##### 2.教育的概念\n\n+ 广义：**社会教育(包括社区教育)、学校教育、家庭教育**\n  + 例如：听君一席话，胜读十年书\n+ 狭义：**主要指的是学校教育**\n  + **有目的，有计划，有组织**地对受教育者施加教育影响\n    + ”有计划“是广义与狭义的主要区别\n\n补充：家校合作的方式：互访、家长会、家长委员会、家长学校、家长沙龙\n\n拓展：\n\n教育的日常用法：\n\n+ 作为**过程**的教育：主要是**思想的转变**\n\n​\t\t\t\t\t我从这部电影中收到了深刻的教育\n\n+ 作为**方法**的教育：**教的方法**\n\n​\t\t\t\t\t\t你的孩子真有出息，你是怎么教育孩子的？\n\n+ 作为**社会制度**的教育：**社会子系统**\n\n​\t\t\t\t\t\t\t\t教育是振兴地方经济的基础\n\n​\t\t\t\t\t\t\t\t建国君民，教育为先\n\n**美国教育哲学家谢弗勒**对教育定义的分类:**《教育的语言》**\n\n+ **纲领性是应然**，教育应该是怎么样的\n+ **描述性是实然**，教育实际上是怎么样的，对他进行描述\n+ **规定性**是作家在自己文章中自己对教育下的定义，就是不管别人觉得教育是怎样的，但我觉得教育就是这样的\n\n##### 3.教育的要素\n\n教育的要素(教育的内部结构):\n\n+ **教育者**(主导)--教的主体--最直接的教育者--教师\n+ **受教育者**--各级各类学生--主体\n+ **教育影响**--作用：**枢纽，桥梁** --又叫教育中介系统   教育媒介  教育举措\n  + 教育内容--教科书、相关影像\n  + 教育手段--黑板、粉笔、多媒体\n\n学生在教学过程中即使客体也是主体（√）\n\n拓展：\n\n+ 广义教育的另一个版本：\n  + 学校教育：即有目的，有计划，有组织的教育活动及学校的教育设施\n  + 社会教育：指的是社会文化教育机构进行的教育活动及其教育设施\n  + 家庭教育：指家庭中长辈对年轻子女进行的教育活动及其有关教育设施\n  + 自我教育：即人的自学活动，以及自省自修行为\n  + 自然形态的教育：指渗透在生产生活过程中，传授生产，生活经验的现象\n\n根据不同的标准,可以划分不同的教育形态\n\n+ 从教育系统的自身标准出发\n  + 非制度化教育\n  + 制度化教育\n+ 从教育系统所赖以运行的场所或空间标准出发\n  + 家庭教育\n  + 学校教育\n  + 社会教育\n+ 从教育系统赖以运行的时间标准以及建立于其上的产业技术或者社会形态出发\n  + 农业社会的教育\n  + 工业社会的教育\n  + 信息社会的教育\n\n##### 四:教育的属性\n","tags":["教招/教编","教育学"],"categories":["教招"]},{"title":"git","url":"/518e617c.html","content":"\n### 拉取远端代码\n\ngit pull origin master\n\n### 仓库中的远程仓库\n\ngit remote -v\n\n![git](https://cdn.jsdelivr.net/gh/shirllyz/imgBlog/2831503-20220906093515510-391251083.png)\n","tags":["git"],"categories":["git"]},{"title":"MarkDown","url":"/cffa458b.html","content":"\n### MarkDown\n\n#### 标题\n\n##### #+空格+标题名字\n\n一级标题一个#号\n二级标题两个#号\n\n#### 字体\n\n##### 粗体\n\n- **字体内容**\n\n##### 斜体\n\n- *字体内容*\n\n##### 斜体+粗体\n\n- ***字体内容***\n\n##### 删除线\n\n\n\n+ ~~字体内容~~\n\n#### 引用\n\n##### >+空格+字体内容\n\n引用别人的话\n\n### 分割线\n\n##### ---\n\n##### ***\n\n### 图片\n\n#### ![图片名字]（地址）\n\n### 超链接\n\n#### [链接名字]（跳转地址）\n\n### 列表\n\n#### 有序列表\n\n- 1，空格\n\n#### 无序列表\n\n- -空格\n\n### 表格\n\n#### 名字|性别|生日\n\n##### --|--|--|\n\n##### 张三|男|1997\n\n### 代码\n\n#### ···（tab上面）\n","tags":["markdown"],"categories":["markdown"]},{"title":"常用php操作","url":"/b139903a.html","content":"\n### 处理数据单元,处理富文本截取\n\n```php\nfunction extract_text($html, $length) {\n        // 剥离HTML标签\n        $text = strip_tags($html);\n        // 提取前100个字符\n        $text = mb_substr($text, 0, $length, 'UTF-8');\n \n        // 如果截取的位置刚好在HTML标签内，则去除截断的不完整标签\n        $lastTagEndPos = strrpos($text, '>');\n        $lastTagStartPos = strrpos($text, '<');\n        if ($lastTagStartPos !== false && $lastTagEndPos === false) {\n            $text = mb_substr($text, 0, $lastTagStartPos, 'UTF-8');\n        }\n \n        // 如果截取的位置在HTML实体编码内，则将实体编码转换回原始字符\n        $text = html_entity_decode($text, ENT_QUOTES | ENT_HTML5, 'UTF-8');\n \n        return $text;\n    }\n \n    private function getItem($news)\n    {\n        foreach ($news as &$v){\n//            $item = $item->getData();\n            $v['year'] = date('Y', $v['add_time']); // 获取时间戳的年份\n            $v['month'] = date('m', $v['add_time']); // 获取时间戳的月份\n            $v['day'] = date('d', $v['add_time']); // 获取时间戳的日期\n            $v['add_time'] = date(\"Y-m-d H:i\", $v['add_time']);\n            $v['url'] = MyUrl('index/article/index', ['id'=>$v['id']]);\n            $v['intro']=$result = $this->extract_text($v['content'], 100);\n            unset($v['content']);\n        }\n        return $news;\n//        pd($news);\n    }\n```\n\n### 二维数组去重\n\n```php\n//二维数组去重\nfunction assoc_unique($arr, $key) {\n    $tmp_arr = array();\n    foreach ($arr as $k => $v) {\n        if (in_array($v[$key], $tmp_arr)) {//搜索$v[$key]是否在$tmp_arr数组中存在，若存在返回true\n            unset($arr[$k]);\n        } else {\n            $tmp_arr[] = $v[$key];\n        }\n    }\n    sort($arr); //sort函数对数组进行排序\n    return $arr;\n}\n```\n\n### 检测网址是否可以访问\n\n```php\n//检测网址是否可以访问\nfunction check_url($url)\n{\n    if (@fopen($url, 'r') == false) {\n        return false;\n    }\n    return true;\n}\n```\n\n### 根据键值，对二维数组重新进行分组\n\n```php\n/**<br>　　　*PHP根据键值，对二维数组重新进行分组\n   * [array_group_by ph]\n   * @param  [type] $arr [二维数组]\n   * @param  [type] $key [键名]\n   * @return [type]      [新的二维数组]\n   */\n  function array_group_by($arr, $key){\n      $grouped = array();\n      foreach ($arr as $value) {\n          $grouped[$value[$key]][] = $value;\n      }\n      if (func_num_args() > 2) {\n          $args = func_get_args();\n          foreach ($grouped as $key => $value) {\n              $parms = array_merge($value, array_slice($args, 2, func_num_args()));\n              $grouped[$key] = call_user_func_array('array_group_by', $parms);\n          }\n      }\n      return $grouped;\n  }\n```\n\n### 根据时间判断是否执行某个操作\n\n```php\nfunction get_time($start,$end){\n    //判断当前时间是否在时间段内，如果是，则执行\n    $Day = date('Y-m-d ',time());\n    $timeBegin = strtotime($Day.$start.\":00\");\n    $timeEnd = strtotime($Day.$end.\":00\");\n    $curr_time = time();\n    if($curr_time >= $timeBegin && $curr_time <= $timeEnd){\n        return true;\n    }\n    return false;\n}\n \nfunction isCorrectTime(){\n    $time = time();\n    $w = date('w',$time);\n    if(!($w != 0 and $w != 6))\n    {\n        //双休日\n        return false;\n    }\n    //工作日\n    //判断是否在规定时间内\n    return get_time('8:30','18:00');\n}\n```\n\n### 调试打印\n\n```php\n/**\n * 打印调试函数\n * @param $content\n * @param $is_die\n */\nfunction pre($content, $is_die = true)\n{\n    header('Content-type: text/html; charset=utf-8');\n    echo '<pre>' . print_r($content, true);\n    $is_die && die();\n}\n\nfunction pp($data,$is_die=true)\n{\n  // 定义样式\n  $str = '<pre style=\"display: block;padding: 9.5px;margin: 44px 0 0 0;font-size: 13px;line-height: 1.42857;color: red;word-break: break-all;word-wrap: break-word;background-color: #F5F5F5;border: 1px solid #CCC;border-radius: 4px;\">';\n  // 如果是boolean或者null直接显示文字；否则print\n  if (is_bool($data)) {\n    $show_data = $data ? 'true' : 'false';\n  } elseif (is_null($data)) {\n    $show_data = 'null';\n  } else {\n    $show_data = print_r($data, true);\n  }\n  $str .= $show_data;\n  $str .= '</pre>';\n  echo $str;\n  $is_die && die();\n}\n\n\n\n\n\n\nfunction pd($data)\n{\n  // 定义样式\n  $str = '<pre style=\"display: block;padding: 9.5px;margin: 44px 0 0 0;font-size: 13px;line-height: 1.42857;color: #333;word-break: break-all;word-wrap: break-word;background-color: #F5F5F5;border: 1px solid #CCC;border-radius: 4px;\">';\n  // 如果是boolean或者null直接显示文字；否则print\n  if (is_bool($data)) {\n    $show_data = $data ? 'true' : 'false';\n  } elseif (is_null($data)) {\n    $show_data = 'null';\n  } else {\n    $show_data = print_r($data, true);\n  }\n  $str .= $show_data;\n  $str .= '</pre>';\n  echo $str;\n  die;\n}\nfunction p($data)\n{\n  // 定义样式\n  $str = '<pre style=\"display: block;padding: 9.5px;margin: 44px 0 0 0;font-size: 13px;line-height: 1.42857;color: #333;word-break: break-all;word-wrap: break-word;background-color: #F5F5F5;border: 1px solid #CCC;border-radius: 4px;\">';\n  // 如果是boolean或者null直接显示文字；否则print\n  if (is_bool($data)) {\n    $show_data = $data ? 'true' : 'false';\n  } elseif (is_null($data)) {\n    $show_data = 'null';\n  } else {\n    $show_data = print_r($data, true);\n  }\n  $str .= $show_data;\n  $str .= '</pre>';\n  echo $str;\n}\n```\n\n### 利用PhpOfficePhpSpreadsheet实现导入导出功能\n\n注意:\n\n1. 之前有用过`PHPExcel`导出过数据,这个是一个不再维护的版本,对于php版本有要求,可以实现功能,但是考虑到`不再维护`和`版本要求在7.2以下`,使用方式为:\n   1. 安装`composer require phpoffice/phpexcel`:\n   2. 使用:\n\n```php\n public function clientExcel($data = [],$name = 'excel')\n     {\n         $excel = new \\PHPExcel(); //引用phpexcel\n         iconv('UTF-8', 'gb2312', $name); //针对中文名转码\n //        $header = ['订单编号', '订单状态', '客户名字', '订单名字', '创建时间','订单备注','开料尺寸','印件色数','印件色别','印刷方式','成品尺寸','印刷板数','千印数量']; //表头,名称可自定义\n         $excel->setActiveSheetIndex(0);\n         $excel->getActiveSheet()->setTitle($name); //设置表名\n         $excel->getActiveSheet()->getDefaultRowDimension()->setRowHeight(18);\n //        $excel->getActiveSheet()->getColumnDimension('B')->setWidth(80);\n \n         $letter = ['A', 'B', 'C','D','E'];//列坐标\n \n         //设置表头\n         $excel->setActiveSheetIndex(0)\n             ->setCellValue('A1', '商品编号')\n             ->setCellValue('B1', '商品型号')\n             ->setCellValue('C1', '销售价格')\n             ->setCellValue('D1', '库存数')\n             ->setCellValue('E1', '仓库名称');\n \n         //写入数据\n         foreach ($data as $k => $v) {\n             //从第二行开始写入数据（第一行为表头）\n             //$excel->getActiveSheet()->setCellValue('A'.($k+2),$v['gid']);\n             $excel->getActiveSheet()->setCellValue('A' . ($k + 2), $v['goods_id'].\"\\t\");\n             $excel->getActiveSheet()->setCellValue('B' . ($k + 2), $v['goods']['model']);\n             $excel->getActiveSheet()->setCellValue('C' . ($k + 2), $v['goods']['price']);\n             $excel->getActiveSheet()->setCellValue('D' . ($k + 2), $v['inventory']);\n             $excel->getActiveSheet()->setCellValue('E' . ($k + 2), $v['warehouse_name']);\n         }\n \n         //设置单元格边框\n         $excel->getActiveSheet()->getStyle(\"A1:E\" . (count($data) + 1))->getBorders()->getAllBorders()->setBorderStyle();\n \n         ob_end_clean();\n         header('Content-Type: application/vnd.ms-excel');\n         header('Content-Disposition: attachment;filename=\"' . $name . '.xls\"');\n         header('Cache-Control: max-age=0');\n \n \n         $res_excel = PHPExcel_IOFactory::createWriter($excel, 'Excel2007');\n         $res_excel->save('php://output');\n     }\n```\n\n### phpspreadsheet使用\n\n#### 1. 安装\n\n```bash\n composer require phpoffice/phpspreadsheet\n```\n\n#### 2. 导出\n\n查询数据\n\n```php\n public function test(){\n         // 获取数据列表\n         $data_params = [\n             'n'=>9999, 　　　　　　　　'field'=>'id,model,min_price,brand_id,brand_name,price,original_price,goods_time,inventory,inventory_unit,access_count,add_time,upd_time',\n         ];\n         $ret = GoodsService::GoodsListWithPriceTable($data_params);\n         $excel = new Office();\n         //设置表头：\n         $head = ['编号', '型号', '品牌id', '品牌名', '价格','原价','货期','库存','库存单位','访问人数','阶梯价格'];\n         //数据中对应的字段，用于读取相应数据：\n         $keys = ['id', 'model', 'brand_id', 'brand_name', 'price' ,'original_price' ,'goods_time' ,'inventory' ,'inventory_unit' ,'access_count','price_table'];\n \n         $excel->outdataWithPriceTable('产品信息表', $ret['data'], $head, $keys);\n     }\n```\n\n导出的功能实现类\n\n```php\n <?php\n \n namespace app\\service;\n use PhpOffice\\PhpSpreadsheet\\Spreadsheet;\n use PhpOffice\\PhpSpreadsheet\\Writer\\Xlsx;\n \n class Office\n {\n     /**\n      * 导出excel表\n      * $data：要导出excel表的数据，接受一个二维数组\n      * $name：excel表的表名\n      * $head：excel表的表头，接受一个一维数组\n      * $key：$data中对应表头的键的数组，接受一个一维数组\n      * 备注：此函数缺点是，表头（对应列数）不能超过26；\n      *循环不够灵活，一个单元格中不方便存放两个数据库字段的值\n      */\n     public function outdata($name='测试表', $data=[], $head=[], $keys=[])\n     {\n         $count = count($head);  //计算表头数量\n \n         $spreadsheet = new Spreadsheet();\n         $sheet = $spreadsheet->getActiveSheet();\n \n         for ($i = 65; $i < $count + 65; $i++) {     //数字转字母从65开始，循环设置表头：\n             $sheet->setCellValue(strtoupper(chr($i)) . '1', $head[$i - 65]);\n         }\n \n         /*--------------开始从数据库提取信息插入Excel表中------------------*/\n \n \n         foreach ($data as $key => $item) {             //循环设置单元格：\n             //$key+2,因为第一行是表头，所以写到表格时   从第二行开始写\n \n             for ($i = 65; $i < $count + 65; $i++) {     //数字转字母从65开始：\n                 $sheet->setCellValue(strtoupper(chr($i)) . ($key + 2), $item[$keys[$i - 65]]);\n                 $spreadsheet->getActiveSheet()->getColumnDimension(strtoupper(chr($i)))->setWidth(20); //固定列宽\n             }\n \n         }\n \n         header('Content-Type: application/vnd.ms-excel');\n         header('Content-Disposition: attachment;filename=\"' . $name . '.xlsx\"');\n         header('Cache-Control: max-age=0');\n         $writer = new Xlsx($spreadsheet);\n         $writer->save('php://output');\n \n         //删除清空：\n         $spreadsheet->disconnectWorksheets();\n         unset($spreadsheet);\n         exit;\n     }\n     public function outdataWithPriceTable($name='测试表', $data=[], $head=[], $keys=[])\n     {\n //        pd($data);\n         $count = count($head);  //计算表头数量\n \n         $spreadsheet = new Spreadsheet();\n         $sheet = $spreadsheet->getActiveSheet();\n \n         for ($i = 65; $i < $count + 65; $i++) {     //数字转字母从65开始，循环设置表头：\n //            if($i-65==10){\n //                $sheet->mergeCells('K1:L1')->setCellValue(strtoupper(chr($i)) . '1', $head[$i - 65]);\n //            }else{\n                 $sheet->setCellValue(strtoupper(chr($i)) . '1', $head[$i - 65]);\n //            }\n \n         }\n \n         /*--------------开始从数据库提取信息插入Excel表中------------------*/\n \n \n         foreach ($data as $key => $item) {             //循环设置单元格：\n             //$key+2,因为第一行是表头，所以写到表格时   从第二行开始写\n \n             for ($i = 65; $i < $count + 65; $i++) {     //数字转字母从65开始：\n                 if($i-65==10){\n                     $num=count($item[$keys[$i - 65]]);\n                     for($j=0;$j<$num;$j++){\n //                        $spreadsheet->getActiveSheet()->mergeCells(strtoupper(chr($i+$j+1)) . ($key + 2 ).':'.strtoupper(chr($i+$j+1)) . ($key + 2+(2*$num)));\n //                        $sheet->setCellValue(strtoupper(chr($i+$j+1)) . ($key + 2 ),$item[$keys[$i - 65]][$j]['number'] );\n                         $sheet->setCellValue(strtoupper(chr($i+$j+1)) . ($key + 2 ),$item[$keys[$i - 65]][$j]['number'].'x'.$item[$keys[$i - 65]][$j]['one_price']  );\n //                        $sheet->setCellValue(strtoupper(chr($i+$j+2)) . ($key + 2), 1);\n                     }\n //                    for($ii=0;$ii<$num;$ii++){\n ////                        $spreadsheet->getActiveSheet()->mergeCells(strtoupper(chr($i+$j+1)) . ($key + 2 ).':'.strtoupper(chr($i+$j+1)) . ($key + 2+(2*$num)));\n ////                        $sheet->setCellValue(strtoupper(chr($i+$j+1)) . ($key + 2 ),$item[$keys[$i - 65]][$j]['number'] );\n //                        $sheet->setCellValue(strtoupper(chr($i+$num+$ii+1)) . ($key + 2 ),$item[$keys[$i - 65]][$ii]['one_price'] );\n ////                        $sheet->setCellValue(strtoupper(chr($i+$j+2)) . ($key + 2), 1);\n //                    }\n                 }else{\n                     $sheet->setCellValue(strtoupper(chr($i)) . ($key + 2), $item[$keys[$i - 65]]);\n                     $spreadsheet->getActiveSheet()->getColumnDimension(strtoupper(chr($i)))->setWidth(20); //固定列宽\n                 }\n \n             }\n \n         }\n //        die;\n         header('Content-Type: application/vnd.ms-excel');\n         header('Content-Disposition: attachment;filename=\"' . $name . '.xlsx\"');\n         header('Cache-Control: max-age=0');\n         $writer = new Xlsx($spreadsheet);\n         $writer->save('php://output');\n \n         //删除清空：\n         $spreadsheet->disconnectWorksheets();\n         unset($spreadsheet);\n         exit;\n     }\n \n }\n```\n\n \n\n`备注`:这里的第一个方法是实现一个二维数组的导出的\n\n第二个方法是因为在这次的数据中需要处理阶梯价格,是一个一对多的关系,这里导出是按照阶梯价格排成横用x号拼接的\n\n#### 3. 导入\n\n视图层的代码\n\n```html\n {{include file=\"public/header\" /}}\n <form class=\"am-form am-form-horizontal\" action=\"{{:MyUrl('index/goods/upload')}}\" method=\"post\" enctype=\"multipart/form-data\">\n     <div class=\"am-form-group\">\n         <label for=\"fileToUpload\" class=\"am-u-sm-2 am-form-label \" >选择文件</label>\n         <div class=\"am-u-sm-10\">\n             <input type=\"file\" id=\"fileToUpload\" name=\"fileToUpload\" >\n <!--            <i class=\"am-icon-cloud-upload\"></i> 选择要上传的文件</button>-->\n             <p class=\"am-form-help\">请选择要上传的文件</p>\n         </div>\n     </div>\n     <div class=\"am-form-group\">\n         <div class=\"am-u-sm-10 am-u-sm-offset-2\">\n             <button type=\"submit\" class=\"am-btn am-btn-primary\" name=\"submit\">上传</button>\n         </div>\n     </div>\n </form>\n```\n\n控制层的代码\n\n`备注:`这里的代码还没有完善,还需要更新到数据库里面去\n\n```php\n public function upload(){\n         // 获取表单上传文件 例如上传了001.jpg\n         $file = request()->file('fileToUpload');\n         // 移动到框架应用根目录/uploads/ 目录下\n         $info = $file->move( '../public/static/xls');\n         if($info){\n             $spreadsheet = IOFactory::load($info->getPathName());\n             $sheetData = $spreadsheet->getActiveSheet()->toArray(null, true, true, true, true);\n             pd($sheetData);\n             //            $row_num = count($sheetData);\n //\n //            $now_time = time();\n //            $import_data = []; //数组形式获取表格数据\n //            //从第二行开始做for循环\n //            for ($i = 2; $i <= $row_num; $i++) {\n //                $bank_deal_no = $sheetData[$i]['A'];\n //                $account_name = $sheetData[$i]['B'];\n //                $bank_card = $sheetData[$i]['C'];\n //                $deal_money = $sheetData[$i]['D'];\n //                $deal_time = $sheetData[$i]['E'];\n //\n ////                if (!empty($bank_deal_no) && !empty($account_name) && !empty($bank_card) && !empty($deal_money) && !empty($deal_time)) {\n ////                    $import_data[$i]['bank_deal_no'] = $bank_deal_no;\n ////                    $import_data[$i]['account_name'] = $account_name;\n ////                    $import_data[$i]['bank_card'] = $bank_card;\n ////                    $import_data[$i]['deal_money'] = $deal_money;\n ////                    $import_data[$i]['deal_time'] = $deal_time;\n ////                    $import_data[$i]['create_time'] = $now_time;\n ////                    $import_data[$i]['update_time'] = $now_time;\n ////                }\n //            }\n //\n //            sort($import_data);\n //\n //            if (empty($import_data)) {\n //                return json(['status' => '1', 'message' => '数据解析失败']);\n //            }\n             // 成功上传后 获取上传信息\n             // 输出 jpg\n //            echo $info->getExtension();\n //            echo $info->getPathName();\n             // 输出 20160820/42a79759f284b767dfcb2a0197904287.jpg\n //            echo $info->getSaveName();\n             // 输出 42a79759f284b767dfcb2a0197904287.jpg\n //            echo $info->getFilename();\n         }else{\n             // 上传失败获取错误信息\n             echo $file->getError();\n         }\n     }\n```\n\n \n\n### 获取IP\n\n```PHP\n<?php\nfunction getIP()\n{\n  static $realip;\n  if (isset($_SERVER)){\n    if (isset($_SERVER[\"HTTP_X_FORWARDED_FOR\"])){\n      $realip = $_SERVER[\"HTTP_X_FORWARDED_FOR\"];\n    } else if (isset($_SERVER[\"HTTP_CLIENT_IP\"])) {\n      $realip = $_SERVER[\"HTTP_CLIENT_IP\"];\n    } else {\n      $realip = $_SERVER[\"REMOTE_ADDR\"];\n    }\n  } else {\n    if (getenv(\"HTTP_X_FORWARDED_FOR\")){\n      $realip = getenv(\"HTTP_X_FORWARDED_FOR\");\n    } else if (getenv(\"HTTP_CLIENT_IP\")) {\n      $realip = getenv(\"HTTP_CLIENT_IP\");\n    } else {\n      $realip = getenv(\"REMOTE_ADDR\");\n    }\n  }\n  return $realip;\n  echo $realip;\n}\necho getIP();\n?>\n```\n\n### 判断图片资源是否有效\n\n```php\n$url=config('shopxo.attachment_host').$value;\n$array = get_headers($url,1);\n\nif(preg_match('/200/',$array[0])){\n\treturn $url;\n}else{\n\treturn config('app.oss.path').$value;\n\t//echo \"无效url资源！\";\n}\t\n```\n\n### json_encode中文\n\n```php\n$file='./pay/notify'.date('YmdHis').'.txt';\nfile_put_contents($file, json_encode($ret,JSON_UNESCAPED_UNICODE), FILE_APPEND | LOCK_EX);\n```\n\n### php发送请求\n\n```php\n<?php\n// +----------------------------------------------------------------------\n// | CRMEB [ CRMEB赋能开发者，助力企业发展 ]\n// +----------------------------------------------------------------------\n// | Copyright (c) 2016~2020 https://www.crmeb.com All rights reserved.\n// +----------------------------------------------------------------------\n// | Licensed CRMEB并不是自由软件，未经许可不能去掉CRMEB相关版权\n// +----------------------------------------------------------------------\n// | Author: CRMEB Team <admin@crmeb.com>\n// +----------------------------------------------------------------------\n\nnamespace app\\service;\n\nclass HttpService\n{\n    /**\n     * 错误信息\n     * @var string\n     */\n    private static $curlError;\n\n    /**\n     * header头信息\n     * @var string\n     */\n    private static $headerStr;\n\n    /**\n     * 请求状态\n     * @var int\n     */\n    private static $status;\n\n    /**\n     * @return string\n     */\n    public static function getCurlError()\n    {\n        return self::$curlError;\n    }\n\n    /**\n     * @return mixed\n     */\n    public static function getStatus()\n    {\n        return self::$status;\n    }\n\n    /**\n     * 模拟GET发起请求\n     * @param $url\n     * @param array $data\n     * @param bool $header\n     * @param int $timeout\n     * @return bool|string\n     */\n    public static function getRequest($url, $data = array(), $header = false, $timeout = 10)\n    {\n        if (!empty($data)) {\n            $url .= (stripos($url, '?') === false ? '?' : '&');\n            $url .= (is_array($data) ? http_build_query($data) : $data);\n        }\n\n        return self::request($url, 'get', array(), $header, $timeout);\n    }\n\n    /**\n     * curl 请求\n     * @param $url\n     * @param string $method\n     * @param array $data\n     * @param bool $header\n     * @param int $timeout\n     * @return bool|string\n     */\n    public static function request($url, $method = 'get', $data = array(), $header = false, $timeout = 15)\n    {\n        self::$status = null;\n        self::$curlError = null;\n        self::$headerStr = null;\n\n        $curl = curl_init($url);\n        $method = strtoupper($method);\n        //请求方式\n        curl_setopt($curl, CURLOPT_CUSTOMREQUEST, $method);\n        //post请求\n        if ($method == 'POST') curl_setopt($curl, CURLOPT_POSTFIELDS, $data);\n        //超时时间\n        curl_setopt($curl, CURLOPT_TIMEOUT, $timeout);\n        //设置header头\n        if ($header !== false) curl_setopt($curl, CURLOPT_HTTPHEADER, $header);\n\n        curl_setopt($curl, CURLOPT_FAILONERROR, false);\n        //返回抓取数据\n        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\n        //输出header头信息\n        curl_setopt($curl, CURLOPT_HEADER, true);\n        //TRUE 时追踪句柄的请求字符串，从 PHP 5.1.3 开始可用。这个很关键，就是允许你查看请求header\n        curl_setopt($curl, CURLINFO_HEADER_OUT, true);\n        //https请求\n        if (1 == strpos(\"$\" . $url, \"https://\")) {\n            curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);\n            curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);\n        }\n        self::$curlError = curl_error($curl);\n\n        list($content, $status) = [curl_exec($curl), curl_getinfo($curl), curl_close($curl)];\n        self::$status = $status;\n        self::$headerStr = trim(substr($content, 0, $status['header_size']));\n        $content = trim(substr($content, $status['header_size']));\n        return (intval($status[\"http_code\"]) === 200) ? $content : false;\n    }\n\n    /**\n     * 模拟POST发起请求\n     * @param $url\n     * @param $data\n     * @param bool $header\n     * @param int $timeout\n     * @return bool|string\n     */\n    public static function postRequest($url, $data = array(), $header = false, $timeout = 10)\n    {\n        return self::request($url, 'post', $data, $header, $timeout);\n    }\n\n    /**\n     * 获取header头字符串类型\n     * @return mixed\n     */\n    public static function getHeaderStr()\n    {\n        return self::$headerStr;\n    }\n\n    /**\n     * 获取header头数组类型\n     * @return array\n     */\n    public static function getHeader()\n    {\n        $headArr = explode(\"\\r\\n\", self::$headerStr);\n        return $headArr;\n    }\n\n}\n\n\n使用:\n$res=HttpService::postRequest($this->url.$fun,[\"username\"=>$this->username,\"password\"=>$this->password]);\n```\n\n\n\n### phpstorm历史版本\n\n`https://www.jetbrains.com/phpstorm/download/other.html`\n\n### 压缩图片并保证清晰度\n\n```php\n<?php\n\n\nnamespace app\\common;\n\n\nclass Img\n{\n  private $src;\n  private $image;\n  private $imageinfo;\n  private $percent = 0.5;\n  /**\n   * 图片压缩\n   * @param $src 源图\n   * @param float $percent 压缩比例\n   */\n  public function __construct($src, $percent = 0.5)\n  {\n    $this->src = $src;\n    $this->percent = $percent;\n  }\n  /** 高清压缩图片\n   * @param string $saveName 提供图片名（可不带扩展名，用源图扩展名）用于保存。或不提供文件名直接显示\n   */\n  public function compressImg($saveName = '')\n  {\n    $this->_openImage();\n    if (!empty($saveName)) $this->_saveImage($saveName); //保存\n    else $this->_showImage();\n  }\n  /**\n   * 内部：打开图片\n   */\n  private function _openImage()\n  {\n    list($width, $height, $type, $attr) = getimagesize($this->src);\n    $this->imageinfo = array(\n      'width' => $width,\n      'height' => $height,\n      'type' => image_type_to_extension($type, false),\n      'attr' => $attr\n    );\n    $fun = \"imagecreatefrom\" . $this->imageinfo['type'];\n    $this->image = $fun($this->src);\n    $this->_thumpImage();\n  }\n  /**\n   * 内部：操作图片\n   */\n  private function _thumpImage()\n  {\n    $new_width = $this->imageinfo['width'] * $this->percent;\n    $new_height = $this->imageinfo['height'] * $this->percent;\n    $image_thump = imagecreatetruecolor($new_width, $new_height);\n    //将原图复制带图片载体上面，并且按照一定比例压缩,极大的保持了清晰度\n    imagecopyresampled($image_thump, $this->image, 0, 0, 0, 0, $new_width, $new_height, $this->imageinfo['width'], $this->imageinfo['height']);\n    imagedestroy($this->image);\n    $this->image = $image_thump;\n  }\n  /**\n   * 输出图片:保存图片则用saveImage()\n   */\n  private function _showImage()\n  {\n    header('Content-Type: image/' . $this->imageinfo['type']);\n    $funcs = \"image\" . $this->imageinfo['type'];\n    $funcs($this->image);\n  }\n  /**\n   * 保存图片到硬盘：\n   * @param string $dstImgName 、可指定字符串不带后缀的名称，使用源图扩展名 。、直接指定目标图片名带扩展名。\n   */\n  private function _saveImage($dstImgName)\n  {\n    if (empty($dstImgName)) return false;\n    $allowImgs = ['.jpg', '.jpeg', '.png', '.bmp', '.wbmp', '.gif'];  //如果目标图片名有后缀就用目标图片扩展名 后缀，如果没有，则用源图的扩展名\n    $dstExt = strrchr($dstImgName, \".\");\n    $sourseExt = strrchr($this->src, \".\");\n    if (!empty($dstExt)) $dstExt = strtolower($dstExt);\n    if (!empty($sourseExt)) $sourseExt = strtolower($sourseExt);\n    //有指定目标名扩展名\n    if (!empty($dstExt) && in_array($dstExt, $allowImgs)) {\n      $dstName = $dstImgName;\n    } elseif (!empty($sourseExt) && in_array($sourseExt, $allowImgs)) {\n      $dstName = $dstImgName . $sourseExt;\n    } else {\n      $dstName = $dstImgName . $this->imageinfo['type'];\n    }\n    $funcs = \"image\" . $this->imageinfo['type'];\n    $funcs($this->image, $dstName);\n  }\n  /**\n   * 销毁图片\n   */\n  public function __destruct()\n  {\n    imagedestroy($this->image);\n  }\n}\n$img = new Img(\"https://www.zcdz.com/public/static/upload/images/slide/2022/07/19/1658221420955468.png\", 0.5);\n$img->compressImg(\"banner7.png\");\n```\n\n### 批量更改数据库\n\n​\t\t\t\n\n```php\n//    public function goodsTime(){\n//        $i=0;\n//        while ($i<400){\n//            $list=Db::table(\"sxo_goods\")->field(\"id,goods_time\")->limit($i,100)->select();\n//            foreach ($list as $k=>$v){\n//                $tmp=explode(\"天\",$v[\"goods_time\"]);\n//                if(count($tmp)>1){\n//                    Db::table(\"sxo_goods\")->where(\"id\",$v[\"id\"])->update([\"goods_time\"=>$tmp[0].\"个工作日\"]);\n//                }\n//            }\n//            $i=$i+100;\n//        }\n//    }\n```\n\n```php\npublic function test(){\n        $goods=Db::name(\"GoodsSpecBase\")->limit(0,1700)->select();\n        foreach ($goods as $k=>$v){\n//            echo $v['goods_id'];\n            $info=Db::name(\"GoodsPrice\")->where(\"goods_id\",$v['goods_id'])->select();\n//            p($info);\n            if(count($info)>1){\n                $cmf_arr = array_column($info, 'price');\n                array_multisort($cmf_arr, SORT_ASC);\n                $data[\"price\"]=$cmf_arr[0];\n                Db::name('Goods')->where('id',$v['goods_id'])->update($data);\n                Db::name('GoodsSpecBase')->where('goods_id',$v['goods_id'])->update($data);\n            }\n        }\n    }\n```\n\n### thinkphp 5.1 \n\n#### 接收参数\n\n```php\n<?php\n//要用Request类 第一步就要引入他，才能在当前控制器上使用\n//知识点：use 与 namespace前面不可有空格等其他操作。\nnamespace app\\admin\\controller;\nuse think\\Request;\nclass Index{\n   \n   //  在index方法引入Request\n   public function index(Request $request){\n   \t// parma 表示接收所有传过来的参数 不管是post请求还是get请求 parma都能接收到参数\n   \t$data = $request->param();\n   \t// post表示只接收 post方式传出来的参数\n   \t$data1= $request->post();\n   \t// get表示只接收get方式传出来的参数\n   \t$data2= $request->get();\n   \t// 假如你只想拿到一个name值，这时我们可以在括号里面加上name即可。\n   \t$data = $request->param('name');\n   \t// 假如你只想拿到一个name值，而且还想给个默认值的话，这时我们可以在括号里面加上name后面加上即可。\n   \t$data = $request->param('name','这是默认值');\n   }\n}\n?>\n\n```\n\n#### 判断请求类型\n\n```php\n <?php\n//要用Request类 第一步就要引入他，才能在当前控制器上使用\n//知识点：use 与 namespace前面不可有空格等其他操作。\nnamespace app\\admin\\controller;\nuse think\\Request;\nclass Index{\n   //  在index方法引入Request\n   public function index(Request $request){\n   \t//判断请求类型是否为 post\n   \tif($request->isPost()){\n   \t\tdump('当前请求类型为post');\n   \t}\n   \t//判断请求类型是否为 get\n   \tif($request->isGet()){\n   \t\tdump('当前请求类型为get');\n   \t}\n   \t//判断请求类型是否为 Put\n   \tif($request->isPut()){\n   \t\tdump('当前请求类型为put');\n   \t}\n   \t//判断请求类型是否为 ajax\n   \tif($request->isAjax()){\n   \t\tdump('当前请求类型为ajax');\n   \t}\n   \t//判断请求类型是否是手机访问\n   \tif($request->isMobile()){\n   \t\tdump('当前请求类型为手机类型');\n   \t}\n   }\n}\n?>\n\n```\n\n### 去除字符串两端空格\n\n```php\n$str = \"  This is a string with spaces.  \";\n$trimmed = trim($str);\necho $trimmed; //输出：This is a string with spaces.\n\n//去除左边或者右边空格\n$str = \"   This is a string with spaces.   \";\n$leftTrimmed = ltrim($str);\n$rightTrimmed = rtrim($str);\necho $leftTrimmed; //输出：This is a string with spaces.\necho $rightTrimmed; //输出：   This is a string with spaces.\n```\n\n### 高精度计算\n\n```php\n<?php\n\n/**\n * 精确加法\n * @param [type] $a [description]\n * @param [type] $b [description]\n */\nfunction math_add($a, $b, $scale = '2')\n{\n    return bcadd($a, $b, $scale);\n}\n\n/**\n * 精确减法\n * @param [type] $a [description]\n * @param [type] $b [description]\n */\nfunction math_sub($a, $b, $scale = '2')\n{\n    return bcsub($a, $b, $scale);\n}\n\n/**\n * 精确乘法\n * @param [type] $a [description]\n * @param [type] $b [description]\n */\nfunction math_mul($a, $b, $scale = '2')\n{\n    return bcmul($a, $b, $scale);\n}\n\n/**\n * 精确除法\n * @param [type] $a [description]\n * @param [type] $b [description]\n */\nfunction math_div($a, $b, $scale = '2')\n{\n    return bcdiv($a, $b, $scale);\n}\n\n/**\n * 精确求余/取模\n * @param [type] $a [description]\n * @param [type] $b [description]\n */\nfunction math_mod($a, $b)\n{\n    return bcmod($a, $b);\n}\n\n/**\n * 比较大小\n * @param [type] $a [description]\n * @param [type] $b [description]\n * 大于 返回 1 等于返回 0 小于返回 -1\n */\nfunction math_comp($a, $b, $scale = '5')\n{\n    return bccomp($a, $b, $scale); // 比较到小数点位数\n}\n\n```\n\n","tags":["php"],"categories":["php"]},{"title":"常用css操作","url":"/344dd96e.html","content":"\n### 文字图片禁止选中\n\n```css\n/* 防止文本选中 */\n.unselectable-text {\n  user-select: none;\n}\n \n/* 防止图片选中 */\n.unselectable-image {\n  user-drag: none;\n  user-select: none;\n}\n```\n\n### 截取文字\n\n```css\n<style>\n    .news-content p{\n        /*background: red;*/\n        display: -webkit-box;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n        -webkit-line-clamp: 2; /* 指定显示的行数 */\n        text-overflow: ellipsis; /* 使用省略号表示截取的部分 */\n    }\n    .news-content h3{\n        white-space: nowrap; /* 禁止换行 */\n        overflow: hidden; /* 隐藏溢出部分 */\n        text-overflow: ellipsis; /* 使用省略号表示截取的部分 */\n    }\n</style>\n```\n\n### 居中\n\n+ **1.使用flex布局**\n\n通过给父盒子添加display：flex属性（存在兼容性问题）\n\n```css\n.box1{\n   width: 200px;\n   height: 200px;\n   background-color: green;\n   display: flex;  \n   justify-content: center;       /*水平排列居中*/\n   /* align-items: center; */     /*竖直排列居中*/ \n}\n.box2{\n   background-color: pink;\n   width: 100px;\n   height: 100px;\n}\n\n\n```\n\n+ **2.margin：auto实现**\n\n```css\n* {\n  margin: 0;\n  padding: 0;\n}\n.div1 {\n  /* 如果父级有relative,则相对于父级盒子居中） */\n  position: relative;       \n  width: 400px;\n  height: 400px;\n  background-color: black;\n}\n.div2 {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: 100px;\n  height: 100px;\n  background-color: red;\n  /* 水平居中 */\n  margin:  0 auto;     \n      \n  /* 垂直居中 */\n  /* margin: auto; */\n}\n```\n\n+ **3.通过transform实现**\n\n使用top:50%; left:50%;时，是以盒子的左上角为原点定位，是左上角的原点居中，但是元素本身并不居中。\n\ntransform：translate(-50%，-50%):分别向左向上移动自身长宽的50%，使其位于中心。\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Document</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n    }\n    .div1 {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      padding: 15px;\n      background-color: powderblue;\n      transform: translate(-50%,-50%);\n    }\n  </style>\n</head>\n<body>\n  <div class=\"div1\">\n    不知道高度\n  </div>\n</body>\n</html>\n```\n\n这个方法不需要知道高度，使用的是自身百分比\n\n+ **4.margin负间距**\n\n该方法高度类似于通过transform实现居中方法，但是需要知道盒子大小，才能进行最后两步的相对移位，transform方法因为使用的是自身百分比，故不须知道具体宽高\n\n```css\n    * {\n      margin: 0;\n      padding: 0;\n    }\n    .div {\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      width: 200px;\n      height: 200px;\n      background-color: yellowgreen;\n      margin-left: -100px;\n      margin-top: -100px;\n    }\n```\n\n+ **5.tabel-cell**\n\n利用table-cell来控制垂直居中。\n\n```css\n    .box1 {\n      /* display: table-cell; */\n      /* vertical-align: middle; */\n      width: 600px;\n      height: 500px;\n      background-color: pink;\n    }\n    .box2 {\n      width: 200px;\n      height: 200px;\n      margin: 0 auto;\n      background-color: red;\n    }\n```\n\n+ **6.button居中**\n\n利用button做外容器，里边的块元素会自动垂直居中，只需要控制一下水平居中就可以达到效果。\n\n```css\n    button {\n      width: 400px;\n      height: 400px;\n      background-color: blueviolet;\n    }\n    div {\n      width: 150px;\n      height: 150px;\n      margin: 0 auto;\n      background-color: burlywood;\n    }\n```\n\n## 两栏布局（左侧固定宽度为200px，右侧自适应）\n\n```html\n<body>\n    <div class='wrap'>\n            <div class='left'>左侧固定内容</div>\n            <div class='right'>右侧自适应</div>\n    </div>\n</body>\n```\n\n### 1.使用浮动-float\n\n```css\n /*清除浏览器默认设置的边距*/\n * {\n    padding: 0;\n    margin: 0;\n   }\n    .wrap {\n        overflow: hidden;\n        border: 1px solid red;\n    }\n    /*脱离文档流*/\n   .left {\n        float: left;      //左边元素向左浮动\n        width: 200px;\n        height: 200px;\n        background: pink;\n    }\n    .right {\n        height: 200px;\n        background: skyblue;\n    }\n\n注：使用`float`会使元素脱离文档流，这样会导致两个div发生重叠，而在`.wrap`中设置`overflow: hidden`是为了触发BFC，清除浮动（不会重叠）。\n```\n\n### 2.使用绝对定位-absolute\n\n```css\n/*清除浏览器默认设置的边距*/\n* {\n    padding: 0;\n    margin: 0;\n}\n.wrap {\n    overflow: hidden;\n    position: relative;\n    border: 1px solid red;\n}\n/*脱离文档流*/\n.left {\n    position: absolute;   // 绝对定位\n    left: 0;\n    right: 0;\n    width: 200px;\n    height: 200px;\n    background: pink;\n}\n.right {\n    margin-left: 200px;    // 设置左边距和左边元素等宽\n    height: 200px;\n    background: skyblue;\n}\n\n注：这个实现方案要注意的是`.right`中设置`margin-left: 200px`，这里的200px是左边元素的宽。\n```\n\n###  3.使用弹性布局-flex\n\n```css\n/*清除浏览器默认设置的边距*/\n* {\n    padding: 0;\n    margin: 0;\n}\n.wrap {\n    display: flex;      // 弹性布局 \n    border: 1px solid red;\n}\n.left {\n    flex: 0 0 200px;   // 左边元素不扩大不缩小，默认宽度为200px\n    height: 200px;\n    background: purple;\n}\n.right {\n    flex: 1;          // 右边元素扩大，自动填充过多空间\n    height: 200px;\n    background: skyblue;\n}\n\n注：`flex`属性要在子元素上设置。`flex`属性是`flex-grow`（增长比例）和`flex-shrink`（缩小比例）和`flex-basis`（默认大小）的缩写。\n```\n\n### 4.使用表格布局-table\n\n```css\n/*清除浏览器默认设置的边距*/\n* {\n    padding: 0;\n    margin: 0;\n}\n.wrap {\n    display: table;      // 表格布局\n    border: 1px solid red;\n    width: 100%;\n}\n.left {\n    display:table-cell;  //设置这个元素为表单中的单元格\n    height: 200px;\n    width： 200px;\n    background: purple;\n}\n.right {\n    display:table-cell;  //设置这个元素为表单中的单元格\n    height: 200px;\n    background: skyblue;\n}\n注：表格布局按照我的理解是将父元素设置成一个表格，里面的元素都是一个一个单元格，可以设置几行几列，所以这个方法也可以实现三栏布局（一行三列）；可以设置行高列高。\n```\n\n### 5.使用网格布局-grid\n\n```scss\n/*清除浏览器默认设置的边距*/\n* {\n    padding: 0;\n    margin: 0;\n}\n.wrap {\n    display:grid;   // 网格布局\n    grid-template-rows: 200px;  // 设置行高\n    grid-template-columns: 200px auto;   // 设置列宽\n    border: 1px solid red;\n}\n.left {\n    background: purple;\n}\n.right {\n    background: skyblue;\n}\n注：`grid`布局真的太方便啦！！但是放在这里好像有点大材小用了\n```\n\n\n\n### 6.使用calc()函数\n\n```css\n/*清除浏览器默认设置的边距*/\n* {\n    padding: 0;\n    margin: 0;\n}\n.wrap {\n    overflow: hidden;\n    border: 1px solid red;\n}\n.left {\n    float: left;\n    background: purple;\n    height: 200px;\n    width: 200px;\n}\n.right {\n    background: skyblue;\n    height: 200px;\n    width: calc( 100% -200px )\n}\n```\n\n\n\n### 文字下划线样式\n\n```html\n<!DOCTYPE html>\n\n<html>\n\n<head>\n\n<meta charset=\"UTF-8\">\n\n<title>css 文字下划线样式</title>\n\n<style>\n\n.demo{\n\nwidth: 400px;\n\nheight: 400px;\n\nmargin:100px auto;\n\n}\n\n.demo1 span{\n\nborder-bottom: 1px solid #000000;\n\n}\n\n.demo2 span{\n\nborder-bottom: 5px solid #0081EF;\n\n}\n\n.demo3 span{\n\nborder-bottom: 2px dashed #000000;\n\n}\n\n.demo4 span{\n\nborder-bottom: 2px dotted #000000;\n\n}\n\n.demo5 span{\n\nborder-bottom: 5px double #000000;\n\n}\n\n</style>\n\n</head>\n\n<body>\n\n<div class=\"demo\">\n\n<p class=\"demo1\">这是第1段测试文字，<span>HTML中文网</span>！</p>\n\n<p class=\"demo2\">这是第2段测试文字，<span>HTML中文网</span>！</p>\n\n<p class=\"demo3\">这是第3段测试文字，<span>HTML中文网</span>！</p>\n\n<p class=\"demo4\">这是第4段测试文字，<span>HTML中文网</span>！</p>\n\n<p class=\"demo5\">这是第5段测试文字，<span>HTML中文网</span>！</p>\n\n</div>\n\n</body>\n\n</html>\n```\n\n### 浏览器地址显示自定义小图标\n\n```html\n在对应的html页面头部加上代码：\n\n<link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"https://www.lanjiawang.com/assets/img/favicon.ico\" media=\"screen\" />\n完整示例如下：\n<head>\n    <link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"https://www.lanjiawang.com/assets/img/favicon.ico\" media=\"screen\" />\n     <!--其他代码>\n</head>\n```\n\n","tags":["css"],"categories":["css"]},{"title":"常用js/jq操作","url":"/11f2ac32.html","content":"\n### input\n\n+ 根据name获取值:\n\n```javascript\n$(\"input[name='spec_param']\").val()\n```\n\n+ 根据父元素寻找type是text的子元素\n\n```javascript\n$(\"#parent\").find(\"input[type='text']\")\n```\n\n\n\n### class\n\n+ 根据元素寻找其下子元素的长度:`$(\".body-list\").find(\".row-list\").length;`\n\n### click\n\n```javascript\n    $(\".add-spec\").on(\"click\",function(e){\n        console.log(total);\n    });\n```\n\n### select\n\n```javascript\nvar options=$(“#select option:selected”); //获取选中的项\n\nalert(options.val()); //拿到选中项的值\n\nalert(options.text()); //拿到选中项的文本\n\nalert(options.attr('url')); //拿到选中项的url值\n```\n\n\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n\t<title>Javascript中点击事件方法一</title>\n</head>\n<body>\n\t<button id=\"btn\">click</button>\n\t<script type=\"text/javascript\">\n\t\tvar btn = document.getElementById(\"btn\");\n\t\tbtn.οnclick=function(){\n\t\t\talert(\"hello world\");\n\t\t}\n\t</script>\n</body>\n</html>\n```\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n\t<title>Javascript中点击事件方法二</title>\n</head>\n<body>\n\t<button id=\"btn\">click</button>\n\t<script type=\"text/javascript\">\n\t\tvar btn = document.getElementById(\"btn\");\n\t\tbtn.addEventListener('click',function(){\n\t\t\talert(\"hello wrold\");\n\t\t},false)\n\t</script>\n</body>\n</html>\n```\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n\t<title>Javascript中点击事件方法三</title>\n\t<script type=\"text/javascript\">\n\t\tfunction test(){\n\t\t\talert(\"hello world\");\n\t\t}\n\t</script>\n</head>\n<body>\n\t<button id=\"btn\" οnclick=\"test()\">click</button>\n</body>\n</html>\n```\n\n\n\n### JQuery中获取JSON文件中的数据\n\n\n\n#### 1、使用 Ajax 方式获取\n\n```javascript\n$.get(\"json/test.json\", function(data) {\n     console.log(data.total);\n});\n\n另一种方式：\n$.ajax({\n     type: \"get\",\n     url: \"json/test.json\",\n     dataType: \"json\",\n     async: false,\n     success: function(data) {\n          console.log(data.total);\n     }\n});\n```\n\n#### 2、使用 getJSON 方式获取\n\n```javascript\n$.getJSON(\"json/test.json\", function(data)  {\n     console.log(data.total);\n})\n```\n\n\n以上方式获取到的数据都是 JSON 格式的数据，无需转换，即可使用\n\n\n\n### 利用百度翻译API翻译整个网站 \n\n首先,[百度翻译开放平台 (baidu.com)](https://fanyi-api.baidu.com/)申请appid和appkey\n\n```javascript\n<!doctype html>\n<head>\n    <meta charset=\"utf-8\" />\n</head>\n<body>\n    <div>测试\n        <div>橘子</div>\n    </div>\n    <div>梨</div>\n    <div>测试</div>\n    <div>零食</div>\n    <div>水果</div>\n    <div>上班</div>\n    <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n    <script src=\"http://cdn.bootcss.com/crypto-js/3.1.2/rollups/md5.js\"></script>\n    <script type=\"text/javascript\">\n        transformLanguage('jp');\n        var newLanguage='jp';\n        function transformLanguage(newLanguage) {\n            // 获取所有dom元素中文\n            let transformStr = '';\n            // 获取所有dom元素\n            function getChildDom(dom, type, data = {}) {\n                if(type == 'read') {\n                    [...dom.children].forEach(v => {\n                        // 判断中文\n                        // /^[\\u0391-\\uFFE5]+$/\n                        let re= /[\\u4e00-\\u9fa5]/g;\n                        // 防止某些标签有内容并且有标签 ，或者有空格 \n                        let vHtml = $(v).contents().filter(function (index, content) {return content.nodeType === 3}).text().trim();\n                        // 跳过script标签\n                        if (re.test(vHtml) && v.tagName != 'SCRIPT') {\n                            transformStr += `${vHtml},`\n                        }\n                        // 递归获取元素\n                        getChildDom(v, type, data);\n                    })\n                }else {\n                    // console.log(newLanguage)\n                    let transOld = data.trans_result[0].src.split(',');\n                    let transNew;\n                    if(newLanguage=='jp'){\n                         transNew= data.trans_result[0].dst.split('、');\n                    }else{\n                        transNew = data.trans_result[0].dst.split(',');\n                    }\n                    \n                    \n                    \n                    [...dom.children].forEach(v => {\n                        // 判断中文\n                        // /^[\\u0391-\\uFFE5]+$/\n                        let re= /[\\u4e00-\\u9fa5]/g;\n                        let vHtml = $(v).contents().filter(function (index, content) {return content.nodeType === 3}).text().trim();\n                        // 跳过script标签\n                        if (re.test(vHtml) && v.tagName != 'SCRIPT') {\n                            // 防止标签里面还有标签，所以只替换里面的html,使用replace\n                            $(v).html(\n                                $(v).html().replace(\n                                transOld[transOld.findIndex(arrList => arrList == vHtml)]\n                                ,\n                                transNew[transOld.findIndex(arrList => arrList == vHtml)]\n                                )\n                            )\n                        }\n                        // 递归获取元素\n                        getChildDom(v, type, data);\n                    })\n                }\n            }\n            getChildDom(document,'read');\n            getTranslateData();\n            // 获取翻译\n            function getTranslateData() {\n                let appid = '20230504001665207';   // 百度翻译API的appid\n                let key = 'ACpxP4hjSwO88bJSL0iN';   // 百度翻译API的key\n                let salt = (new Date).getTime();\n                let query = transformStr;\n                let from = 'zh';\n                let to = newLanguage;\n                let str1 = appid + query + salt + key;\n                let sign = CryptoJS.MD5(str1).toString();\n                $.ajax({\n                    url: 'http://api.fanyi.baidu.com/api/trans/vip/translate',\n                    type: 'get',\n                    dataType: 'jsonp',\n                    data: {\n                        q: query,\n                        appid: appid,\n                        salt: salt,\n                        from: from,\n                        to: to,\n                        sign: sign\n                    },\n                    success: function(data) {\n                        data.trans_result && getChildDom(document,'write',data);\n                        console.log(data);\n                    }\n                });\n            }\n        }\n    </script>\n</body>\n```\n\n就可以翻译了\n\n \n\n在此期间遇到两个问题:\n\n1：翻译日语的时候会在页面上显示undefined,是因为日语的翻译后语言是以、分隔的,所以在处理日语的时候需要按照语言判断\n\n2：在方法的方法里面访问外部变量会找不到变量，解决，把变量变成全局变量\n\n### 添加HTML代码\n\n```javascript\n$(\".demo\").html(\"<span></span>\")\n```\n\n```javascript\nvar $span=$(\"<span></span>\");\n$(\".demo\").append($span);\n```\n\n### ajax封装\n\n```javascript\n    function post123(url,data){\n        var result;\n        $.ajax({\n            url : url,\n            type : \"post\",\n            data : data,\n            async : false,\n            success : function(data) {\n                if(data.status===200){\n                    result =data.data;\n                }\n            }\n        });\n        return result;\n    }\n\n\n        //通过ajax查询数据\n        var url =\"/index/bom/bomBs\";\n        var res=post123(url,data);\n```\n\n\n\n```javascript\n//页面加载所要进行的操作\n$(function () {\n    //设置ajax当前状态(是否可以发送);\n    ajaxStatus = true;\n});\n\n// ajax封装\nfunction ajax(url, data, success, cache, alone, async, type, dataType, error) {\n    var type = type || 'post';//请求类型\n    var dataType = dataType || 'json';//接收数据类型\n    var async = async || true;//异步请求\n    var alone = alone || false;//独立提交（一次有效的提交）\n    var cache = cache || false;//浏览器历史缓存\n    var success = success || function (data) {\n            /*console.log('请求成功');*/\n            setTimeout(function () {\n                layer.msg(data.msg);//通过layer插件来进行提示信息\n            },500);\n            if(data.status){//服务器处理成功\n                setTimeout(function () {\n                    if(data.url){\n                        location.replace(data.url);\n                    }else{\n                        location.reload(true);\n                    }\n                },1500);\n            }else{//服务器处理失败\n                if(alone){//改变ajax提交状态\n                    ajaxStatus = true;\n                }\n            }\n        };\n    var error = error || function (data) {\n            /*console.error('请求成功失败');*/\n            /*data.status;//错误状态吗*/\n            layer.closeAll('loading');\n            setTimeout(function () {\n                if(data.status == 404){\n                    layer.msg('请求失败，请求未找到');\n                }else if(data.status == 503){\n                    layer.msg('请求失败，服务器内部错误');\n                }else {\n                    layer.msg('请求失败,网络连接超时');\n                }\n                ajaxStatus = true;\n            },500);\n        };\n    /*判断是否可以发送请求*/\n    if(!ajaxStatus){\n        return false;\n    }\n    ajaxStatus = false;//禁用ajax请求\n    /*正常情况下1秒后可以再次多个异步请求，为true时只可以有一次有效请求（例如添加数据）*/\n    if(!alone){\n        setTimeout(function () {\n            ajaxStatus = true;\n        },1000);\n    }\n    $.ajax({\n        'url': url,\n        'data': data,\n        'type': type,\n        'dataType': dataType,\n        'async': async,\n        'success': success,\n        'error': error,\n        'jsonpCallback': 'jsonp' + (new Date()).valueOf().toString().substr(-4),\n        'beforeSend': function () {\n            layer.msg('加载中', {通过layer插件来进行提示正在加载\n                icon: 16,\n                shade: 0.01\n            });\n        },\n    });\n}\n\n// submitAjax(post方式提交)\nfunction submitAjax(form, success, cache, alone) {\n    cache = cache || true;\n    var form = $(form);\n    var url = form.attr('action');\n    var data = form.serialize();\n    ajax(url, data, success, cache, alone, false, 'post','json');\n}\n\n\n// ajax提交(post方式提交)\nfunction post(url, data, success, cache, alone) {\n    ajax(url, data, success, cache, alone, false, 'post','json');\n}\n\n// ajax提交(get方式提交)\nfunction get(url, success, cache, alone) {\n    ajax(url, {}, success, alone, false, 'get','json');\n}\n\n// jsonp跨域请求(get方式提交)\nfunction jsonp(url, success, cache, alone) {\n    ajax(url, {}, success, cache, alone, false, 'get','jsonp');\n}\n\n\n/*//调用实例\n$(function () {\n    $('#form-login').submit(function () {\n        submitAjax('#form-login');\n        return false;\n    });\n});*/\n```\n\n### 遍历数组/对象的几种方式\n\n常用的方法：`for、for in、for of（es6语法）、forEach、map、filter、$.each、$.map`\n\n+ 只能遍历数组：`for、forEach、map、filter（map和filter会返回一个新数组）`\n\n+ 可以遍历数组和非数组对象：`for in、for of（es6语法-只能遍历部署了 Iterator 接口的对象）、$.each、$.map`\n\n**注：**默认遍历后都不会改变原数组，除非手动在遍历内容体中去改变原数组。\n\n```javascript\n// 声明几个需要用到的变量\nvar arr = [1, 78, 90, \"hello\", 22], results = [];\n```\n\n\n\n#### 1、 使用for循环遍历\n\n\n\n```javascript\nfor (var i, len = arr.length; i < len; i++) {\n    console.log(\"for=>index=\" + i + \"/value=\" + arr[i]);\n}\n```\n\n*注：用for循环遍历，使用临时变量，将长度缓存起来，避免重复获取数组长度，提高效率*\n\n#### 2、使用for in循环遍历\n\n\n\n```javascript\nfor (var i in arr) {\n    console.log(\"for in=>index=\" + i + \"/value=\" + arr[i]);\n}\n```\n\n*注：据说这个效率是循环遍历中效率最低的*\n\n#### 3、使用for of循环遍历[es6语法]\n\n\n\n```javascript\nfor (let value of arr) {\n    console.log(\"for of=>value=\" + value);\n}\n```\n\n*注：性能优于for in，value代表的是属性值*\n\n#### 4、使用forEach遍历\n\n\n\n```javascript\nresults = arr.forEach(function (value, index, array) {\n    console.log(\"forEach=>\" + index + \": \" + value + \"/\" + array[index]);\n    return value; \n});\nconsole.log(\"forEach=>results=\" + results);  // =>undefined\n```\n\n*其中value参数是必须的，代表当前元素的值。forEach返回值为undefined*\n\n#### 5、使用map遍历\n\n\n\n```javascript\nresults = arr.map(function (value, index, array) {\n    console.log(\"map=>\" + index + \": \" + value + \"/\" + array[index]);\n    return value + index;\n});\nconsole.log(\"map=>results=\" + results); // =>1,79,92,hello3,26\n```\n\n*（1）：其中value参数是必须的，代表当前元素的值\n （2）：map返回一个新数组，数组中的元素为原始数组元素调用函数处理后的值，不会改变原数组，***返回值是什么就是什么，如果不做其它处理的新数组长度和原始数组长度相等***\n\n#### 6、使用filter遍历\n\n\n\n```javascript\nresults = arr.filter(function (value, index, array) {\n    console.log(\"filter=>\" + index + \": \" + value + \"/\" + array[index]);\n    return isNaN(value) ? \"\" : value;\n});\nconsole.log(\"filter=>results=\" + results); // =>1,78,90,22\n```\n\n*（1）：其中value参数是必须的，代表当前元素的值\n （2）：使用filter方法创建一个新的数组，新数组中的元素是通过检查指定数组中符合条件的所有元素，不会改变原数组，***返回值如果是false类型的即删除该元素**\n （3）：jquery的方法filter只是对jQuery对象进行一个过滤，筛选出与指定表达式匹配的元素集合。如：`$(\"p\").filter(\".selected\"); // 保留带有select类的p元素`*\n\n#### **7**、**使用jQuery核心方法`$.each`遍历数组**\n\n\n\n```javascript\n $.each(arr, function (index, value) {\n    console.log(\"$.each=>index=\" + index + \"/value=\" + value);\n});\n```\n\n*注：该方法也可以用来操作jQuery对象，如：`$(\"div\").each(callback)` // 对匹配到的div元素执行相关操作*\n\n#### 8、使用jQuery核心方法`$.map`遍历数组\n\n\n\n```javascript\nresults = $.map(arr, function (value, index) {\n    console.log(\"$.each=>index=\" + index + \"/value=\" + value);\n    return isNaN(value) ? null : value;\n   // 返回null（删除数组中的项目），不能返回\"\"，只是将对应的数组元素置为长度为0的字符串\n});\nconsole.log(arr + \"=======\" + results); // 1,78,90,hello,22=======1,78,90,22\n```\n\n*该方法也可以用来操作jQuery对象，如：*\n\n```javascript\n$(\"p\").append( $(\"input\").map(function(){\n   return $(this).val();\n }).get().join(\", \") );\n```\n\n### 追加元素\n\n```html\n01、html()\nhtml() 函数的作用原理是先移除匹配元素内部的html代码，然后将新的html添加到匹配元素\n\n设置内容\n\n当使用该方法返回一个值时，它会返回第一个匹配元素的内容\n\n语法： $(selector).html();\n\n示例：\n\n<p>Hello World</p>\n<script type=\"text/javascript\"> \n    $(\"p\").html();\n</script>\n\n\n设置元素内容\n\n当使用该方法设置一个值时，它会覆盖所有匹配元素的内容。\n\n语法：$(selector).html(content)\n\n示例：\n\n<p>Hello World</p>\n<script type=\"text/javascript\"> \n    $(\"p\").html(Hello World 2);\n</script>\n\n\n02、prepend()\nprepend() 方法向匹配元素集合中的每个元素开头插入由参数指定的内容\n\n语法：$(selector).prepend(content)\n\n示例：\n\n<p>Hello World</p>\n<script type=\"text/javascript\"> \n  $(\"p\").prepend(\"<b>Say:</b>\");\n</script>\n\n\n03、prependTo()\nprependTo() 方法向目标结尾插入匹配元素集合中的每个元素\n\n语法：$(content).prependTo(selector)\n\n示例：\n\n<p>Hello World</p>\n<script type=\"text/javascript\"> \n  $(\"<b>Say:</b>\").prependTo(\"p\");\n</script>\n\nprependTo() 实际上就是颠倒的 prepend() 方法\n\n提示：prepend()和 prependTo() 方法作用相同。差异在于语法：内容和选择器的位置不同\n\n\n04、append()\nappend() 方法向匹配元素集合中的每个元素结尾插入由参数指定的内容\n\n语法：$(selector).append(content)\n\n示例：\n\n<p>Say</p>\n<script type=\"text/javascript\"> \n  $(\"p\").append(\"<b>:Hello World</b>\");\n</script>\n\n\n05、appendTo()\nappendTo() 方法向目标结尾插入匹配元素集合中的每个元素\n\n语法：$(content).appendTo(selector)\n\n示例：\n\n<p>Say</p>\n<script type=\"text/javascript\"> \n  $(\"<b>:Hello World</b>\").prependTo(\"p\");\n</script>\n\n\n提示：append() 和appendTo () 方法执行的任务相同。不同之处在于：内容的位置和选择器\n\n\n06、before()\nbefore() 方法在每个匹配的元素之前插入内容\n\n语法：$(selector).before(content)\n\n示例:\n\n<p>Say:Hello World 2</p>\n<script type=\"text/javascript\"> \n  $(\"p\").before(\"<p><b>Say:Hello world 1</b></p>\");\n</script>\n\n\n\n07、insertBefore()\ninsertBefore() 把匹配的元素插入到另一个指定的元素集合的前面\n\n语法：$(content).insertBefore(selector)\n\n示例:\n\n<p>Hello World 2</p>\n<script type=\"text/javascript\"> \n  $(\"<span><b>Say:Hello world 1</b></span>\").insertBefore(\"p\");\n</script>\n\n\n注释：如果该方法用于已有元素，这些元素会被从当前位置移走，然后被添加到被选元素之前。\n\n插入已有元素示例：\n\n<p>Hello World</p>\n<h1>Hello World 666</h1>\n<script type=\"text/javascript\"> \n  $(\"h1\").insertBefore(\"p\");\n</script>\n\n\n08、after()\nafter() 在匹配的元素之后插入内容\n\n语法：$(selector).after(content)\n\n示例:\n\n<p>Hello World</p>\n<script type=\"text/javascript\"> \n  $(\"p\").after(\"<h1>Hello World 666</h1>\");\n</script>\n\n\n09、insertAfter()\ninsertAfter() 方法在被选元素之后插入 HTML 标记或已有的元素\n\n语法：$(content).insertAfter(selector)\n\n示例\n\n<p>Hello World</p>\n<script type=\"text/javascript\"> \n  $(\"<h1>Hello World 666</h1>\").insertAfter(\"p\");\n</script>\n\n\n注释：如果该方法用于已有元素，这些元素会被从当前位置移走，然后被添加到被选元素之后。\n\n插入已有元素示例：\n\n<p>Hello World</p>\n<h1>Hello World 666</h1>\n<script type=\"text/javascript\"> \n  $(\"h1\").insertAfter(\"p\");\n</script>\n\n\n总结：\n\nprepend() 、prependTo() 、append() 、appendTo() 为元素内部插入html\n\nbefore() 、insertBefore() 、after() 、insertAfter()为元素外部插入html\n```\n\n\n\n### 动态append添加元素后点击事件失效\n\n1. 问题描述：在div中动态添加span元素，之后执行\n\n```javascript\n$(selector).click(function(){var param = $(this).text();})\n```\n\n无法触发事件。\n\n2. 原因：append中的节点是在整个文档加载完之后开始添加，页面不会为append的元素初始化添加点击事件，故使用这种方式动态添加的节点中的click事件没有生效。\n\n3. 解决方案：事件委托方式解决，将指定的事件绑定在document上，只要append元素符合指定的元素，就会绑定此事件 。$(document).on(\"click\",\"指定的元素\",function(){});\n最后实现代码\n\n```javascript\n$(document).on(\"click\", selector, function(){\n        var param = $(this).text();\n})\n```\n\n### 获取父级元素用parent()\n\n```javascript\n$(this).parent('ul');\n```\n\n### 获取同级元素用siblings()\n\n```javascript\n$(this).parent('ul').siblings();\n```\n\n### 获取子元素用find()\n\n```javascript\n$(this).parent('ul').siblings().find('li');\n```\n\n### jquery获取第几个元素的方法总结\n\n 　使用jquery时经常会遇到，选择器选择一组元素后，需要在这组元素中找到第几个元素。\n\n　　jquery中使用eq()方法找到第几个元素或第N个元素，jquery中eq()的使用如下：\n\n　　eq() 选择器选取带有指定 index 值的元素。\n\n　　index 值从 0 开始，所有第一个元素的 index 值是 0(不是 1)。\n\n　　经常与其他元素/选择器一起使用，来选择指定的组中特定序号的元素。\n\n　　例子：\n\n```javascript\n$('#test').children().eq(1).css({'display':'inline-block'});\n```\n\n　　\n\n　　将id为test的元素的第二个子元素样式设置为'display':'inline-block'。\n\n　　另一种写法\n\n```javascript\n$(\":eq(index)\")\n如：$(\"p:eq(1)\")\n```\n\n　　\n\n　　附另一种办法的例子\n\n```javascript\n<script type=\"text/javascript\" src=\"/jquery-latest.js\"></script>\n<script>\n$(function(){\n $('a').each(function(i){\n  this.onclick=function(){\n   alert(i);\n   return false;\n  };\n });\n});\n</script>\n<a href=\"\">百度</a>\n<a href=\"\">google</a>\n<a href=\"http://www.111cn.net\">msn</a>\n<a href=\"\">qq</a>\n```\n\n　　\n\n　　或者这样写\n\n```javascript\n<script type=\"text/javascript\" src=\"jquery-1.1.3.1.js\"></script>\n<script type=\"text/javascript\">\n    $(function()\n    {\n      $(\"a\").bind(\"click\",function()\n      {\n        alert($(\"a\").index(this));\n      }\n      )\n    }\n    )\n</script>\n```\n\n　　\n\n　　效果是一样的哦。\n\n### JS，JQ输入框oninput事件1秒后请求接口\n\n```javascript\n let searchTimer = null; //全局定时器\n this.$ele.on('input', '.search input', function () {\n   clearTimeout(searchTimer); //输入清除定时器\n   searchTimer = setTimeout(function () { \n\t  fn(); //接口请求函数\n   },1000)\n });\n```\n\n### 加减乘除运算时会出现精度损失\n\n```javascript\n<script>\n  /**\n  加法运算，避免数据相加小数点后产生多位数和计算精度损失。\n  @param num1加数1 | num2加数2\n  */\n  function numAdd(num1, num2) {\n    var baseNum, baseNum1, baseNum2;\n    try {\n      baseNum1 = num1.toString().split(\".\")[1].length;\n    } catch (e) {\n      baseNum1 = 0;\n    }\n    try {\n      baseNum2 = num2.toString().split(\".\")[1].length;\n    } catch (e) {\n      baseNum2 = 0;\n    }\n    baseNum = Math.pow(10, Math.max(baseNum1, baseNum2));\n    return (num1 * baseNum + num2 * baseNum) / baseNum;\n  };\n  /*\n  减法运算，避免数据相减小数点后产生多位数和计算精度损失。\n  @param num1被减数 | num2减数\n  */\n  function numSub(num1, num2) {\n    var baseNum, baseNum1, baseNum2;\n    var precision;// 精度\n    try {\n      baseNum1 = num1.toString().split(\".\")[1].length;\n    } catch (e) {\n      baseNum1 = 0;\n    }\n    try {\n      baseNum2 = num2.toString().split(\".\")[1].length;\n    } catch (e) {\n      baseNum2 = 0;\n    }\n    baseNum = Math.pow(10, Math.max(baseNum1, baseNum2));\n    precision = (baseNum1 >= baseNum2) ? baseNum1 : baseNum2;\n    return ((num1 * baseNum - num2 * baseNum) / baseNum).toFixed(precision);\n  };\n  /*\n  乘法运算，避免数据相乘小数点后产生多位数和计算精度损失。\n  @param num1被乘数 | num2乘数\n  */\n  function numMulti(num1, num2) {\n    var baseNum = 0;\n    try {\n      baseNum += num1.toString().split(\".\")[1].length;\n    } catch (e) {\n    }\n    try {\n      baseNum += num2.toString().split(\".\")[1].length;\n    } catch (e) {\n    }\n    return Number(num1.toString().replace(\".\", “”)) * Number(num2.toString().replace(\".\", “”)) / Math.pow(10, baseNum);\n  };\n  /*\n  除法运算，避免数据相除小数点后产生多位数和计算精度损失。\n  @param num1被除数 | num2除数\n  */\n  function numDiv(num1, num2) {\n    var baseNum1 = 0, baseNum2 = 0;\n    var baseNum3, baseNum4;\n    try {\n      baseNum1 = num1.toString().split(\".\")[1].length;\n    } catch (e) {\n      baseNum1 = 0;\n    }\n    try {\n      baseNum2 = num2.toString().split(\".\")[1].length;\n    } catch (e) {\n      baseNum2 = 0;\n    }\n    with (Math) {\n      baseNum3 = Number(num1.toString().replace(\".\", “”));\n      baseNum4 = Number(num2.toString().replace(\".\", “”));\n      return (baseNum3 / baseNum4) * pow(10, baseNum2 - baseNum1);\n    }\n  };\n</script>\n```\n\n### 设置背景图片相关参数\n\n#### 预先设置好一个样式，当用到的时候，只需要给这个对象添加一个类名\n\n```javascript\ncss中：.bj {\n      background: url(star.jpg) no-repeat center;\n      background-size: cover;\n}   js中：\noBox.className = \"bj\";\n```\n\n#### 直接使用JS的元素属性style\n\n```javascript\n<script>\n    // 获取元素\n    var myElement = document.getElementById('myElement');\n\n    // 控制背景图片URL\n    myElement.style.backgroundImage = 'url(\"your_image_url.jpg\")';\n\n    // 控制背景大小\n    myElement.style.backgroundSize = 'cover'; // 你可以根据需要调整，比如 'contain'、'50% 50%' 等\n\n    // 控制是否平铺\n    myElement.style.backgroundRepeat = 'no-repeat'; // 'repeat-x', 'repeat-y', 'repeat' 也是可选值\n\n  // 设置背景图片固定属性\n    myElement.style.backgroundAttachment = 'fixed';\n\n    // 如果需要设置多个背景属性，可以使用 background 属性\n    // myElement.style.background = 'url(\"your_image_url.jpg\") center center / cover no-repeat fixed';\n\n    // 如果你希望设置背景位置，可以使用 backgroundPosition 属性\n    // myElement.style.backgroundPosition = 'center center';\n\n    // 如果需要设置多个背景属性，可以使用 background 属性\n    // myElement.style.background = 'url(\"your_image_url.jpg\") center center / cover no-repeat';\n\n    // 你可以在任何时候更新这些属性，比如在事件发生时\n    // myElement.addEventListener('click', function() {\n    //     myElement.style.backgroundSize = 'contain';\n    // });\n\n</script>\n```\n\n### 获取当前鼠标选中的文本/html\n\n```html\n<script>\n\n  /**\n   * 获取当前选中的text/html\n   * */\n  function getCurrentSelect(){\n\n    let selectionObj = null, rangeObj = null;\n    let selectedText = \"\", selectedHtml = \"\";\n\n    // 处理兼容性\n    if(window.getSelection){\n      // 现代浏览器\n      // 获取text\n      selectionObj = window.getSelection();\n      selectedText = selectionObj.toString();\n\n      //  获取html\n      rangeObj = selectionObj.getRangeAt(0);\n      var docFragment = rangeObj.cloneContents();\n      var tempDiv = document.createElement(\"div\");\n      tempDiv.appendChild(docFragment);\n      selectedHtml = tempDiv.innerHTML;\n    } else if(document.selection){\n        // 非主流浏览器IE\n        selectionObj = document.selection;\n        rangeObj = selectionObj.createRange();\n        selectedText = rangeObj.text;\n        selectedHtml = rangeObj.htmlText;\n    }\n\n    return {\n        text: selectedText,\n        html: selectedHtml\n    }\n  };\n\n  // 监听内容区域鼠标抬起事件\n  document.querySelector('#content').addEventListener('mouseup', function(){\n    console.log('onmouseup');\n    console.log(getCurrentSelect());\n  })\n</script>\n```\n\n","tags":["js","jq"],"categories":["js/jq"]},{"title":"Hexo主题 —— NexT优化","url":"/626cf99c.html","content":"# Hexo主题 —— NexT优化\n\n首先，必须要说明的是，关于NexT主题的所有设置与功能都能在[《NexT主题官方文档》](https://link.juejin.cn?target=http%3A%2F%2Ftheme-next.iissnan.com%2Fgetting-started.html)中找到。本文只是记录下我采用的设置。\n\n------\n\n## 主题配置文件_config.yaml\n\nHexo安装根目录下的`_config.yaml`文件负责的是整个Hexo的属性配置，而主题目录下也有`/theme/_config.yaml`文件，负责单个主题的属性配置，NexT主题的配置文件就在`Hexo/themes/next/`目录下。\n\n------\n\n## Scheme主题选择\n\n在`theme/_config.yaml`文件中的`scheme`目录下选择自己喜欢的主题即可。\n **Muse** 是NexT的默认版本，黑白主调，大量留白。\n\n![Muse](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a70749019~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n**Mist** 是NexT的紧凑版本，整洁有序。\n\n![Mist](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a7351d33b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n**Pisces** 是双栏设计，头像、签名等被移到左边单独作为一栏，个人最喜欢。\n\n![Pisces](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a7363ffa8~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## 文内链接形式\n\n未修改时，文内链接颜色和普通文本没有区别：\n\n![link origin](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a73672f51~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n 为了突出区别性，我们在`themes/next/source/css/_common/components/post/post.styl`文件中添加下列的代码：\n\n\n\n```\n复制代码  .post-body p a {\n    color: #0593d3;\n    border-bottom: none;\n    border-bottom: 1px solid #0593d3;\n    &:hover {\n      color: #fc6423;\n      border-bottom: none;\n      border-bottom: 1px solid #fc6423;\n    }\n  }\n```\n\n修改后的文内链接是蓝色，鼠标放上去会变为红色：\n\n![link new](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a738f1237~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## 菜单设置\n\n在`theme/_config.yaml`文件中的`menu`目录下：`home`属性代表主页，`about`属性代表个人信息，`tags`属性代表标签，`categories`属性代表目录，`archives`属性代表归档…… 通过修改对应的属性，可以修改页面的展示信息，即左侧的菜单栏：\n\n![menu](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a73bf0e6b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## 网站图标设置\n\n将图片（png或jpg格式，不是favicon.ico）放在`themes/next/source/images`里，然后修改主题配置文件`theme/_config.yaml`的`favicon`属性，将`small`、`medium`和`apple_touch_icon`都配置为`/images/imgPath`就可以了，其他字段都注释掉。\n\n```\n复制代码favicon:\n  small: /images/db3.png\n  medium: /images/db3.png\n  apple_touch_icon: /images/db3.png\n```\n\n------\n\n## 启用RSS订阅博客更新\n\n> 什么是RSS？\n>  RSS(Really Simple Syndication，简易信息聚合)是一种描述和同步网站内容的格式，是使用最广泛的XML应用。RSS搭建了信息迅速传播的一个技术平台，使得每个人都成为潜在的信息提供者。发布一个RSS文件后，这个RSS Feed中包含的信息就能直接被其他站点调用，而且由于这些数据都是标准的XML格式，所以也能在其他的终端和服务中使用，是一种描述和同步网站内容的格式。\n>  RSS目前广泛用于网上新闻频道，blog和wiki，主要的版本有0.91, 1.0, 2.0。使用RSS订阅能更快地获取信息，网站提供RSS输出，有利于让用户获取网站内容的最新更新。网络用户可以在客户端借助于支持RSS的聚合工具软件，在不打开网站内容页面的情况下阅读支持RSS输出的网站内容。\n\n1. 安装`hexo-generator-feed`插件\n    `npm install hexo-generator-feed --save`\n2. 在站点的配置文件`_config.yaml`文件中配置RSS feed\n    在`_config.yaml`文件末尾添加：\n\n```\n复制代码 feed:  \n type: atom  \n path: atom.xml  \n limit: 0  \n\n plugins:\n   - hexo-generator-feed\n```\n\n1. 修改主题配置文件`theme/_config.yaml`的rss属性为：`rss: /atom.xml`\n2. 使用RSS\n\n运行`hexo g`，如果提示`INFO Generated: atom.xml`，且在`Hexo/public/`目录下生成了`atom.xml`文件，则说明RSS设置成功。\n 运行`hexo d`，如果服务器对应的目录`hexo`下也有了`atom.xml`文件，则说明部署也成功了。\n 这样你的博客就可以被别人订阅了，点击主页的RSS按钮，会显示如下页面：\n\n![RSS](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b45485959~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## 打赏\n\n在`theme/_config.yaml`文件中的`Reward(Donate)`目录下，传入打赏图片，可以展示打赏信息：\n\n```\n复制代码  # Reward (Donate)\n  reward_settings:\n    enable: true\n    animation: true\n    comment: 没办法，要恰饭的嘛\n  reward:\n    wechatpay: https://tva1.sinaimg.cn/large/007rAy9hgy1g3b8vqnvnrj30u014q0w6.jpg\n    alipay: https://tva1.sinaimg.cn/large/007rAy9hgy1g3b8wjrpzgj30p011iaco.jpg\n```\n\n------\n\n## 首页文章折叠\n\n将`theme/_config.yaml`文件`auto_excerpt`目录下的`enable`改为true即可。\n\n![auto_excerpt](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b4555e0bd~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## 回到顶部按钮显示百分比\n\n```\n复制代码back2top:\n  # 回到顶部按钮\n  enable: true\n  # true，按钮显示在侧边栏；false，按钮显示在右下角\n  sidebar: false\n  # 按钮上显示百分比\n  scrollpercent: true\n```\n\n如图：\n\n![back2top](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b48279625~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## 文章添加阴影\n\n未添加阴影时，文章之间的分隔不是很明显：\n\n![no shadow](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b4f5e84dd~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n 在`themes/next/source/css/_custom/custom.styl`文件中添加如下代码：\n\n\n\n```\n复制代码// Custom styles.\n// 为文章添加阴影效果\n.post {\n   margin-top: 60px;\n   margin-bottom: 60px;\n   padding: 25px;\n   -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);\n   -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);\n}\n```\n\n效果如图：\n\n![shadow](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b5b86a4e7~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## 头像\n\n修改`theme/_config.yaml`文件下的`avatar`属性，可以使用本地图片，或是在`avatar: url:`属性中传入网络图片。\n\n------\n\n## 社交链接\n\n修改`theme/_config.yaml`文件下的`social`属性，按照格式设置即可：\n\n```\n复制代码  social:\n    GitHub: https://github.com/DragonBaby308 || github\n    Bilibili: https://space.bilibili.com/24837083 || bilibili\n```\n\n------\n\n## 友情链接\n\n修改`theme/_config.yaml`文件下的`links`属性，按照格式设置即可：\n\n```\n复制代码links:\n  让我帮你百度一下: http://lab.mkblog.cn/lmbtfy/\n```\n\n------\n\n## Local Search本地搜索\n\n1. 首先，安装`hexo-generator-searchdb`，在根目录下执行：\n    `npm install -g hexo-generator-searchdb --save`\n2. 在站点配置文件`_config.yaml`中添加如下内容：\n\n```\n复制代码search:\n  path: ./public/search.xml\n  field: post\n  format: html\n  limit: 10000\n```\n\n1. 将主题配置文件\n\n   ```\n   theme/_config.yaml\n   ```\n\n   文件中\n\n   ```\n   local_search\n   ```\n\n   标签下的\n\n   ```\n   enable\n   ```\n\n   改为true。\n\n   ![Local Search](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b8205d551~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n------\n\n## 不蒜子统计UV（访客数）和PV（访问量）\n\n将主题配置文件`theme/_config.yaml`文件中`busuanzi_count`标签下的`enable`改为true。配置如下：\n\n```\n复制代码busuanzi_count:\n  enable: true\n  # 访客数\n  site_uv: true\n  # 访问量\n  site_pv: true\n  # 文章阅读次数\n  page_pv: true\n```\n\n------\n\n## 动态背景\n\n首先将动态背景所需要依赖的js下载到`themes/next/source/lib`目录下，然后将主题配置文件`theme/_config.yaml`文件中`canvas`标签下的对应特效改为true即可启用。 如，我需要使用`Canvas-nest`动画，则需要首先`git clone https://github.com/theme-next/theme-next-canvas-nest Hexo/themes/next/source/lib/canvas-nest`，将js下载到本地，然后再修改主题配置文件`theme/_config.yaml`文件中`canvas_nest`标签下的`enable`为true。\n\n```\n复制代码# canvas-nest  鼠标静止不动，会有线条聚集\ngit clone https://github.com/theme-next/theme-next-canvas-nest Hexo/themes/next/source/lib/canvas-next\n\n# three_waves  波浪\n# canvas_lines\n# canvas_sphere\ngit clone https://github.com/theme-next/theme-next-three Hexo/themes/next/source/lib/next-three\n\n# canvas-ribbon  彩虹效果，只支持Pisces\ngit clone https://github.com/theme-next/theme-next-canvas-ribbon Hexo/themes/next/source/lib/canvas-ribbon\n\ncanvas_nest:\n  enable: true\n  onmobile: true # display on mobile or not\n  color: \"0,0,255\" # RGB values, use ',' to separate\n  opacity: 0.5 # the opacity of line: 0~1\n  zIndex: -1 # z-index property of the background\n  count: 99 # the number of lines\n\nthree_waves: true\ncanvas_lines: true\ncanvas_sphere: true\n\ncanvas_ribbon:\n  enable: true\n  size: 300\n  alpha: 0.6\n  zIndex: -1\n```\n\n------\n\n## 加载条效果\n\n首先通过`git clone https://github.com/theme-next/theme-next-pace Hexo/themes/next/source/lib/page`命令，将加载条所需要依赖的js下载到`Hexo/themes/next/source/lib`目录下，然后将主题配置文件`theme/_config.yaml`文件中`pace`标签改为true，在`pace_theme`中选用对应主题即可启用。\n\n```\n复制代码pace: true\n# pace_theme: pace-theme-big-counter  右上角百分比数字\n# pace_theme: pace-theme-bounce  右上角弹球\n# pace_theme: pace-theme-barber-shop  理发店蓝白加载条，从左滑到右\n# pace_theme: pace-theme-center-atom  屏幕正中，原子样式的圆形加载条\n# pace_theme: pace-theme-center-circle  屏幕正中，圆形转圈加载条\n# pace_theme: pace-theme-center-radar  屏幕正中，雷达形状\n# pace_theme: pace-theme-center-simple  屏幕正中，进度条\n# pace_theme: pace-theme-corner-indicator  右上角转圈\n# pace_theme: pace-theme-fill-left  从左到右\n# pace_theme: pace-theme-flash  右上角有一个小圈圈，其他特效没看出来\n# 屏幕正中间进度条\npace_theme: pace-theme-loading-bar  \n# pace_theme: pace-theme-mac-osx  斑马纹？\n# pace_theme: pace-theme-minimal  啥也没有\n```\n\n------\n\n## 本文结束标记\n\n在`themes/next/layout/_macro`目录下新建`passage-end-tag.swig`文件，添加以下代码：\n\n```\n复制代码<div>\n    {% if not is_index %}\n        <div style=\"text-align:center;color: #ccc;font-size:14px;\">-------------本文结束<i class=\"fa fa-paw\"></i>感谢您的阅读-------------</div>\n    {% endif %}\n</div>\n```\n\n接着在`themes/next/layout/_macro/post.swig`文件中，`post-body`后，添加如下代码：\n\n```\n复制代码<div>\n  {% if not is_index %}\n    {% include 'passage-end-tag.swig' %}\n  {% endif %}\n</div>\n```\n\n最后在`theme/_config.yaml`文件末尾添加：\n\n```\n复制代码# 文章末尾添加“本文结束”标记\npassage_end_tag:\n  enabled: true\n```\n\n效果如图：\n\n![pageend](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b8ea536b2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## 版权声明\n\n1. 在`theme/next/layout/_macro/`目录下添加文件`my-copyright.swig`\n\n```\n复制代码{% if page.copyright %}\n<div class=\"my_post_copyright\">\n  <script src=\"//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js\"></script>\n\n  <!-- JS库 sweetalert 可修改路径 -->\n  <script src=\"https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js\"></script>\n  <script src=\"https://unpkg.com/sweetalert/dist/sweetalert.min.js\"></script>\n  <p><span>本文标题:</span><a href=\"{{ url_for(page.path) }}\">{{ page.title }}</a></p>\n  <p><span>文章作者:</span><a href=\"/\" title=\"访问 {{ theme.author }} 的个人博客\">{{ theme.author }}</a></p>\n  <p><span>发布时间:</span>{{ page.date.format(\"YYYY年MM月DD日 - HH:mm\") }}</p>\n  <p><span>最后更新:</span>{{ page.updated.format(\"YYYY年MM月DD日 - HH:mm\") }}</p>\n  <p><span>原始链接:</span><a href=\"{{ url_for(page.path) }}\" title=\"{{ page.title }}\">{{ page.permalink }}</a>\n    <span class=\"copy-path\"  title=\"点击复制文章链接\"><i class=\"fa fa-clipboard\" data-clipboard-text=\"{{ page.permalink }}\"  aria-label=\"复制成功！\"></i></span>\n  </p>\n  <p><span>许可协议:</span><i class=\"fa fa-creative-commons\"></i> <a rel=\"license\" href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" target=\"_blank\" title=\"Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)\">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  \n</div>\n<script>\n    var clipboard = new Clipboard('.fa-clipboard');\n      $(\".fa-clipboard\").click(function(){\n      clipboard.on('success', function(){\n        swal({   \n          title: \"\",   \n          text: '复制成功',\n          icon: \"success\",\n          showConfirmButton: true\n          });\n        });\n    });  \n</script>\n{% endif %}\n```\n\n1. 在`theme/next/source/css/_common/components/post/`目录下添加文件`my-post-copyright.styl`\n\n```\n复制代码.my_post_copyright {\n  width: 85%;\n  max-width: 45em;\n  margin: 2.8em auto 0;\n  padding: 0.5em 1.0em;\n  border: 1px solid #d3d3d3;\n  font-size: 0.93rem;\n  line-height: 1.6em;\n  word-break: break-all;\n  background: rgba(255,255,255,0.4);\n}\n.my_post_copyright p{margin:0;}\n.my_post_copyright span {\n  display: inline-block;\n  width: 5.2em;\n  color: #b5b5b5;\n  font-weight: bold;\n}\n.my_post_copyright .raw {\n  margin-left: 1em;\n  width: 5em;\n}\n.my_post_copyright a {\n  color: #808080;\n  border-bottom:0;\n}\n.my_post_copyright a:hover {\n  color: #a3d2a3;\n  text-decoration: underline;\n}\n.my_post_copyright:hover .fa-clipboard {\n  color: #000;\n}\n.my_post_copyright .post-url:hover {\n  font-weight: normal;\n}\n.my_post_copyright .copy-path {\n  margin-left: 1em;\n  width: 1em;\n  +mobile(){display:none;}\n}\n.my_post_copyright .copy-path:hover {\n  color: #808080;\n  cursor: pointer;\n}\n```\n\n1. 修改`theme/next/layout/_macro/post.swig`文件\n\n```\n复制代码{#####################}\n{### END POST BODY ###}\n{#####################}\n\n  # 添加下面这段\n{% if not is_index %}\n  {% include 'my-copyright.swig' %}\n{% endif %}\n\n{% if theme.wechat_subscriber.enable and not is_index %}\n  {% include '../_partials/post/wechat-subscriber.swig' %}\n{% endif %}\n```\n\n1. 修改`theme/next/source/css/_common/components/post/post.styl`文件，在最后一行新增：`@import \"my-post-copyright\";`\n2. 修改`Hexo/scaffolds/post.md`，默认显示版权信息\n\n```\n复制代码---\ntitle: {{ title }}\ndate: {{ date }}\ntags:\ncategories:\ncopyright:\n---\n```\n\n效果如图：\n\n![copyright](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730ba695cf7a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## Livere（来必力）评论区\n\n首先，访问[Livere官网](https://link.juejin.cn?target=https%3A%2F%2Flivere.com%2Finsight%2FmyCode)，注册→登录→安装，会得到一个`data-id`。\n\n![data-id](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730bbb0dc2f6~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n将`data-id`复制粘贴到`theme/_config.yaml`文件的`livere_uid`属性即可。效果如图：\n\n![Livere](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730bcd06c639~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n------\n\n## Live2d 看板娘\n\n1. 安装hexo-helper-live2d\n\n在博客根目录下，执行`npm install hexo-helper-live2d --save`\n\n1. 修改站点配置文件或主题配置文件\n\n官方已有的看板娘名称请点[这里](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiazeyu%2Flive2d-widget-models)查看，部分看板娘的模型预览请看[CSDN某博客](https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fwang_123_zy%2Farticle%2Fdetails%2F87181892)。\n 我修改的是站点配置文件`Hexo/_config.yaml`，添加如下代码：\n\n```\n复制代码live2d:\n  enable: true\n  scriptFrom: local\n  pluginRootPath: live2dw/\n  pluginJsPath: lib/\n  pluginModelPath: assets/\n  model:\n    # 填写你所需要的看板娘名称\n    use: live2d-widget-model-haruto\n  display:\n    position: right\n    width: 150\n    height: 300\n  mobile:\n    show: true\n```\n\n1. 通过npm安装依赖的看板娘文件\n\n`npm install live2d-widget-model-name`，其中`name`是你选择的官方看板娘的名字，如我选择的是`haruto`，则为`npm install live2d-widget-model-haruto`。\n 重新运行`hexo clean && hexo d -g`则可在主页看到了。\n\n![haruto](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730bde1a76a1~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png)\n\n\n\n\n\n### 插件url设置\n\n安装插件\n\n```npm\nnpm install hexo-abbrlink --save\n```\n\n\n\n在博客的“`_config.yml`”文件中加入以下内容：\n\n```npm\n# url优化插件\nabbrlink:\n  alg: crc32  #算法，支持crc16(默认) 和crc32，crc16的url比较短\n  rep: hex    #进制 dec(十进制，默认) 和hex（十六进制）\n```\n\n\n\n使用，将生成的链接修改为，如下\n\n```npm\npermalink:  :abbrlink.html\n```\n\n\n\n[Hexo-Next 主题博客个性化配置超详细，超全面(两万字)-CSDN博客](https://blog.csdn.net/as480133937/article/details/100138838)\n\n[next主题侧边目录点击失效无法正常跳转_csdn目录不能跳转-CSDN博客](https://blog.csdn.net/CodeJoker_7/article/details/123235591)\n\n[hexo-next-主题构建首页动态更新目录 - 简书 (jianshu.com)](https://www.jianshu.com/p/12f1b336d7d4)\n\n\n\n## 调整页面宽度\n\n### Gemini\n\n修改文件`source/css/_variables/Pisces.styl`，调整如下\n\n```html\n$content-desktop              = 'calc(100% - %s)' % unit($content-desktop-padding / 2, 'px');\n// $content-desktop-large        = 1160px;\n// $content-desktop-largest      = 73%;\n\n$content-desktop-large   = 85em\n$content-desktop-largest = 85%\n```\n\n*数值可以调整*\n\n[调整页面宽度 - Hexo-NexT](https://hexo-next.readthedocs.io/zh-cn/latest/next/advanced/调整页面宽度/)\n","tags":["hexo","主题"],"categories":["hexo"]},{"title":"Hexo博客搭建与部署","url":"/106a6217.html","content":"\n### [Hexo](https://hexo.io/zh-cn/index.html)简介\n\nHexo是一款基于[Node](https://so.csdn.net/so/search?q=Node&spm=1001.2101.3001.7020).js的静态博客框架，使用Markdown（或其他渲染引擎）解析文章，依赖少易于安装，可在几秒内利用现有主题生成静态网页。框架提供了很详细的中文文档，大家可以进入[Hexo官网](https://hexo.io/zh-cn/)查看。\n\n### 环境准备\n\n#### 安装Git\n\nGit是一个先进的分布式版本控制工具，可以有效处理不同规模的项目版本管理。这里用于管理你的Hexo文章，将本地的博客上传至[Github](https://so.csdn.net/so/search?q=Github&spm=1001.2101.3001.7020)。到Git官网选择合适的版本[下载](https://gitforwindows.org/)，安装后会有一个Git Bash的命令行工具，之后用该工具操作Git。\n\n检查是否安装成功：\n\n```bash\ngit --version\n```\n\n正常显示版本号，无报错即为安装成功。\n\n#### 安装Node.js\n\nHexo基于Node.js，所以需要安装Node.js及npm工具。可进入Node.js中文网[下载](http://nodejs.cn/download/)，选择LTS（长期支持版本）即可。\n\n检查是否安装成功：\n\n```bash\nnode -v\nnpm -v\n```\n\n### 博客本地搭建\n\n#### 安装Hexo\n\n右键打开Git Bash，输入命令：\n\n```bash\nnpm install -g hexo-cli\n\nhexo -v\n```\n\n#### 初始化博客\n\n```bash\nhexo init myblog\ncd myblog\nnpm install\n```\n\n#### 博客本地效果\n\nGit Bash执行以下命令：\n\n```bash\nhexo -g\nhexo server\n```\n\n启动hexo服务，访问[http://localhost:4000](http://localhost:4000/)即可看到生成的博客页面。使用Ctrl+C可关闭本地服务。\n\n### 博客Github部署\n\n#### 创建个人仓库\n\n这里需要Github账号，如果没有可以去[注册](https://github.com/join)一个。\n\n[登录](https://github.com/login)Github，新建一个仓库，命名格式为：用户名.github.io。比如，我的用户名是muzihuaner，我的仓库名为muzihuaner.github.io`。注意这里必须按此格式命名，只有这样，之后部署到GitHub pages的时候，才会被识别。\n\n登录Github，新建一个仓库，命名格式为：用户名.github.io。比如，我的用户名是muzihuaner，我的仓库名为muzihuaner.github.io`。注意这里必须按此格式命名，只有这样，之后部署到GitHub pages的时候，才会被识别。\n\n#### 配置SSH\n\n打开Git Bash，输入以下命令，生成本地密钥。这里用户名和邮箱仅作演示，用户名为你Github的用户名，邮箱为你Github的邮箱。\n\n```bash\ngit config --global user.name \"shirllyz\"\ngit config --global user.email \"1107995569@qq.com\"\n```\n\n输入以下命令，检查输入是否正确：\n\n```bash\ngit config user.name\ngit config user.email\n```\n\n确认无误后，输入以下命令，创建SSH：\n\n```bash\nssh-keygen -t rsa -C \"youremail\"\n```\n\n无脑下一步即可\n\n此时在用户文件夹下，已经生成了.ssh文件夹，在本地找到这个文件夹。\n\n\n\nid_rsa是你这台电脑的私人秘钥，id_rsa.pub是公共秘钥。把公钥放在GitHub上，当你连接自己的Github账号时，它就会根据公钥匹配你的私钥，当能够相互匹配时，才能够顺利的通过Git上传你的文件到GitHub上。\n\n在Github的设置中，找到SSH and GPG keys，新建SSH Key，以文本方式打开id_rsa.pub文件，将内容复制到Key，标题随便起，添加Key。\n\n\n\n部署代码到Github\n打开站点配置文件_config.yml，拉到最底部，找到deploy字段，按如下格式修改其内容：\n\n```bash\ndeploy:\n  type: git\n  repository: git@github.com:shirllyz/shirllyz.github.io.git\n  branch: main\n```\n\n其中repo字段可在Github获取：\n\n\n\n回到Git Bash，安装deploy-git ，用于使用命令部署到Github。\n\n```bash\nnpm install hexo-deployer-git --save\n```\n\n然后执行：\n\n```bash\nhexo clean\t//可省略\nhexo generate\nhexo deploy出现下图所示说明部署成功，此时代码已同步至Github。\n```\n\n打开网址`shirllyz.github.io`就可以看到Hexo博客了。\n\n常用命令\nHexo文档中命令很多，但你并不需要记住每一个。在博客的使用过程中，主要的命令如下：\n\n```bash\ninit用于新建网站\n\nhexo init <folder>\n\nnew用于新建文章或页面\n\nhexo new [layout] <title>\n\ngenerate用于生成静态页面\n\nhexo generate\nhexo g\t//简写\n\ndeploy用于将内容部署到网站\n\nhexo deploy\nhexo -g\n\npublish用于将内容从drafts文件夹移动到posts文件夹\n\nhexo publish [layout] <title>\n\nserver用于启动服务器进行预览，默认情况下，访问入口为http://localhost:4000/\n\nhexo server\nhexo s\t//简写\n\n实际上，除了第一次部署时，需要用到hexo init这个命令，平时写博客的过程中，最常用的就是：\n\nhexo n 新建文章/页面\n\nhexo g 生成静态页面\n\nhexo s 本地查看内容\n\nhexo d 部署到Github\n```\n\n\n\n如果需要清除之前生成的内容，可以在生成静态页面前执行hexo clean，其他情况只需要以上四条命令即可。\n\n之后你就可以使用各种各样的主题啦！详细使用主题的教程，看主题的文档就可以了哦！\n","tags":["hexo博客","搭建与部署"],"categories":["hexo"]}]