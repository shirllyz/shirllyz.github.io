[{"title":"Hexo主题 —— NexT优化","url":"/2023/11/20/Hexo%E4%B8%BB%E9%A2%98-NexT%E4%BC%98%E5%8C%96/","content":"<h1 id=\"Hexo主题-——-NexT优化\"><a href=\"#Hexo主题-——-NexT优化\" class=\"headerlink\" title=\"Hexo主题 —— NexT优化\"></a>Hexo主题 —— NexT优化</h1><p>首先，必须要说明的是，关于NexT主题的所有设置与功能都能在<a href=\"https://link.juejin.cn/?target=http://theme-next.iissnan.com/getting-started.html\">《NexT主题官方文档》</a>中找到。本文只是记录下我采用的设置。</p>\n<hr>\n<h2 id=\"主题配置文件-config-yaml\"><a href=\"#主题配置文件-config-yaml\" class=\"headerlink\" title=\"主题配置文件_config.yaml\"></a>主题配置文件_config.yaml</h2><p>Hexo安装根目录下的<code>_config.yaml</code>文件负责的是整个Hexo的属性配置，而主题目录下也有<code>/theme/_config.yaml</code>文件，负责单个主题的属性配置，NexT主题的配置文件就在<code>Hexo/themes/next/</code>目录下。</p>\n<hr>\n<h2 id=\"Scheme主题选择\"><a href=\"#Scheme主题选择\" class=\"headerlink\" title=\"Scheme主题选择\"></a>Scheme主题选择</h2><p>在<code>theme/_config.yaml</code>文件中的<code>scheme</code>目录下选择自己喜欢的主题即可。<br> <strong>Muse</strong> 是NexT的默认版本，黑白主调，大量留白。</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a70749019~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"Muse\"></p>\n<p><strong>Mist</strong> 是NexT的紧凑版本，整洁有序。</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a7351d33b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"Mist\"></p>\n<p><strong>Pisces</strong> 是双栏设计，头像、签名等被移到左边单独作为一栏，个人最喜欢。</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a7363ffa8~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"Pisces\"></p>\n<hr>\n<h2 id=\"文内链接形式\"><a href=\"#文内链接形式\" class=\"headerlink\" title=\"文内链接形式\"></a>文内链接形式</h2><p>未修改时，文内链接颜色和普通文本没有区别：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a73672f51~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"link origin\"></p>\n<p> 为了突出区别性，我们在<code>themes/next/source/css/_common/components/post/post.styl</code>文件中添加下列的代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码  .post-body p a &#123;</span><br><span class=\"line\">    color: #0593d3;</span><br><span class=\"line\">    border-bottom: none;</span><br><span class=\"line\">    border-bottom: 1px solid #0593d3;</span><br><span class=\"line\">    &amp;:hover &#123;</span><br><span class=\"line\">      color: #fc6423;</span><br><span class=\"line\">      border-bottom: none;</span><br><span class=\"line\">      border-bottom: 1px solid #fc6423;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<p>修改后的文内链接是蓝色，鼠标放上去会变为红色：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a738f1237~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"link new\"></p>\n<hr>\n<h2 id=\"菜单设置\"><a href=\"#菜单设置\" class=\"headerlink\" title=\"菜单设置\"></a>菜单设置</h2><p>在<code>theme/_config.yaml</code>文件中的<code>menu</code>目录下：<code>home</code>属性代表主页，<code>about</code>属性代表个人信息，<code>tags</code>属性代表标签，<code>categories</code>属性代表目录，<code>archives</code>属性代表归档…… 通过修改对应的属性，可以修改页面的展示信息，即左侧的菜单栏：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730a73bf0e6b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"menu\"></p>\n<hr>\n<h2 id=\"网站图标设置\"><a href=\"#网站图标设置\" class=\"headerlink\" title=\"网站图标设置\"></a>网站图标设置</h2><p>将图片（png或jpg格式，不是favicon.ico）放在<code>themes/next/source/images</code>里，然后修改主题配置文件<code>theme/_config.yaml</code>的<code>favicon</code>属性，将<code>small</code>、<code>medium</code>和<code>apple_touch_icon</code>都配置为<code>/images/imgPath</code>就可以了，其他字段都注释掉。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码favicon:</span><br><span class=\"line\">  small: /images/db3.png</span><br><span class=\"line\">  medium: /images/db3.png</span><br><span class=\"line\">  apple_touch_icon: /images/db3.png</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"启用RSS订阅博客更新\"><a href=\"#启用RSS订阅博客更新\" class=\"headerlink\" title=\"启用RSS订阅博客更新\"></a>启用RSS订阅博客更新</h2><blockquote>\n<p>什么是RSS？<br> RSS(Really Simple Syndication，简易信息聚合)是一种描述和同步网站内容的格式，是使用最广泛的XML应用。RSS搭建了信息迅速传播的一个技术平台，使得每个人都成为潜在的信息提供者。发布一个RSS文件后，这个RSS Feed中包含的信息就能直接被其他站点调用，而且由于这些数据都是标准的XML格式，所以也能在其他的终端和服务中使用，是一种描述和同步网站内容的格式。<br> RSS目前广泛用于网上新闻频道，blog和wiki，主要的版本有0.91, 1.0, 2.0。使用RSS订阅能更快地获取信息，网站提供RSS输出，有利于让用户获取网站内容的最新更新。网络用户可以在客户端借助于支持RSS的聚合工具软件，在不打开网站内容页面的情况下阅读支持RSS输出的网站内容。</p>\n</blockquote>\n<ol>\n<li>安装<code>hexo-generator-feed</code>插件<br> <code>npm install hexo-generator-feed --save</code></li>\n<li>在站点的配置文件<code>_config.yaml</code>文件中配置RSS feed<br> 在<code>_config.yaml</code>文件末尾添加：</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码 feed:  </span><br><span class=\"line\"> type: atom  </span><br><span class=\"line\"> path: atom.xml  </span><br><span class=\"line\"> limit: 0  </span><br><span class=\"line\"></span><br><span class=\"line\"> plugins:</span><br><span class=\"line\">   - hexo-generator-feed</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li>修改主题配置文件<code>theme/_config.yaml</code>的rss属性为：<code>rss: /atom.xml</code></li>\n<li>使用RSS</li>\n</ol>\n<p>运行<code>hexo g</code>，如果提示<code>INFO Generated: atom.xml</code>，且在<code>Hexo/public/</code>目录下生成了<code>atom.xml</code>文件，则说明RSS设置成功。<br> 运行<code>hexo d</code>，如果服务器对应的目录<code>hexo</code>下也有了<code>atom.xml</code>文件，则说明部署也成功了。<br> 这样你的博客就可以被别人订阅了，点击主页的RSS按钮，会显示如下页面：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b45485959~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"RSS\"></p>\n<hr>\n<h2 id=\"打赏\"><a href=\"#打赏\" class=\"headerlink\" title=\"打赏\"></a>打赏</h2><p>在<code>theme/_config.yaml</code>文件中的<code>Reward(Donate)</code>目录下，传入打赏图片，可以展示打赏信息：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码  # Reward (Donate)</span><br><span class=\"line\">  reward_settings:</span><br><span class=\"line\">    enable: true</span><br><span class=\"line\">    animation: true</span><br><span class=\"line\">    comment: 没办法，要恰饭的嘛</span><br><span class=\"line\">  reward:</span><br><span class=\"line\">    wechatpay: https://tva1.sinaimg.cn/large/007rAy9hgy1g3b8vqnvnrj30u014q0w6.jpg</span><br><span class=\"line\">    alipay: https://tva1.sinaimg.cn/large/007rAy9hgy1g3b8wjrpzgj30p011iaco.jpg</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"首页文章折叠\"><a href=\"#首页文章折叠\" class=\"headerlink\" title=\"首页文章折叠\"></a>首页文章折叠</h2><p>将<code>theme/_config.yaml</code>文件<code>auto_excerpt</code>目录下的<code>enable</code>改为true即可。</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b4555e0bd~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"auto_excerpt\"></p>\n<hr>\n<h2 id=\"回到顶部按钮显示百分比\"><a href=\"#回到顶部按钮显示百分比\" class=\"headerlink\" title=\"回到顶部按钮显示百分比\"></a>回到顶部按钮显示百分比</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码back2top:</span><br><span class=\"line\">  # 回到顶部按钮</span><br><span class=\"line\">  enable: true</span><br><span class=\"line\">  # true，按钮显示在侧边栏；false，按钮显示在右下角</span><br><span class=\"line\">  sidebar: false</span><br><span class=\"line\">  # 按钮上显示百分比</span><br><span class=\"line\">  scrollpercent: true</span><br></pre></td></tr></table></figure>\n\n<p>如图：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b48279625~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"back2top\"></p>\n<hr>\n<h2 id=\"文章添加阴影\"><a href=\"#文章添加阴影\" class=\"headerlink\" title=\"文章添加阴影\"></a>文章添加阴影</h2><p>未添加阴影时，文章之间的分隔不是很明显：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b4f5e84dd~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"no shadow\"></p>\n<p> 在<code>themes/next/source/css/_custom/custom.styl</code>文件中添加如下代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码// Custom styles.</span><br><span class=\"line\">// 为文章添加阴影效果</span><br><span class=\"line\">.post &#123;</span><br><span class=\"line\">   margin-top: 60px;</span><br><span class=\"line\">   margin-bottom: 60px;</span><br><span class=\"line\">   padding: 25px;</span><br><span class=\"line\">   -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);</span><br><span class=\"line\">   -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>效果如图：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b5b86a4e7~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"shadow\"></p>\n<hr>\n<h2 id=\"头像\"><a href=\"#头像\" class=\"headerlink\" title=\"头像\"></a>头像</h2><p>修改<code>theme/_config.yaml</code>文件下的<code>avatar</code>属性，可以使用本地图片，或是在<code>avatar: url:</code>属性中传入网络图片。</p>\n<hr>\n<h2 id=\"社交链接\"><a href=\"#社交链接\" class=\"headerlink\" title=\"社交链接\"></a>社交链接</h2><p>修改<code>theme/_config.yaml</code>文件下的<code>social</code>属性，按照格式设置即可：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码  social:</span><br><span class=\"line\">    GitHub: https://github.com/DragonBaby308 || github</span><br><span class=\"line\">    Bilibili: https://space.bilibili.com/24837083 || bilibili</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"友情链接\"><a href=\"#友情链接\" class=\"headerlink\" title=\"友情链接\"></a>友情链接</h2><p>修改<code>theme/_config.yaml</code>文件下的<code>links</code>属性，按照格式设置即可：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码links:</span><br><span class=\"line\">  让我帮你百度一下: http://lab.mkblog.cn/lmbtfy/</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"Local-Search本地搜索\"><a href=\"#Local-Search本地搜索\" class=\"headerlink\" title=\"Local Search本地搜索\"></a>Local Search本地搜索</h2><ol>\n<li>首先，安装<code>hexo-generator-searchdb</code>，在根目录下执行：<br> <code>npm install -g hexo-generator-searchdb --save</code></li>\n<li>在站点配置文件<code>_config.yaml</code>中添加如下内容：</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码search:</span><br><span class=\"line\">  path: ./public/search.xml</span><br><span class=\"line\">  field: post</span><br><span class=\"line\">  format: html</span><br><span class=\"line\">  limit: 10000</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li><p>将主题配置文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">theme/_config.yaml</span><br></pre></td></tr></table></figure>\n\n<p>文件中</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">local_search</span><br></pre></td></tr></table></figure>\n\n<p>标签下的</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">enable</span><br></pre></td></tr></table></figure>\n\n<p>改为true。</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b8205d551~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"Local Search\"></p>\n</li>\n</ol>\n<hr>\n<h2 id=\"不蒜子统计UV（访客数）和PV（访问量）\"><a href=\"#不蒜子统计UV（访客数）和PV（访问量）\" class=\"headerlink\" title=\"不蒜子统计UV（访客数）和PV（访问量）\"></a>不蒜子统计UV（访客数）和PV（访问量）</h2><p>将主题配置文件<code>theme/_config.yaml</code>文件中<code>busuanzi_count</code>标签下的<code>enable</code>改为true。配置如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码busuanzi_count:</span><br><span class=\"line\">  enable: true</span><br><span class=\"line\">  # 访客数</span><br><span class=\"line\">  site_uv: true</span><br><span class=\"line\">  # 访问量</span><br><span class=\"line\">  site_pv: true</span><br><span class=\"line\">  # 文章阅读次数</span><br><span class=\"line\">  page_pv: true</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"动态背景\"><a href=\"#动态背景\" class=\"headerlink\" title=\"动态背景\"></a>动态背景</h2><p>首先将动态背景所需要依赖的js下载到<code>themes/next/source/lib</code>目录下，然后将主题配置文件<code>theme/_config.yaml</code>文件中<code>canvas</code>标签下的对应特效改为true即可启用。 如，我需要使用<code>Canvas-nest</code>动画，则需要首先<code>git clone https://github.com/theme-next/theme-next-canvas-nest Hexo/themes/next/source/lib/canvas-nest</code>，将js下载到本地，然后再修改主题配置文件<code>theme/_config.yaml</code>文件中<code>canvas_nest</code>标签下的<code>enable</code>为true。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码# canvas-nest  鼠标静止不动，会有线条聚集</span><br><span class=\"line\">git clone https://github.com/theme-next/theme-next-canvas-nest Hexo/themes/next/source/lib/canvas-next</span><br><span class=\"line\"></span><br><span class=\"line\"># three_waves  波浪</span><br><span class=\"line\"># canvas_lines</span><br><span class=\"line\"># canvas_sphere</span><br><span class=\"line\">git clone https://github.com/theme-next/theme-next-three Hexo/themes/next/source/lib/next-three</span><br><span class=\"line\"></span><br><span class=\"line\"># canvas-ribbon  彩虹效果，只支持Pisces</span><br><span class=\"line\">git clone https://github.com/theme-next/theme-next-canvas-ribbon Hexo/themes/next/source/lib/canvas-ribbon</span><br><span class=\"line\"></span><br><span class=\"line\">canvas_nest:</span><br><span class=\"line\">  enable: true</span><br><span class=\"line\">  onmobile: true # display on mobile or not</span><br><span class=\"line\">  color: &quot;0,0,255&quot; # RGB values, use &#x27;,&#x27; to separate</span><br><span class=\"line\">  opacity: 0.5 # the opacity of line: 0~1</span><br><span class=\"line\">  zIndex: -1 # z-index property of the background</span><br><span class=\"line\">  count: 99 # the number of lines</span><br><span class=\"line\"></span><br><span class=\"line\">three_waves: true</span><br><span class=\"line\">canvas_lines: true</span><br><span class=\"line\">canvas_sphere: true</span><br><span class=\"line\"></span><br><span class=\"line\">canvas_ribbon:</span><br><span class=\"line\">  enable: true</span><br><span class=\"line\">  size: 300</span><br><span class=\"line\">  alpha: 0.6</span><br><span class=\"line\">  zIndex: -1</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"加载条效果\"><a href=\"#加载条效果\" class=\"headerlink\" title=\"加载条效果\"></a>加载条效果</h2><p>首先通过<code>git clone https://github.com/theme-next/theme-next-pace Hexo/themes/next/source/lib/page</code>命令，将加载条所需要依赖的js下载到<code>Hexo/themes/next/source/lib</code>目录下，然后将主题配置文件<code>theme/_config.yaml</code>文件中<code>pace</code>标签改为true，在<code>pace_theme</code>中选用对应主题即可启用。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码pace: true</span><br><span class=\"line\"># pace_theme: pace-theme-big-counter  右上角百分比数字</span><br><span class=\"line\"># pace_theme: pace-theme-bounce  右上角弹球</span><br><span class=\"line\"># pace_theme: pace-theme-barber-shop  理发店蓝白加载条，从左滑到右</span><br><span class=\"line\"># pace_theme: pace-theme-center-atom  屏幕正中，原子样式的圆形加载条</span><br><span class=\"line\"># pace_theme: pace-theme-center-circle  屏幕正中，圆形转圈加载条</span><br><span class=\"line\"># pace_theme: pace-theme-center-radar  屏幕正中，雷达形状</span><br><span class=\"line\"># pace_theme: pace-theme-center-simple  屏幕正中，进度条</span><br><span class=\"line\"># pace_theme: pace-theme-corner-indicator  右上角转圈</span><br><span class=\"line\"># pace_theme: pace-theme-fill-left  从左到右</span><br><span class=\"line\"># pace_theme: pace-theme-flash  右上角有一个小圈圈，其他特效没看出来</span><br><span class=\"line\"># 屏幕正中间进度条</span><br><span class=\"line\">pace_theme: pace-theme-loading-bar  </span><br><span class=\"line\"># pace_theme: pace-theme-mac-osx  斑马纹？</span><br><span class=\"line\"># pace_theme: pace-theme-minimal  啥也没有</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"本文结束标记\"><a href=\"#本文结束标记\" class=\"headerlink\" title=\"本文结束标记\"></a>本文结束标记</h2><p>在<code>themes/next/layout/_macro</code>目录下新建<code>passage-end-tag.swig</code>文件，添加以下代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码&lt;div&gt;</span><br><span class=\"line\">    &#123;% if not is_index %&#125;</span><br><span class=\"line\">        &lt;div style=&quot;text-align:center;color: #ccc;font-size:14px;&quot;&gt;-------------本文结束&lt;i class=&quot;fa fa-paw&quot;&gt;&lt;/i&gt;感谢您的阅读-------------&lt;/div&gt;</span><br><span class=\"line\">    &#123;% endif %&#125;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>接着在<code>themes/next/layout/_macro/post.swig</code>文件中，<code>post-body</code>后，添加如下代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码&lt;div&gt;</span><br><span class=\"line\">  &#123;% if not is_index %&#125;</span><br><span class=\"line\">    &#123;% include &#x27;passage-end-tag.swig&#x27; %&#125;</span><br><span class=\"line\">  &#123;% endif %&#125;</span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>最后在<code>theme/_config.yaml</code>文件末尾添加：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码# 文章末尾添加“本文结束”标记</span><br><span class=\"line\">passage_end_tag:</span><br><span class=\"line\">  enabled: true</span><br></pre></td></tr></table></figure>\n\n<p>效果如图：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730b8ea536b2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"pageend\"></p>\n<hr>\n<h2 id=\"版权声明\"><a href=\"#版权声明\" class=\"headerlink\" title=\"版权声明\"></a>版权声明</h2><ol>\n<li>在<code>theme/next/layout/_macro/</code>目录下添加文件<code>my-copyright.swig</code></li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码&#123;% if page.copyright %&#125;</span><br><span class=\"line\">&lt;div class=&quot;my_post_copyright&quot;&gt;</span><br><span class=\"line\">  &lt;script src=&quot;//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;!-- JS库 sweetalert 可修改路径 --&gt;</span><br><span class=\"line\">  &lt;script src=&quot;https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">  &lt;script src=&quot;https://unpkg.com/sweetalert/dist/sweetalert.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">  &lt;p&gt;&lt;span&gt;本文标题:&lt;/span&gt;&lt;a href=&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot;&gt;&#123;&#123; page.title &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class=\"line\">  &lt;p&gt;&lt;span&gt;文章作者:&lt;/span&gt;&lt;a href=&quot;/&quot; title=&quot;访问 &#123;&#123; theme.author &#125;&#125; 的个人博客&quot;&gt;&#123;&#123; theme.author &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class=\"line\">  &lt;p&gt;&lt;span&gt;发布时间:&lt;/span&gt;&#123;&#123; page.date.format(&quot;YYYY年MM月DD日 - HH:mm&quot;) &#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">  &lt;p&gt;&lt;span&gt;最后更新:&lt;/span&gt;&#123;&#123; page.updated.format(&quot;YYYY年MM月DD日 - HH:mm&quot;) &#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">  &lt;p&gt;&lt;span&gt;原始链接:&lt;/span&gt;&lt;a href=&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot; title=&quot;&#123;&#123; page.title &#125;&#125;&quot;&gt;&#123;&#123; page.permalink &#125;&#125;&lt;/a&gt;</span><br><span class=\"line\">    &lt;span class=&quot;copy-path&quot;  title=&quot;点击复制文章链接&quot;&gt;&lt;i class=&quot;fa fa-clipboard&quot; data-clipboard-text=&quot;&#123;&#123; page.permalink &#125;&#125;&quot;  aria-label=&quot;复制成功！&quot;&gt;&lt;/i&gt;&lt;/span&gt;</span><br><span class=\"line\">  &lt;/p&gt;</span><br><span class=\"line\">  &lt;p&gt;&lt;span&gt;许可协议:&lt;/span&gt;&lt;i class=&quot;fa fa-creative-commons&quot;&gt;&lt;/i&gt; &lt;a rel=&quot;license&quot; href=&quot;https://creativecommons.org/licenses/by-nc-nd/4.0/&quot; target=&quot;_blank&quot; title=&quot;Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)&quot;&gt;署名-非商业性使用-禁止演绎 4.0 国际&lt;/a&gt; 转载请保留原文链接及作者。&lt;/p&gt;  </span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    var clipboard = new Clipboard(&#x27;.fa-clipboard&#x27;);</span><br><span class=\"line\">      $(&quot;.fa-clipboard&quot;).click(function()&#123;</span><br><span class=\"line\">      clipboard.on(&#x27;success&#x27;, function()&#123;</span><br><span class=\"line\">        swal(&#123;   </span><br><span class=\"line\">          title: &quot;&quot;,   </span><br><span class=\"line\">          text: &#x27;复制成功&#x27;,</span><br><span class=\"line\">          icon: &quot;success&quot;,</span><br><span class=\"line\">          showConfirmButton: true</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);  </span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li>在<code>theme/next/source/css/_common/components/post/</code>目录下添加文件<code>my-post-copyright.styl</code></li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码.my_post_copyright &#123;</span><br><span class=\"line\">  width: 85%;</span><br><span class=\"line\">  max-width: 45em;</span><br><span class=\"line\">  margin: 2.8em auto 0;</span><br><span class=\"line\">  padding: 0.5em 1.0em;</span><br><span class=\"line\">  border: 1px solid #d3d3d3;</span><br><span class=\"line\">  font-size: 0.93rem;</span><br><span class=\"line\">  line-height: 1.6em;</span><br><span class=\"line\">  word-break: break-all;</span><br><span class=\"line\">  background: rgba(255,255,255,0.4);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.my_post_copyright p&#123;margin:0;&#125;</span><br><span class=\"line\">.my_post_copyright span &#123;</span><br><span class=\"line\">  display: inline-block;</span><br><span class=\"line\">  width: 5.2em;</span><br><span class=\"line\">  color: #b5b5b5;</span><br><span class=\"line\">  font-weight: bold;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.my_post_copyright .raw &#123;</span><br><span class=\"line\">  margin-left: 1em;</span><br><span class=\"line\">  width: 5em;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.my_post_copyright a &#123;</span><br><span class=\"line\">  color: #808080;</span><br><span class=\"line\">  border-bottom:0;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.my_post_copyright a:hover &#123;</span><br><span class=\"line\">  color: #a3d2a3;</span><br><span class=\"line\">  text-decoration: underline;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.my_post_copyright:hover .fa-clipboard &#123;</span><br><span class=\"line\">  color: #000;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.my_post_copyright .post-url:hover &#123;</span><br><span class=\"line\">  font-weight: normal;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.my_post_copyright .copy-path &#123;</span><br><span class=\"line\">  margin-left: 1em;</span><br><span class=\"line\">  width: 1em;</span><br><span class=\"line\">  +mobile()&#123;display:none;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.my_post_copyright .copy-path:hover &#123;</span><br><span class=\"line\">  color: #808080;</span><br><span class=\"line\">  cursor: pointer;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li>修改<code>theme/next/layout/_macro/post.swig</code>文件</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码&#123;#####################&#125;</span><br><span class=\"line\">&#123;### END POST BODY ###&#125;</span><br><span class=\"line\">&#123;#####################&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  # 添加下面这段</span><br><span class=\"line\">&#123;% if not is_index %&#125;</span><br><span class=\"line\">  &#123;% include &#x27;my-copyright.swig&#x27; %&#125;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% if theme.wechat_subscriber.enable and not is_index %&#125;</span><br><span class=\"line\">  &#123;% include &#x27;../_partials/post/wechat-subscriber.swig&#x27; %&#125;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li>修改<code>theme/next/source/css/_common/components/post/post.styl</code>文件，在最后一行新增：<code>@import &quot;my-post-copyright&quot;;</code></li>\n<li>修改<code>Hexo/scaffolds/post.md</code>，默认显示版权信息</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码---</span><br><span class=\"line\">title: &#123;&#123; title &#125;&#125;</span><br><span class=\"line\">date: &#123;&#123; date &#125;&#125;</span><br><span class=\"line\">tags:</span><br><span class=\"line\">categories:</span><br><span class=\"line\">copyright:</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n\n<p>效果如图：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730ba695cf7a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"copyright\"></p>\n<hr>\n<h2 id=\"Livere（来必力）评论区\"><a href=\"#Livere（来必力）评论区\" class=\"headerlink\" title=\"Livere（来必力）评论区\"></a>Livere（来必力）评论区</h2><p>首先，访问<a href=\"https://link.juejin.cn/?target=https://livere.com/insight/myCode\">Livere官网</a>，注册→登录→安装，会得到一个<code>data-id</code>。</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730bbb0dc2f6~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"data-id\"></p>\n<p>将<code>data-id</code>复制粘贴到<code>theme/_config.yaml</code>文件的<code>livere_uid</code>属性即可。效果如图：</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730bcd06c639~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"Livere\"></p>\n<hr>\n<h2 id=\"Live2d-看板娘\"><a href=\"#Live2d-看板娘\" class=\"headerlink\" title=\"Live2d 看板娘\"></a>Live2d 看板娘</h2><ol>\n<li>安装hexo-helper-live2d</li>\n</ol>\n<p>在博客根目录下，执行<code>npm install hexo-helper-live2d --save</code></p>\n<ol>\n<li>修改站点配置文件或主题配置文件</li>\n</ol>\n<p>官方已有的看板娘名称请点<a href=\"https://link.juejin.cn/?target=https://github.com/xiazeyu/live2d-widget-models\">这里</a>查看，部分看板娘的模型预览请看<a href=\"https://link.juejin.cn/?target=https://blog.csdn.net/wang_123_zy/article/details/87181892\">CSDN某博客</a>。<br> 我修改的是站点配置文件<code>Hexo/_config.yaml</code>，添加如下代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">复制代码live2d:</span><br><span class=\"line\">  enable: true</span><br><span class=\"line\">  scriptFrom: local</span><br><span class=\"line\">  pluginRootPath: live2dw/</span><br><span class=\"line\">  pluginJsPath: lib/</span><br><span class=\"line\">  pluginModelPath: assets/</span><br><span class=\"line\">  model:</span><br><span class=\"line\">    # 填写你所需要的看板娘名称</span><br><span class=\"line\">    use: live2d-widget-model-haruto</span><br><span class=\"line\">  display:</span><br><span class=\"line\">    position: right</span><br><span class=\"line\">    width: 150</span><br><span class=\"line\">    height: 300</span><br><span class=\"line\">  mobile:</span><br><span class=\"line\">    show: true</span><br></pre></td></tr></table></figure>\n\n<ol>\n<li>通过npm安装依赖的看板娘文件</li>\n</ol>\n<p><code>npm install live2d-widget-model-name</code>，其中<code>name</code>是你选择的官方看板娘的名字，如我选择的是<code>haruto</code>，则为<code>npm install live2d-widget-model-haruto</code>。<br> 重新运行<code>hexo clean &amp;&amp; hexo d -g</code>则可在主页看到了。</p>\n<p><img src=\"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/30/16b0730bde1a76a1~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.png\" alt=\"haruto\"></p>\n<p><a href=\"https://blog.csdn.net/as480133937/article/details/100138838\">Hexo-Next 主题博客个性化配置超详细，超全面(两万字)-CSDN博客</a></p>\n<p><a href=\"https://blog.csdn.net/CodeJoker_7/article/details/123235591\">next主题侧边目录点击失效无法正常跳转_csdn目录不能跳转-CSDN博客</a></p>\n","categories":["hexo"],"tags":["hexo","主题"]},{"title":"Hexo博客搭建与部署","url":"/2023/11/20/Hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E4%B8%8E%E9%83%A8%E7%BD%B2/","content":"<h3 id=\"Hexo简介\"><a href=\"#Hexo简介\" class=\"headerlink\" title=\"Hexo简介\"></a><a href=\"https://hexo.io/zh-cn/index.html\">Hexo</a>简介</h3><p>Hexo是一款基于<a href=\"https://so.csdn.net/so/search?q=Node&spm=1001.2101.3001.7020\">Node</a>.js的静态博客框架，使用Markdown（或其他渲染引擎）解析文章，依赖少易于安装，可在几秒内利用现有主题生成静态网页。框架提供了很详细的中文文档，大家可以进入<a href=\"https://hexo.io/zh-cn/\">Hexo官网</a>查看。</p>\n<h3 id=\"环境准备\"><a href=\"#环境准备\" class=\"headerlink\" title=\"环境准备\"></a>环境准备</h3><h4 id=\"安装Git\"><a href=\"#安装Git\" class=\"headerlink\" title=\"安装Git\"></a>安装Git</h4><p>Git是一个先进的分布式版本控制工具，可以有效处理不同规模的项目版本管理。这里用于管理你的Hexo文章，将本地的博客上传至<a href=\"https://so.csdn.net/so/search?q=Github&spm=1001.2101.3001.7020\">Github</a>。到Git官网选择合适的版本<a href=\"https://gitforwindows.org/\">下载</a>，安装后会有一个Git Bash的命令行工具，之后用该工具操作Git。</p>\n<p>检查是否安装成功：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git --version</span><br></pre></td></tr></table></figure>\n\n<p>正常显示版本号，无报错即为安装成功。</p>\n<h4 id=\"安装Node-js\"><a href=\"#安装Node-js\" class=\"headerlink\" title=\"安装Node.js\"></a>安装Node.js</h4><p>Hexo基于Node.js，所以需要安装Node.js及npm工具。可进入Node.js中文网<a href=\"http://nodejs.cn/download/\">下载</a>，选择LTS（长期支持版本）即可。</p>\n<p>检查是否安装成功：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"博客本地搭建\"><a href=\"#博客本地搭建\" class=\"headerlink\" title=\"博客本地搭建\"></a>博客本地搭建</h3><h4 id=\"安装Hexo\"><a href=\"#安装Hexo\" class=\"headerlink\" title=\"安装Hexo\"></a>安装Hexo</h4><p>右键打开Git Bash，输入命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br><span class=\"line\"></span><br><span class=\"line\">hexo -v</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"初始化博客\"><a href=\"#初始化博客\" class=\"headerlink\" title=\"初始化博客\"></a>初始化博客</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo init myblog</span><br><span class=\"line\"><span class=\"built_in\">cd</span> myblog</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"博客本地效果\"><a href=\"#博客本地效果\" class=\"headerlink\" title=\"博客本地效果\"></a>博客本地效果</h4><p>Git Bash执行以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo -g</span><br><span class=\"line\">hexo server</span><br></pre></td></tr></table></figure>\n\n<p>启动hexo服务，访问<a href=\"http://localhost:4000/\">http://localhost:4000</a>即可看到生成的博客页面。使用Ctrl+C可关闭本地服务。</p>\n<h3 id=\"博客Github部署\"><a href=\"#博客Github部署\" class=\"headerlink\" title=\"博客Github部署\"></a>博客Github部署</h3><h4 id=\"创建个人仓库\"><a href=\"#创建个人仓库\" class=\"headerlink\" title=\"创建个人仓库\"></a>创建个人仓库</h4><p>这里需要Github账号，如果没有可以去<a href=\"https://github.com/join\">注册</a>一个。</p>\n<p><a href=\"https://github.com/login\">登录</a>Github，新建一个仓库，命名格式为：用户名.github.io。比如，我的用户名是muzihuaner，我的仓库名为muzihuaner.github.io&#96;。注意这里必须按此格式命名，只有这样，之后部署到GitHub pages的时候，才会被识别。</p>\n<p>登录Github，新建一个仓库，命名格式为：用户名.github.io。比如，我的用户名是muzihuaner，我的仓库名为muzihuaner.github.io&#96;。注意这里必须按此格式命名，只有这样，之后部署到GitHub pages的时候，才会被识别。</p>\n<h4 id=\"配置SSH\"><a href=\"#配置SSH\" class=\"headerlink\" title=\"配置SSH\"></a>配置SSH</h4><p>打开Git Bash，输入以下命令，生成本地密钥。这里用户名和邮箱仅作演示，用户名为你Github的用户名，邮箱为你Github的邮箱。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global user.name <span class=\"string\">&quot;shirllyz&quot;</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">&quot;1107995569@qq.com&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>输入以下命令，检查输入是否正确：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config user.name</span><br><span class=\"line\">git config user.email</span><br></pre></td></tr></table></figure>\n\n<p>确认无误后，输入以下命令，创建SSH：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>无脑下一步即可</p>\n<p>此时在用户文件夹下，已经生成了.ssh文件夹，在本地找到这个文件夹。</p>\n<p>id_rsa是你这台电脑的私人秘钥，id_rsa.pub是公共秘钥。把公钥放在GitHub上，当你连接自己的Github账号时，它就会根据公钥匹配你的私钥，当能够相互匹配时，才能够顺利的通过Git上传你的文件到GitHub上。</p>\n<p>在Github的设置中，找到SSH and GPG keys，新建SSH Key，以文本方式打开id_rsa.pub文件，将内容复制到Key，标题随便起，添加Key。</p>\n<p>部署代码到Github<br>打开站点配置文件_config.yml，拉到最底部，找到deploy字段，按如下格式修改其内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"built_in\">type</span>: git</span><br><span class=\"line\">  repository: git@github.com:shirllyz/shirllyz.github.io.git</span><br><span class=\"line\">  branch: main</span><br></pre></td></tr></table></figure>\n\n<p>其中repo字段可在Github获取：</p>\n<p>回到Git Bash，安装deploy-git ，用于使用命令部署到Github。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n\n<p>然后执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo clean\t//可省略</span><br><span class=\"line\">hexo generate</span><br><span class=\"line\">hexo deploy出现下图所示说明部署成功，此时代码已同步至Github。</span><br></pre></td></tr></table></figure>\n\n<p>打开网址<code>shirllyz.github.io</code>就可以看到Hexo博客了。</p>\n<p>常用命令<br>Hexo文档中命令很多，但你并不需要记住每一个。在博客的使用过程中，主要的命令如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">init用于新建网站</span><br><span class=\"line\"></span><br><span class=\"line\">hexo init &lt;folder&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">new用于新建文章或页面</span><br><span class=\"line\"></span><br><span class=\"line\">hexo new [layout] &lt;title&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">generate用于生成静态页面</span><br><span class=\"line\"></span><br><span class=\"line\">hexo generate</span><br><span class=\"line\">hexo g\t//简写</span><br><span class=\"line\"></span><br><span class=\"line\">deploy用于将内容部署到网站</span><br><span class=\"line\"></span><br><span class=\"line\">hexo deploy</span><br><span class=\"line\">hexo -g</span><br><span class=\"line\"></span><br><span class=\"line\">publish用于将内容从drafts文件夹移动到posts文件夹</span><br><span class=\"line\"></span><br><span class=\"line\">hexo publish [layout] &lt;title&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">server用于启动服务器进行预览，默认情况下，访问入口为http://localhost:4000/</span><br><span class=\"line\"></span><br><span class=\"line\">hexo server</span><br><span class=\"line\">hexo s\t//简写</span><br><span class=\"line\"></span><br><span class=\"line\">实际上，除了第一次部署时，需要用到hexo init这个命令，平时写博客的过程中，最常用的就是：</span><br><span class=\"line\"></span><br><span class=\"line\">hexo n 新建文章/页面</span><br><span class=\"line\"></span><br><span class=\"line\">hexo g 生成静态页面</span><br><span class=\"line\"></span><br><span class=\"line\">hexo s 本地查看内容</span><br><span class=\"line\"></span><br><span class=\"line\">hexo d 部署到Github</span><br></pre></td></tr></table></figure>\n\n\n\n<p>如果需要清除之前生成的内容，可以在生成静态页面前执行hexo clean，其他情况只需要以上四条命令即可。</p>\n<p>之后你就可以使用各种各样的主题啦！详细使用主题的教程，看主题的文档就可以了哦！</p>\n","categories":["hexo"],"tags":["hexo博客","搭建与部署"]},{"title":"MarkDown","url":"/2023/11/22/MarkDown/","content":"<h3 id=\"MarkDown\"><a href=\"#MarkDown\" class=\"headerlink\" title=\"MarkDown\"></a>MarkDown</h3><h4 id=\"标题\"><a href=\"#标题\" class=\"headerlink\" title=\"标题\"></a>标题</h4><h5 id=\"空格-标题名字\"><a href=\"#空格-标题名字\" class=\"headerlink\" title=\"#+空格+标题名字\"></a>#+空格+标题名字</h5><p>一级标题一个#号<br>二级标题两个#号</p>\n<h4 id=\"字体\"><a href=\"#字体\" class=\"headerlink\" title=\"字体\"></a>字体</h4><h5 id=\"粗体\"><a href=\"#粗体\" class=\"headerlink\" title=\"粗体\"></a>粗体</h5><ul>\n<li><strong>字体内容</strong></li>\n</ul>\n<h5 id=\"斜体\"><a href=\"#斜体\" class=\"headerlink\" title=\"斜体\"></a>斜体</h5><ul>\n<li><em>字体内容</em></li>\n</ul>\n<h5 id=\"斜体-粗体\"><a href=\"#斜体-粗体\" class=\"headerlink\" title=\"斜体+粗体\"></a>斜体+粗体</h5><ul>\n<li><em><strong>字体内容</strong></em></li>\n</ul>\n<h5 id=\"删除线\"><a href=\"#删除线\" class=\"headerlink\" title=\"删除线\"></a>删除线</h5><ul>\n<li><del>字体内容</del></li>\n</ul>\n<h4 id=\"引用\"><a href=\"#引用\" class=\"headerlink\" title=\"引用\"></a>引用</h4><h5 id=\"空格-字体内容\"><a href=\"#空格-字体内容\" class=\"headerlink\" title=\"&gt;+空格+字体内容\"></a>&gt;+空格+字体内容</h5><p>引用别人的话</p>\n<h3 id=\"分割线\"><a href=\"#分割线\" class=\"headerlink\" title=\"分割线\"></a>分割线</h3><h5 id=\"—\"><a href=\"#—\" class=\"headerlink\" title=\"—\"></a>—</h5><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"***\"></a>***</h5><h3 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h3><h4 id=\"图片名字-（地址）\"><a href=\"#图片名字-（地址）\" class=\"headerlink\" title=\"![图片名字]（地址）\"></a>![图片名字]（地址）</h4><h3 id=\"超链接\"><a href=\"#超链接\" class=\"headerlink\" title=\"超链接\"></a>超链接</h3><h4 id=\"链接名字-（跳转地址）\"><a href=\"#链接名字-（跳转地址）\" class=\"headerlink\" title=\"[链接名字]（跳转地址）\"></a>[链接名字]（跳转地址）</h4><h3 id=\"列表\"><a href=\"#列表\" class=\"headerlink\" title=\"列表\"></a>列表</h3><h4 id=\"有序列表\"><a href=\"#有序列表\" class=\"headerlink\" title=\"有序列表\"></a>有序列表</h4><ul>\n<li>1，空格</li>\n</ul>\n<h4 id=\"无序列表\"><a href=\"#无序列表\" class=\"headerlink\" title=\"无序列表\"></a>无序列表</h4><ul>\n<li>-空格</li>\n</ul>\n<h3 id=\"表格\"><a href=\"#表格\" class=\"headerlink\" title=\"表格\"></a>表格</h3><h4 id=\"名字-性别-生日\"><a href=\"#名字-性别-生日\" class=\"headerlink\" title=\"名字|性别|生日\"></a>名字|性别|生日</h4><h5 id=\"–-–-–\"><a href=\"#–-–-–\" class=\"headerlink\" title=\"–|–|–|\"></a>–|–|–|</h5><h5 id=\"张三-男-1997\"><a href=\"#张三-男-1997\" class=\"headerlink\" title=\"张三|男|1997\"></a>张三|男|1997</h5><h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><h4 id=\"···（tab上面）\"><a href=\"#···（tab上面）\" class=\"headerlink\" title=\"···（tab上面）\"></a>···（tab上面）</h4>","categories":["markdown"],"tags":["markdown"]},{"title":"一天一个教招-心理学","url":"/2023/11/24/%E4%B8%80%E5%A4%A9%E4%B8%80%E4%B8%AA%E6%95%99%E6%8B%9B-%E5%BF%83%E7%90%86%E5%AD%A6/","content":"","categories":["教招"],"tags":["教招/教编","心理学"]},{"title":"git","url":"/2023/11/22/git/","content":"<h3 id=\"拉取远端代码\"><a href=\"#拉取远端代码\" class=\"headerlink\" title=\"拉取远端代码\"></a>拉取远端代码</h3><p>git pull origin master</p>\n<h3 id=\"仓库中的远程仓库\"><a href=\"#仓库中的远程仓库\" class=\"headerlink\" title=\"仓库中的远程仓库\"></a>仓库中的远程仓库</h3><p>git remote -v</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/shirllyz/imgBlog/2831503-20220906093515510-391251083.png\" alt=\"git\"></p>\n","categories":["git"],"tags":["git"]},{"title":"一天一个教招-教师职业道德","url":"/2023/11/24/%E4%B8%80%E5%A4%A9%E4%B8%80%E4%B8%AA%E6%95%99%E6%8B%9B-%E6%95%99%E5%B8%88%E8%81%8C%E4%B8%9A%E9%81%93%E5%BE%B7/","content":"","categories":["教招"],"tags":["教招/教编","教师职业道德"]},{"title":"一天一个教招-教育学","url":"/2023/11/24/%E4%B8%80%E5%A4%A9%E4%B8%80%E4%B8%AA%E6%95%99%E6%8B%9B-%E6%95%99%E8%82%B2%E5%AD%A6/","content":"<h2 id=\"第一章-教育于教育学\"><a href=\"#第一章-教育于教育学\" class=\"headerlink\" title=\"第一章:教育于教育学\"></a>第一章:教育于教育学</h2><h3 id=\"第一节-教育的产生和发展\"><a href=\"#第一节-教育的产生和发展\" class=\"headerlink\" title=\"第一节 教育的产生和发展\"></a>第一节 教育的产生和发展</h3><h4 id=\"一-教育的概念、本质\"><a href=\"#一-教育的概念、本质\" class=\"headerlink\" title=\"一:教育的概念、本质\"></a>一:教育的概念、本质</h4><h5 id=\"1-教育的由来\"><a href=\"#1-教育的由来\" class=\"headerlink\" title=\"1). 教育的由来:\"></a>1). 教育的由来:</h5><ul>\n<li>我国,<strong>“教育”一词最早见于《孟子•尽心上》</strong><ul>\n<li>孟子曰:”君子有三乐也,而王天下不与存焉.父母俱存,兄弟无故,一乐也;仰不愧于天,俯不怍于人,二乐也;<strong>得天下英才而教育之,三乐也</strong>.”</li>\n<li><strong>东汉 许慎《说文解字》解释了教育</strong><ul>\n<li>教:上所施,下所效;</li>\n<li>育:养子使作善.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"2-教育的概念\"><a href=\"#2-教育的概念\" class=\"headerlink\" title=\"2).教育的概念:\"></a>2).教育的概念:</h5><ul>\n<li>广义：<strong>社会教育(包括社区教育)、学校教育、家庭教育</strong><ul>\n<li>例如：听君一席话，胜读十年书</li>\n</ul>\n</li>\n<li>狭义：<strong>主要指的是学校教育</strong><ul>\n<li><strong>有目的，有计划，有组织</strong>地对受教育者施加教育影响<ul>\n<li>”有计划“是广义与狭义的主要区别</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>补充：家校合作的方式：互访、家长会、家长委员会、家长学校、家长沙龙</p>\n<p>拓展：</p>\n<p>教育的日常用法：</p>\n<ul>\n<li>作为<strong>过程</strong>的教育：主要是<strong>思想的转变</strong></li>\n</ul>\n<p>​\t\t\t\t\t我从这部电影中收到了深刻的教育</p>\n<ul>\n<li>作为<strong>方法</strong>的教育：<strong>教的方法</strong></li>\n</ul>\n<p>​\t\t\t\t\t\t你的孩子真有出息，你是怎么教育孩子的？</p>\n<ul>\n<li>作为<strong>社会制度</strong>的教育：<strong>社会子系统</strong></li>\n</ul>\n<p>​\t\t\t\t\t\t\t\t教育是振兴地方经济的基础</p>\n<p>​\t\t\t\t\t\t\t\t建国君民，教育为先</p>\n<p><strong>美国教育哲学家谢弗勒</strong>对教育定义的分类:<strong>《教育的语言》</strong></p>\n<ul>\n<li><strong>纲领性是应然</strong>，教育应该是怎么样的</li>\n<li><strong>描述性是实然</strong>，教育实际上是怎么样的，对他进行描述</li>\n<li><strong>规定性</strong>是作家在自己文章中自己对教育下的定义，就是不管别人觉得教育是怎样的，但我觉得教育就是这样的</li>\n</ul>\n","categories":["教招"],"tags":["教招/教编","教育学"]},{"title":"一天一个教招-教育心理学","url":"/2023/11/24/%E4%B8%80%E5%A4%A9%E4%B8%80%E4%B8%AA%E6%95%99%E6%8B%9B-%E6%95%99%E8%82%B2%E5%BF%83%E7%90%86%E5%AD%A6/","content":"","categories":["教招"],"tags":["教招/教编","教育心理学"]},{"title":"一天一个教招-教育政策法规解读","url":"/2023/11/24/%E4%B8%80%E5%A4%A9%E4%B8%80%E4%B8%AA%E6%95%99%E6%8B%9B-%E6%95%99%E8%82%B2%E6%94%BF%E7%AD%96%E6%B3%95%E8%A7%84%E8%A7%A3%E8%AF%BB/","content":"","categories":["教招"],"tags":["教招/教编","教育政策法规解读"]},{"title":"一天一个教招-新课改","url":"/2023/11/24/%E4%B8%80%E5%A4%A9%E4%B8%80%E4%B8%AA%E6%95%99%E6%8B%9B-%E6%96%B0%E8%AF%BE%E6%94%B9/","content":"","categories":["教招"],"tags":["教招/教编","新课程改革"]},{"title":"常用css操作","url":"/2023/11/22/%E5%B8%B8%E7%94%A8css%E6%93%8D%E4%BD%9C/","content":"<h3 id=\"文字图片禁止选中\"><a href=\"#文字图片禁止选中\" class=\"headerlink\" title=\"文字图片禁止选中\"></a>文字图片禁止选中</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 防止文本选中 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.unselectable-text</span> &#123;</span><br><span class=\"line\">  user-select: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">/* 防止图片选中 */</span></span><br><span class=\"line\"><span class=\"selector-class\">.unselectable-image</span> &#123;</span><br><span class=\"line\">  user-drag: none;</span><br><span class=\"line\">  user-select: none;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"截取文字\"><a href=\"#截取文字\" class=\"headerlink\" title=\"截取文字\"></a>截取文字</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    <span class=\"selector-class\">.news-content</span> <span class=\"selector-tag\">p</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">/*background: red;*/</span></span><br><span class=\"line\">        <span class=\"attribute\">display</span>: -webkit-box;</span><br><span class=\"line\">        -webkit-box-orient: vertical;</span><br><span class=\"line\">        <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">        -webkit-line-clamp: <span class=\"number\">2</span>; <span class=\"comment\">/* 指定显示的行数 */</span></span><br><span class=\"line\">        <span class=\"attribute\">text-overflow</span>: ellipsis; <span class=\"comment\">/* 使用省略号表示截取的部分 */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.news-content</span> <span class=\"selector-tag\">h3</span>&#123;</span><br><span class=\"line\">        <span class=\"attribute\">white-space</span>: nowrap; <span class=\"comment\">/* 禁止换行 */</span></span><br><span class=\"line\">        <span class=\"attribute\">overflow</span>: hidden; <span class=\"comment\">/* 隐藏溢出部分 */</span></span><br><span class=\"line\">        <span class=\"attribute\">text-overflow</span>: ellipsis; <span class=\"comment\">/* 使用省略号表示截取的部分 */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"居中\"><a href=\"#居中\" class=\"headerlink\" title=\"居中\"></a>居中</h3><ul>\n<li><strong>1.使用flex布局</strong></li>\n</ul>\n<p>通过给父盒子添加display：flex属性（存在兼容性问题）</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box1</span>&#123;</span><br><span class=\"line\">   <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">   <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">   <span class=\"attribute\">background-color</span>: green;</span><br><span class=\"line\">   <span class=\"attribute\">display</span>: flex;  </span><br><span class=\"line\">   <span class=\"attribute\">justify-content</span>: center;       <span class=\"comment\">/*水平排列居中*/</span></span><br><span class=\"line\">   <span class=\"comment\">/* align-items: center; */</span>     <span class=\"comment\">/*竖直排列居中*/</span> </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.box2</span>&#123;</span><br><span class=\"line\">   <span class=\"attribute\">background-color</span>: pink;</span><br><span class=\"line\">   <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">   <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>2.margin：auto实现</strong></li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">* &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.div1</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* 如果父级有relative,则相对于父级盒子居中） */</span></span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;       </span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">400px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: black;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.div2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: red;</span><br><span class=\"line\">  <span class=\"comment\">/* 水平居中 */</span></span><br><span class=\"line\">  <span class=\"attribute\">margin</span>:  <span class=\"number\">0</span> auto;     </span><br><span class=\"line\">      </span><br><span class=\"line\">  <span class=\"comment\">/* 垂直居中 */</span></span><br><span class=\"line\">  <span class=\"comment\">/* margin: auto; */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>3.通过transform实现</strong></li>\n</ul>\n<p>使用top:50%; left:50%;时，是以盒子的左上角为原点定位，是左上角的原点居中，但是元素本身并不居中。</p>\n<p>transform：translate(-50%，-50%):分别向左向上移动自身长宽的50%，使其位于中心。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">    * &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    <span class=\"selector-class\">.div1</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">top</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">padding</span>: <span class=\"number\">15px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">background-color</span>: powderblue;</span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"attribute\">transform</span>: <span class=\"built_in\">translate</span>(-<span class=\"number\">50%</span>,-<span class=\"number\">50%</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">  </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;div1&quot;</span>&gt;</span></span><br><span class=\"line\">    不知道高度</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>这个方法不需要知道高度，使用的是自身百分比</p>\n<ul>\n<li><strong>4.margin负间距</strong></li>\n</ul>\n<p>该方法高度类似于通过transform实现居中方法，但是需要知道盒子大小，才能进行最后两步的相对移位，transform方法因为使用的是自身百分比，故不须知道具体宽高</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">* &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: yellowgreen;</span><br><span class=\"line\">  <span class=\"attribute\">margin-left</span>: -<span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: -<span class=\"number\">100px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>5.tabel-cell</strong></li>\n</ul>\n<p>利用table-cell来控制垂直居中。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box1</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* display: table-cell; */</span></span><br><span class=\"line\">  <span class=\"comment\">/* vertical-align: middle; */</span></span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">600px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: pink;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.box2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>6.button居中</strong></li>\n</ul>\n<p>利用button做外容器，里边的块元素会自动垂直居中，只需要控制一下水平居中就可以达到效果。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">button</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">400px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: blueviolet;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: burlywood;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"两栏布局（左侧固定宽度为200px，右侧自适应）\"><a href=\"#两栏布局（左侧固定宽度为200px，右侧自适应）\" class=\"headerlink\" title=\"两栏布局（左侧固定宽度为200px，右侧自适应）\"></a>两栏布局（左侧固定宽度为200px，右侧自适应）</h2><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&#x27;wrap&#x27;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&#x27;left&#x27;</span>&gt;</span>左侧固定内容<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&#x27;right&#x27;</span>&gt;</span>右侧自适应<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-使用浮动-float\"><a href=\"#1-使用浮动-float\" class=\"headerlink\" title=\"1.使用浮动-float\"></a>1.使用浮动-float</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">/*清除浏览器默认设置的边距*/</span></span><br><span class=\"line\"> * &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.wrap</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">        <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/*脱离文档流*/</span></span><br><span class=\"line\">   <span class=\"selector-class\">.left</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">float</span>: left;      //左边元素向左浮动</span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">        <span class=\"attribute\">background</span>: pink;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.right</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">        <span class=\"attribute\">background</span>: skyblue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">注：使用`<span class=\"attribute\">float</span>`会使元素脱离文档流，这样会导致两个<span class=\"selector-tag\">div</span>发生重叠，而在`<span class=\"selector-class\">.wrap</span>`中设置`<span class=\"attribute\">overflow</span>: hidden`是为了触发BFC，清除浮动（不会重叠）。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-使用绝对定位-absolute\"><a href=\"#2-使用绝对定位-absolute\" class=\"headerlink\" title=\"2.使用绝对定位-absolute\"></a>2.使用绝对定位-absolute</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*清除浏览器默认设置的边距*/</span></span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.wrap</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*脱离文档流*/</span></span><br><span class=\"line\"><span class=\"selector-class\">.left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;   // 绝对定位</span><br><span class=\"line\">    <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: pink;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.right</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">200px</span>;    // 设置左边距和左边元素等宽</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: skyblue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">注：这个实现方案要注意的是`<span class=\"selector-class\">.right</span>`中设置`<span class=\"attribute\">margin-left</span>: <span class=\"number\">200px</span>`，这里的<span class=\"number\">200px</span>是左边元素的宽。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-使用弹性布局-flex\"><a href=\"#3-使用弹性布局-flex\" class=\"headerlink\" title=\"3.使用弹性布局-flex\"></a>3.使用弹性布局-flex</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*清除浏览器默认设置的边距*/</span></span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.wrap</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: flex;      // 弹性布局 </span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">flex</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">200px</span>;   // 左边元素不扩大不缩小，默认宽度为<span class=\"number\">200px</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: purple;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.right</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">flex</span>: <span class=\"number\">1</span>;          // 右边元素扩大，自动填充过多空间</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: skyblue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">注：`<span class=\"attribute\">flex</span>`属性要在子元素上设置。`<span class=\"attribute\">flex</span>`属性是`<span class=\"attribute\">flex-grow</span>`（增长比例）和`<span class=\"attribute\">flex-shrink</span>`（缩小比例）和`<span class=\"attribute\">flex-basis</span>`（默认大小）的缩写。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-使用表格布局-table\"><a href=\"#4-使用表格布局-table\" class=\"headerlink\" title=\"4.使用表格布局-table\"></a>4.使用表格布局-table</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*清除浏览器默认设置的边距*/</span></span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.wrap</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: table;      // 表格布局</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:table-cell;  //设置这个元素为表单中的单元格</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>： <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: purple;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.right</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:table-cell;  //设置这个元素为表单中的单元格</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: skyblue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">注：表格布局按照我的理解是将父元素设置成一个表格，里面的元素都是一个一个单元格，可以设置几行几列，所以这个方法也可以实现三栏布局（一行三列）；可以设置行高列高。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-使用网格布局-grid\"><a href=\"#5-使用网格布局-grid\" class=\"headerlink\" title=\"5.使用网格布局-grid\"></a>5.使用网格布局-grid</h3><figure class=\"highlight scss\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*清除浏览器默认设置的边距*/</span></span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.wrap</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:grid;   <span class=\"comment\">// 网格布局</span></span><br><span class=\"line\">    <span class=\"attribute\">grid-template-rows</span>: <span class=\"number\">200px</span>;  <span class=\"comment\">// 设置行高</span></span><br><span class=\"line\">    <span class=\"attribute\">grid-template-columns</span>: <span class=\"number\">200px</span> auto;   <span class=\"comment\">// 设置列宽</span></span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: purple;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.right</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: skyblue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">注：`<span class=\"attribute\">grid</span>`布局真的太方便啦！！但是放在这里好像有点大材小用了</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"6-使用calc-函数\"><a href=\"#6-使用calc-函数\" class=\"headerlink\" title=\"6.使用calc()函数\"></a>6.使用calc()函数</h3><figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*清除浏览器默认设置的边距*/</span></span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.wrap</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: purple;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.right</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: skyblue;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"built_in\">calc</span>( <span class=\"number\">100%</span> -<span class=\"number\">200px</span> )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"文字下划线样式\"><a href=\"#文字下划线样式\" class=\"headerlink\" title=\"文字下划线样式\"></a>文字下划线样式</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>css 文字下划线样式<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">width</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">height</span>: <span class=\"number\">400px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">margin</span>:<span class=\"number\">100px</span> auto;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo1</span> <span class=\"selector-tag\">span</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000000</span>;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo2</span> <span class=\"selector-tag\">span</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">border-bottom</span>: <span class=\"number\">5px</span> solid <span class=\"number\">#0081EF</span>;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo3</span> <span class=\"selector-tag\">span</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">border-bottom</span>: <span class=\"number\">2px</span> dashed <span class=\"number\">#000000</span>;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo4</span> <span class=\"selector-tag\">span</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">border-bottom</span>: <span class=\"number\">2px</span> dotted <span class=\"number\">#000000</span>;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.demo5</span> <span class=\"selector-tag\">span</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"attribute\">border-bottom</span>: <span class=\"number\">5px</span> double <span class=\"number\">#000000</span>;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo1&quot;</span>&gt;</span>这是第1段测试文字，<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>HTML中文网<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>！<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo2&quot;</span>&gt;</span>这是第2段测试文字，<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>HTML中文网<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>！<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo3&quot;</span>&gt;</span>这是第3段测试文字，<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>HTML中文网<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>！<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo4&quot;</span>&gt;</span>这是第4段测试文字，<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>HTML中文网<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>！<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;demo5&quot;</span>&gt;</span>这是第5段测试文字，<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>HTML中文网<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>！<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"浏览器地址显示自定义小图标\"><a href=\"#浏览器地址显示自定义小图标\" class=\"headerlink\" title=\"浏览器地址显示自定义小图标\"></a>浏览器地址显示自定义小图标</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">在对应的html页面头部加上代码：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;shortcut icon&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;image/x-icon&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://www.lanjiawang.com/assets/img/favicon.ico&quot;</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;screen&quot;</span> /&gt;</span></span><br><span class=\"line\">完整示例如下：</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;shortcut icon&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;image/x-icon&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://www.lanjiawang.com/assets/img/favicon.ico&quot;</span> <span class=\"attr\">media</span>=<span class=\"string\">&quot;screen&quot;</span> /&gt;</span></span><br><span class=\"line\">     <span class=\"comment\">&lt;!--其他代码&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;/head&gt;</span></span><br></pre></td></tr></table></figure>\n\n","categories":["css"],"tags":["css"]},{"title":"常用js/jq操作","url":"/2023/11/22/%E5%B8%B8%E7%94%A8js-jq%E6%93%8D%E4%BD%9C/","content":"<h3 id=\"input\"><a href=\"#input\" class=\"headerlink\" title=\"input\"></a>input</h3><ul>\n<li>根据name获取值:<code>$(&quot;input[name=&#39;spec_param&#39;]&quot;).val();</code></li>\n</ul>\n<h3 id=\"class\"><a href=\"#class\" class=\"headerlink\" title=\"class\"></a>class</h3><ul>\n<li>根据元素寻找其下子元素的长度:<code>$(&quot;.body-list&quot;).find(&quot;.row-list&quot;).length;</code></li>\n</ul>\n<h3 id=\"click\"><a href=\"#click\" class=\"headerlink\" title=\"click\"></a>click</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&quot;.add-spec&quot;</span>).<span class=\"title function_\">on</span>(<span class=\"string\">&quot;click&quot;</span>,<span class=\"keyword\">function</span>(<span class=\"params\">e</span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(total);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"select\"><a href=\"#select\" class=\"headerlink\" title=\"select\"></a>select</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> options=$(“#select <span class=\"attr\">option</span>:selected”); <span class=\"comment\">//获取选中的项</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">alert</span>(options.<span class=\"title function_\">val</span>()); <span class=\"comment\">//拿到选中项的值</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">alert</span>(options.<span class=\"title function_\">text</span>()); <span class=\"comment\">//拿到选中项的文本</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">alert</span>(options.<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;url&#x27;</span>)); <span class=\"comment\">//拿到选中项的url值</span></span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Javascript中点击事件方法一<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>click<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"keyword\">var</span> btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;btn&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\tbtn.οnclick=<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\t<span class=\"title function_\">alert</span>(<span class=\"string\">&quot;hello world&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Javascript中点击事件方法二<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>click<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"keyword\">var</span> btn = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;btn&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\tbtn.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\t<span class=\"title function_\">alert</span>(<span class=\"string\">&quot;hello wrold&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t&#125;,<span class=\"literal\">false</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Javascript中点击事件方法三<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"keyword\">function</span> <span class=\"title function_\">test</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\t<span class=\"title function_\">alert</span>(<span class=\"string\">&quot;hello world&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">οnclick</span>=<span class=\"string\">&quot;test()&quot;</span>&gt;</span>click<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"JQuery中获取JSON文件中的数据\"><a href=\"#JQuery中获取JSON文件中的数据\" class=\"headerlink\" title=\"JQuery中获取JSON文件中的数据\"></a>JQuery中获取JSON文件中的数据</h3><h4 id=\"1、使用-Ajax-方式获取\"><a href=\"#1、使用-Ajax-方式获取\" class=\"headerlink\" title=\"1、使用 Ajax 方式获取\"></a>1、使用 Ajax 方式获取</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;json/test.json&quot;</span>, <span class=\"keyword\">function</span>(<span class=\"params\">data</span>) &#123;</span><br><span class=\"line\">     <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data.<span class=\"property\">total</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">另一种方式：</span><br><span class=\"line\">$.<span class=\"title function_\">ajax</span>(&#123;</span><br><span class=\"line\">     <span class=\"attr\">type</span>: <span class=\"string\">&quot;get&quot;</span>,</span><br><span class=\"line\">     <span class=\"attr\">url</span>: <span class=\"string\">&quot;json/test.json&quot;</span>,</span><br><span class=\"line\">     <span class=\"attr\">dataType</span>: <span class=\"string\">&quot;json&quot;</span>,</span><br><span class=\"line\">     <span class=\"attr\">async</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">     <span class=\"attr\">success</span>: <span class=\"keyword\">function</span>(<span class=\"params\">data</span>) &#123;</span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data.<span class=\"property\">total</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2、使用-getJSON-方式获取\"><a href=\"#2、使用-getJSON-方式获取\" class=\"headerlink\" title=\"2、使用 getJSON 方式获取\"></a>2、使用 getJSON 方式获取</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.<span class=\"title function_\">getJSON</span>(<span class=\"string\">&quot;json/test.json&quot;</span>, <span class=\"keyword\">function</span>(<span class=\"params\">data</span>)  &#123;</span><br><span class=\"line\">     <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data.<span class=\"property\">total</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n<p>以上方式获取到的数据都是 JSON 格式的数据，无需转换，即可使用</p>\n<h3 id=\"利用百度翻译API翻译整个网站\"><a href=\"#利用百度翻译API翻译整个网站\" class=\"headerlink\" title=\"利用百度翻译API翻译整个网站\"></a>利用百度翻译API翻译整个网站</h3><p>首先,<a href=\"https://fanyi-api.baidu.com/\">百度翻译开放平台 (baidu.com)</a>申请appid和appkey</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;utf-8&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>测试</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>橘子<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>梨<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>测试<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>零食<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>水果<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>上班<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;http://cdn.bootcss.com/crypto-js/3.1.2/rollups/md5.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">        <span class=\"title function_\">transformLanguage</span>(<span class=\"string\">&#x27;jp&#x27;</span>);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">        <span class=\"keyword\">var</span> newLanguage=<span class=\"string\">&#x27;jp&#x27;</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">        <span class=\"keyword\">function</span> <span class=\"title function_\">transformLanguage</span>(<span class=\"params\">newLanguage</span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            <span class=\"comment\">// 获取所有dom元素中文</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            <span class=\"keyword\">let</span> transformStr = <span class=\"string\">&#x27;&#x27;</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            <span class=\"comment\">// 获取所有dom元素</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            <span class=\"keyword\">function</span> <span class=\"title function_\">getChildDom</span>(<span class=\"params\">dom, type, data = &#123;&#125;</span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                <span class=\"keyword\">if</span>(type == <span class=\"string\">&#x27;read&#x27;</span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    [...dom.<span class=\"property\">children</span>].<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">v</span> =&gt;</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"comment\">// 判断中文</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"comment\">// /^[\\u0391-\\uFFE5]+$/</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"keyword\">let</span> re= <span class=\"regexp\">/[\\u4e00-\\u9fa5]/g</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"comment\">// 防止某些标签有内容并且有标签 ，或者有空格 </span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"keyword\">let</span> vHtml = $(v).<span class=\"title function_\">contents</span>().<span class=\"title function_\">filter</span>(<span class=\"keyword\">function</span> (<span class=\"params\">index, content</span>) &#123;<span class=\"keyword\">return</span> content.<span class=\"property\">nodeType</span> === <span class=\"number\">3</span>&#125;).<span class=\"title function_\">text</span>().<span class=\"title function_\">trim</span>();</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"comment\">// 跳过script标签</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"keyword\">if</span> (re.<span class=\"title function_\">test</span>(vHtml) &amp;&amp; v.<span class=\"property\">tagName</span> != <span class=\"string\">&#x27;SCRIPT&#x27;</span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                            transformStr += <span class=\"string\">`<span class=\"subst\">$&#123;vHtml&#125;</span>,`</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"comment\">// 递归获取元素</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"title function_\">getChildDom</span>(v, type, data);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    &#125;)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                &#125;<span class=\"keyword\">else</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    <span class=\"comment\">// console.log(newLanguage)</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    <span class=\"keyword\">let</span> transOld = data.<span class=\"property\">trans_result</span>[<span class=\"number\">0</span>].<span class=\"property\">src</span>.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;,&#x27;</span>);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    <span class=\"keyword\">let</span> transNew;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    <span class=\"keyword\">if</span>(newLanguage==<span class=\"string\">&#x27;jp&#x27;</span>)&#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                         transNew= data.<span class=\"property\">trans_result</span>[<span class=\"number\">0</span>].<span class=\"property\">dst</span>.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;、&#x27;</span>);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    &#125;<span class=\"keyword\">else</span>&#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        transNew = data.<span class=\"property\">trans_result</span>[<span class=\"number\">0</span>].<span class=\"property\">dst</span>.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;,&#x27;</span>);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    </span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    </span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    </span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    [...dom.<span class=\"property\">children</span>].<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">v</span> =&gt;</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"comment\">// 判断中文</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"comment\">// /^[\\u0391-\\uFFE5]+$/</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"keyword\">let</span> re= <span class=\"regexp\">/[\\u4e00-\\u9fa5]/g</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"keyword\">let</span> vHtml = $(v).<span class=\"title function_\">contents</span>().<span class=\"title function_\">filter</span>(<span class=\"keyword\">function</span> (<span class=\"params\">index, content</span>) &#123;<span class=\"keyword\">return</span> content.<span class=\"property\">nodeType</span> === <span class=\"number\">3</span>&#125;).<span class=\"title function_\">text</span>().<span class=\"title function_\">trim</span>();</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"comment\">// 跳过script标签</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"keyword\">if</span> (re.<span class=\"title function_\">test</span>(vHtml) &amp;&amp; v.<span class=\"property\">tagName</span> != <span class=\"string\">&#x27;SCRIPT&#x27;</span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                            <span class=\"comment\">// 防止标签里面还有标签，所以只替换里面的html,使用replace</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                            $(v).<span class=\"title function_\">html</span>(</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                                $(v).<span class=\"title function_\">html</span>().<span class=\"title function_\">replace</span>(</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                                transOld[transOld.<span class=\"title function_\">findIndex</span>(<span class=\"function\"><span class=\"params\">arrList</span> =&gt;</span> arrList == vHtml)]</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                                ,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                                transNew[transOld.<span class=\"title function_\">findIndex</span>(<span class=\"function\"><span class=\"params\">arrList</span> =&gt;</span> arrList == vHtml)]</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                                )</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                            )</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"comment\">// 递归获取元素</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"title function_\">getChildDom</span>(v, type, data);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    &#125;)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            <span class=\"title function_\">getChildDom</span>(<span class=\"variable language_\">document</span>,<span class=\"string\">&#x27;read&#x27;</span>);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            <span class=\"title function_\">getTranslateData</span>();</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            <span class=\"comment\">// 获取翻译</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            <span class=\"keyword\">function</span> <span class=\"title function_\">getTranslateData</span>(<span class=\"params\"></span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                <span class=\"keyword\">let</span> appid = <span class=\"string\">&#x27;20230504001665207&#x27;</span>;   <span class=\"comment\">// 百度翻译API的appid</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                <span class=\"keyword\">let</span> key = <span class=\"string\">&#x27;ACpxP4hjSwO88bJSL0iN&#x27;</span>;   <span class=\"comment\">// 百度翻译API的key</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                <span class=\"keyword\">let</span> salt = (<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>).<span class=\"title function_\">getTime</span>();</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                <span class=\"keyword\">let</span> query = transformStr;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                <span class=\"keyword\">let</span> <span class=\"keyword\">from</span> = <span class=\"string\">&#x27;zh&#x27;</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                <span class=\"keyword\">let</span> to = newLanguage;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                <span class=\"keyword\">let</span> str1 = appid + query + salt + key;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                <span class=\"keyword\">let</span> sign = <span class=\"title class_\">CryptoJS</span>.<span class=\"title class_\">MD5</span>(str1).<span class=\"title function_\">toString</span>();</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                $.<span class=\"title function_\">ajax</span>(&#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    <span class=\"attr\">url</span>: <span class=\"string\">&#x27;http://api.fanyi.baidu.com/api/trans/vip/translate&#x27;</span>,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    <span class=\"attr\">type</span>: <span class=\"string\">&#x27;get&#x27;</span>,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    <span class=\"attr\">dataType</span>: <span class=\"string\">&#x27;jsonp&#x27;</span>,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    <span class=\"attr\">data</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"attr\">q</span>: query,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"attr\">appid</span>: appid,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"attr\">salt</span>: salt,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"attr\">from</span>: <span class=\"keyword\">from</span>,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"attr\">to</span>: to,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"attr\">sign</span>: sign</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    &#125;,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    <span class=\"attr\">success</span>: <span class=\"keyword\">function</span>(<span class=\"params\">data</span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        data.<span class=\"property\">trans_result</span> &amp;&amp; <span class=\"title function_\">getChildDom</span>(<span class=\"variable language_\">document</span>,<span class=\"string\">&#x27;write&#x27;</span>,data);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                    &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">                &#125;);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">            &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">        &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>就可以翻译了</p>\n<p>在此期间遇到两个问题:</p>\n<p>1：翻译日语的时候会在页面上显示undefined,是因为日语的翻译后语言是以、分隔的,所以在处理日语的时候需要按照语言判断</p>\n<p>2：在方法的方法里面访问外部变量会找不到变量，解决，把变量变成全局变量</p>\n<h3 id=\"添加HTML代码\"><a href=\"#添加HTML代码\" class=\"headerlink\" title=\"添加HTML代码\"></a>添加HTML代码</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&quot;.demo&quot;</span>).<span class=\"title function_\">html</span>(<span class=\"string\">&quot;&lt;span&gt;&lt;/span&gt;&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> $span=$(<span class=\"string\">&quot;&lt;span&gt;&lt;/span&gt;&quot;</span>);</span><br><span class=\"line\">$(<span class=\"string\">&quot;.demo&quot;</span>).<span class=\"title function_\">append</span>($span);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ajax封装\"><a href=\"#ajax封装\" class=\"headerlink\" title=\"ajax封装\"></a>ajax封装</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//页面加载所要进行的操作</span></span><br><span class=\"line\">$(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//设置ajax当前状态(是否可以发送);</span></span><br><span class=\"line\">    ajaxStatus = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ajax封装</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ajax</span>(<span class=\"params\">url, data, success, cache, alone, <span class=\"keyword\">async</span>, type, dataType, error</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> type = type || <span class=\"string\">&#x27;post&#x27;</span>;<span class=\"comment\">//请求类型</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> dataType = dataType || <span class=\"string\">&#x27;json&#x27;</span>;<span class=\"comment\">//接收数据类型</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"keyword\">async</span> = <span class=\"keyword\">async</span> || <span class=\"literal\">true</span>;<span class=\"comment\">//异步请求</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> alone = alone || <span class=\"literal\">false</span>;<span class=\"comment\">//独立提交（一次有效的提交）</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> cache = cache || <span class=\"literal\">false</span>;<span class=\"comment\">//浏览器历史缓存</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> success = success || <span class=\"keyword\">function</span> (<span class=\"params\">data</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">/*console.log(&#x27;请求成功&#x27;);*/</span></span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">                layer.<span class=\"title function_\">msg</span>(data.<span class=\"property\">msg</span>);<span class=\"comment\">//通过layer插件来进行提示信息</span></span><br><span class=\"line\">            &#125;,<span class=\"number\">500</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(data.<span class=\"property\">status</span>)&#123;<span class=\"comment\">//服务器处理成功</span></span><br><span class=\"line\">                <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(data.<span class=\"property\">url</span>)&#123;</span><br><span class=\"line\">                        location.<span class=\"title function_\">replace</span>(data.<span class=\"property\">url</span>);</span><br><span class=\"line\">                    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                        location.<span class=\"title function_\">reload</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,<span class=\"number\">1500</span>);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;<span class=\"comment\">//服务器处理失败</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(alone)&#123;<span class=\"comment\">//改变ajax提交状态</span></span><br><span class=\"line\">                    ajaxStatus = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> error = error || <span class=\"keyword\">function</span> (<span class=\"params\">data</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">/*console.error(&#x27;请求成功失败&#x27;);*/</span></span><br><span class=\"line\">            <span class=\"comment\">/*data.status;//错误状态吗*/</span></span><br><span class=\"line\">            layer.<span class=\"title function_\">closeAll</span>(<span class=\"string\">&#x27;loading&#x27;</span>);</span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(data.<span class=\"property\">status</span> == <span class=\"number\">404</span>)&#123;</span><br><span class=\"line\">                    layer.<span class=\"title function_\">msg</span>(<span class=\"string\">&#x27;请求失败，请求未找到&#x27;</span>);</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(data.<span class=\"property\">status</span> == <span class=\"number\">503</span>)&#123;</span><br><span class=\"line\">                    layer.<span class=\"title function_\">msg</span>(<span class=\"string\">&#x27;请求失败，服务器内部错误&#x27;</span>);</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    layer.<span class=\"title function_\">msg</span>(<span class=\"string\">&#x27;请求失败,网络连接超时&#x27;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                ajaxStatus = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            &#125;,<span class=\"number\">500</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    <span class=\"comment\">/*判断是否可以发送请求*/</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!ajaxStatus)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ajaxStatus = <span class=\"literal\">false</span>;<span class=\"comment\">//禁用ajax请求</span></span><br><span class=\"line\">    <span class=\"comment\">/*正常情况下1秒后可以再次多个异步请求，为true时只可以有一次有效请求（例如添加数据）*/</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!alone)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">            ajaxStatus = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;,<span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    $.<span class=\"title function_\">ajax</span>(&#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;url&#x27;</span>: url,</span><br><span class=\"line\">        <span class=\"string\">&#x27;data&#x27;</span>: data,</span><br><span class=\"line\">        <span class=\"string\">&#x27;type&#x27;</span>: type,</span><br><span class=\"line\">        <span class=\"string\">&#x27;dataType&#x27;</span>: dataType,</span><br><span class=\"line\">        <span class=\"string\">&#x27;async&#x27;</span>: <span class=\"keyword\">async</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;success&#x27;</span>: success,</span><br><span class=\"line\">        <span class=\"string\">&#x27;error&#x27;</span>: error,</span><br><span class=\"line\">        <span class=\"string\">&#x27;jsonpCallback&#x27;</span>: <span class=\"string\">&#x27;jsonp&#x27;</span> + (<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()).<span class=\"title function_\">valueOf</span>().<span class=\"title function_\">toString</span>().<span class=\"title function_\">substr</span>(-<span class=\"number\">4</span>),</span><br><span class=\"line\">        <span class=\"string\">&#x27;beforeSend&#x27;</span>: <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">            layer.<span class=\"title function_\">msg</span>(<span class=\"string\">&#x27;加载中&#x27;</span>, &#123;通过layer插件来进行提示正在加载</span><br><span class=\"line\">                <span class=\"attr\">icon</span>: <span class=\"number\">16</span>,</span><br><span class=\"line\">                <span class=\"attr\">shade</span>: <span class=\"number\">0.01</span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// submitAjax(post方式提交)</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">submitAjax</span>(<span class=\"params\">form, success, cache, alone</span>) &#123;</span><br><span class=\"line\">    cache = cache || <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> form = $(form);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> url = form.<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;action&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> data = form.<span class=\"title function_\">serialize</span>();</span><br><span class=\"line\">    <span class=\"title function_\">ajax</span>(url, data, success, cache, alone, <span class=\"literal\">false</span>, <span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;json&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ajax提交(post方式提交)</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">post</span>(<span class=\"params\">url, data, success, cache, alone</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">ajax</span>(url, data, success, cache, alone, <span class=\"literal\">false</span>, <span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;json&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ajax提交(get方式提交)</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">get</span>(<span class=\"params\">url, success, cache, alone</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">ajax</span>(url, &#123;&#125;, success, alone, <span class=\"literal\">false</span>, <span class=\"string\">&#x27;get&#x27;</span>,<span class=\"string\">&#x27;json&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// jsonp跨域请求(get方式提交)</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">jsonp</span>(<span class=\"params\">url, success, cache, alone</span>) &#123;</span><br><span class=\"line\">    <span class=\"title function_\">ajax</span>(url, &#123;&#125;, success, cache, alone, <span class=\"literal\">false</span>, <span class=\"string\">&#x27;get&#x27;</span>,<span class=\"string\">&#x27;jsonp&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*//调用实例</span></span><br><span class=\"line\"><span class=\"comment\">$(function () &#123;</span></span><br><span class=\"line\"><span class=\"comment\">    $(&#x27;#form-login&#x27;).submit(function () &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        submitAjax(&#x27;#form-login&#x27;);</span></span><br><span class=\"line\"><span class=\"comment\">        return false;</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;);</span></span><br><span class=\"line\"><span class=\"comment\">&#125;);*/</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"遍历数组-对象的几种方式\"><a href=\"#遍历数组-对象的几种方式\" class=\"headerlink\" title=\"遍历数组&#x2F;对象的几种方式\"></a>遍历数组&#x2F;对象的几种方式</h3><p>常用的方法：<code>for、for in、for of（es6语法）、forEach、map、filter、$.each、$.map</code></p>\n<ul>\n<li><p>只能遍历数组：<code>for、forEach、map、filter（map和filter会返回一个新数组）</code></p>\n</li>\n<li><p>可以遍历数组和非数组对象：<code>for in、for of（es6语法-只能遍历部署了 Iterator 接口的对象）、$.each、$.map</code></p>\n</li>\n</ul>\n<p><strong>注：</strong>默认遍历后都不会改变原数组，除非手动在遍历内容体中去改变原数组。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 声明几个需要用到的变量</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">78</span>, <span class=\"number\">90</span>, <span class=\"string\">&quot;hello&quot;</span>, <span class=\"number\">22</span>], results = [];</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"1、-使用for循环遍历\"><a href=\"#1、-使用for循环遍历\" class=\"headerlink\" title=\"1、 使用for循环遍历\"></a>1、 使用for循环遍历</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i, len = arr.<span class=\"property\">length</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;for=&gt;index=&quot;</span> + i + <span class=\"string\">&quot;/value=&quot;</span> + arr[i]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><em>注：用for循环遍历，使用临时变量，将长度缓存起来，避免重复获取数组长度，提高效率</em></p>\n<h4 id=\"2、使用for-in循环遍历\"><a href=\"#2、使用for-in循环遍历\" class=\"headerlink\" title=\"2、使用for in循环遍历\"></a>2、使用for in循环遍历</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> arr) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;for in=&gt;index=&quot;</span> + i + <span class=\"string\">&quot;/value=&quot;</span> + arr[i]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><em>注：据说这个效率是循环遍历中效率最低的</em></p>\n<h4 id=\"3、使用for-of循环遍历-es6语法\"><a href=\"#3、使用for-of循环遍历-es6语法\" class=\"headerlink\" title=\"3、使用for of循环遍历[es6语法]\"></a>3、使用for of循环遍历[es6语法]</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> value <span class=\"keyword\">of</span> arr) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;for of=&gt;value=&quot;</span> + value);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><em>注：性能优于for in，value代表的是属性值</em></p>\n<h4 id=\"4、使用forEach遍历\"><a href=\"#4、使用forEach遍历\" class=\"headerlink\" title=\"4、使用forEach遍历\"></a>4、使用forEach遍历</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">results = arr.<span class=\"title function_\">forEach</span>(<span class=\"keyword\">function</span> (<span class=\"params\">value, index, array</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;forEach=&gt;&quot;</span> + index + <span class=\"string\">&quot;: &quot;</span> + value + <span class=\"string\">&quot;/&quot;</span> + array[index]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> value; </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;forEach=&gt;results=&quot;</span> + results);  <span class=\"comment\">// =&gt;undefined</span></span><br></pre></td></tr></table></figure>\n\n<p><em>其中value参数是必须的，代表当前元素的值。forEach返回值为undefined</em></p>\n<h4 id=\"5、使用map遍历\"><a href=\"#5、使用map遍历\" class=\"headerlink\" title=\"5、使用map遍历\"></a>5、使用map遍历</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">results = arr.<span class=\"title function_\">map</span>(<span class=\"keyword\">function</span> (<span class=\"params\">value, index, array</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;map=&gt;&quot;</span> + index + <span class=\"string\">&quot;: &quot;</span> + value + <span class=\"string\">&quot;/&quot;</span> + array[index]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> value + index;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;map=&gt;results=&quot;</span> + results); <span class=\"comment\">// =&gt;1,79,92,hello3,26</span></span><br></pre></td></tr></table></figure>\n\n<p><em>（1）：其中value参数是必须的，代表当前元素的值<br> （2）：map返回一个新数组，数组中的元素为原始数组元素调用函数处理后的值，不会改变原数组，</em><strong>返回值是什么就是什么，如果不做其它处理的新数组长度和原始数组长度相等</strong>*</p>\n<h4 id=\"6、使用filter遍历\"><a href=\"#6、使用filter遍历\" class=\"headerlink\" title=\"6、使用filter遍历\"></a>6、使用filter遍历</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">results = arr.<span class=\"title function_\">filter</span>(<span class=\"keyword\">function</span> (<span class=\"params\">value, index, array</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;filter=&gt;&quot;</span> + index + <span class=\"string\">&quot;: &quot;</span> + value + <span class=\"string\">&quot;/&quot;</span> + array[index]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">isNaN</span>(value) ? <span class=\"string\">&quot;&quot;</span> : value;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;filter=&gt;results=&quot;</span> + results); <span class=\"comment\">// =&gt;1,78,90,22</span></span><br></pre></td></tr></table></figure>\n\n<p><em>（1）：其中value参数是必须的，代表当前元素的值<br> （2）：使用filter方法创建一个新的数组，新数组中的元素是通过检查指定数组中符合条件的所有元素，不会改变原数组，</em><strong>返回值如果是false类型的即删除该元素</strong><br> （3）：jquery的方法filter只是对jQuery对象进行一个过滤，筛选出与指定表达式匹配的元素集合。如：<code>$(&quot;p&quot;).filter(&quot;.selected&quot;); // 保留带有select类的p元素</code>*</p>\n<h4 id=\"7、使用jQuery核心方法-each遍历数组\"><a href=\"#7、使用jQuery核心方法-each遍历数组\" class=\"headerlink\" title=\"7、使用jQuery核心方法$.each遍历数组\"></a><strong>7</strong>、<strong>使用jQuery核心方法<code>$.each</code>遍历数组</strong></h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"> $.<span class=\"title function_\">each</span>(arr, <span class=\"keyword\">function</span> (<span class=\"params\">index, value</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;$.each=&gt;index=&quot;</span> + index + <span class=\"string\">&quot;/value=&quot;</span> + value);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><em>注：该方法也可以用来操作jQuery对象，如：<code>$(&quot;div&quot;).each(callback)</code> &#x2F;&#x2F; 对匹配到的div元素执行相关操作</em></p>\n<h4 id=\"8、使用jQuery核心方法-map遍历数组\"><a href=\"#8、使用jQuery核心方法-map遍历数组\" class=\"headerlink\" title=\"8、使用jQuery核心方法$.map遍历数组\"></a>8、使用jQuery核心方法<code>$.map</code>遍历数组</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">results = $.<span class=\"title function_\">map</span>(arr, <span class=\"keyword\">function</span> (<span class=\"params\">value, index</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;$.each=&gt;index=&quot;</span> + index + <span class=\"string\">&quot;/value=&quot;</span> + value);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">isNaN</span>(value) ? <span class=\"literal\">null</span> : value;</span><br><span class=\"line\">   <span class=\"comment\">// 返回null（删除数组中的项目），不能返回&quot;&quot;，只是将对应的数组元素置为长度为0的字符串</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr + <span class=\"string\">&quot;=======&quot;</span> + results); <span class=\"comment\">// 1,78,90,hello,22=======1,78,90,22</span></span><br></pre></td></tr></table></figure>\n\n<p><em>该方法也可以用来操作jQuery对象，如：</em></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&quot;p&quot;</span>).<span class=\"title function_\">append</span>( $(<span class=\"string\">&quot;input&quot;</span>).<span class=\"title function_\">map</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> $(<span class=\"variable language_\">this</span>).<span class=\"title function_\">val</span>();</span><br><span class=\"line\"> &#125;).<span class=\"title function_\">get</span>().<span class=\"title function_\">join</span>(<span class=\"string\">&quot;, &quot;</span>) );</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"追加元素\"><a href=\"#追加元素\" class=\"headerlink\" title=\"追加元素\"></a>追加元素</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">01、html()</span><br><span class=\"line\">html() 函数的作用原理是先移除匹配元素内部的html代码，然后将新的html添加到匹配元素</span><br><span class=\"line\"></span><br><span class=\"line\">设置内容</span><br><span class=\"line\"></span><br><span class=\"line\">当使用该方法返回一个值时，它会返回第一个匹配元素的内容</span><br><span class=\"line\"></span><br><span class=\"line\">语法： $(selector).html();</span><br><span class=\"line\"></span><br><span class=\"line\">示例：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Hello World<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">    $(<span class=\"string\">&quot;p&quot;</span>).<span class=\"title function_\">html</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">设置元素内容</span><br><span class=\"line\"></span><br><span class=\"line\">当使用该方法设置一个值时，它会覆盖所有匹配元素的内容。</span><br><span class=\"line\"></span><br><span class=\"line\">语法：$(selector).html(content)</span><br><span class=\"line\"></span><br><span class=\"line\">示例：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Hello World<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">    $(<span class=\"string\">&quot;p&quot;</span>).<span class=\"title function_\">html</span>(<span class=\"title class_\">Hello</span> <span class=\"title class_\">World</span> <span class=\"number\">2</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">02、prepend()</span><br><span class=\"line\">prepend() 方法向匹配元素集合中的每个元素开头插入由参数指定的内容</span><br><span class=\"line\"></span><br><span class=\"line\">语法：$(selector).prepend(content)</span><br><span class=\"line\"></span><br><span class=\"line\">示例：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Hello World<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">  $(<span class=\"string\">&quot;p&quot;</span>).<span class=\"title function_\">prepend</span>(<span class=\"string\">&quot;&lt;b&gt;Say:&lt;/b&gt;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">03、prependTo()</span><br><span class=\"line\">prependTo() 方法向目标结尾插入匹配元素集合中的每个元素</span><br><span class=\"line\"></span><br><span class=\"line\">语法：$(content).prependTo(selector)</span><br><span class=\"line\"></span><br><span class=\"line\">示例：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Hello World<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">  $(<span class=\"string\">&quot;&lt;b&gt;Say:&lt;/b&gt;&quot;</span>).<span class=\"title function_\">prependTo</span>(<span class=\"string\">&quot;p&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">prependTo() 实际上就是颠倒的 prepend() 方法</span><br><span class=\"line\"></span><br><span class=\"line\">提示：prepend()和 prependTo() 方法作用相同。差异在于语法：内容和选择器的位置不同</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">04、append()</span><br><span class=\"line\">append() 方法向匹配元素集合中的每个元素结尾插入由参数指定的内容</span><br><span class=\"line\"></span><br><span class=\"line\">语法：$(selector).append(content)</span><br><span class=\"line\"></span><br><span class=\"line\">示例：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Say<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">  $(<span class=\"string\">&quot;p&quot;</span>).<span class=\"title function_\">append</span>(<span class=\"string\">&quot;&lt;b&gt;:Hello World&lt;/b&gt;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">05、appendTo()</span><br><span class=\"line\">appendTo() 方法向目标结尾插入匹配元素集合中的每个元素</span><br><span class=\"line\"></span><br><span class=\"line\">语法：$(content).appendTo(selector)</span><br><span class=\"line\"></span><br><span class=\"line\">示例：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Say<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">  $(<span class=\"string\">&quot;&lt;b&gt;:Hello World&lt;/b&gt;&quot;</span>).<span class=\"title function_\">prependTo</span>(<span class=\"string\">&quot;p&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">提示：append() 和appendTo () 方法执行的任务相同。不同之处在于：内容的位置和选择器</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">06、before()</span><br><span class=\"line\">before() 方法在每个匹配的元素之前插入内容</span><br><span class=\"line\"></span><br><span class=\"line\">语法：$(selector).before(content)</span><br><span class=\"line\"></span><br><span class=\"line\">示例:</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Say:Hello World 2<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-handlebars\"><span class=\"language-xml\"> </span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\">  $(&quot;p&quot;).before(&quot;<span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span>Say:Hello world 1<span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span>&quot;);</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\"></span></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">07、insertBefore()</span><br><span class=\"line\">insertBefore() 把匹配的元素插入到另一个指定的元素集合的前面</span><br><span class=\"line\"></span><br><span class=\"line\">语法：$(content).insertBefore(selector)</span><br><span class=\"line\"></span><br><span class=\"line\">示例:</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Hello World 2<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-handlebars\"><span class=\"language-xml\"> </span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\">  $(&quot;<span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span>Say:Hello world 1<span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>&quot;).insertBefore(&quot;p&quot;);</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"language-handlebars\"></span></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">注释：如果该方法用于已有元素，这些元素会被从当前位置移走，然后被添加到被选元素之前。</span><br><span class=\"line\"></span><br><span class=\"line\">插入已有元素示例：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Hello World<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello World 666<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">  $(<span class=\"string\">&quot;h1&quot;</span>).<span class=\"title function_\">insertBefore</span>(<span class=\"string\">&quot;p&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">08、after()</span><br><span class=\"line\">after() 在匹配的元素之后插入内容</span><br><span class=\"line\"></span><br><span class=\"line\">语法：$(selector).after(content)</span><br><span class=\"line\"></span><br><span class=\"line\">示例:</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Hello World<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">  $(<span class=\"string\">&quot;p&quot;</span>).<span class=\"title function_\">after</span>(<span class=\"string\">&quot;&lt;h1&gt;Hello World 666&lt;/h1&gt;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">09、insertAfter()</span><br><span class=\"line\">insertAfter() 方法在被选元素之后插入 HTML 标记或已有的元素</span><br><span class=\"line\"></span><br><span class=\"line\">语法：$(content).insertAfter(selector)</span><br><span class=\"line\"></span><br><span class=\"line\">示例</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Hello World<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">  $(<span class=\"string\">&quot;&lt;h1&gt;Hello World 666&lt;/h1&gt;&quot;</span>).<span class=\"title function_\">insertAfter</span>(<span class=\"string\">&quot;p&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">注释：如果该方法用于已有元素，这些元素会被从当前位置移走，然后被添加到被选元素之后。</span><br><span class=\"line\"></span><br><span class=\"line\">插入已有元素示例：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Hello World<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Hello World 666<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\">  $(<span class=\"string\">&quot;h1&quot;</span>).<span class=\"title function_\">insertAfter</span>(<span class=\"string\">&quot;p&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">总结：</span><br><span class=\"line\"></span><br><span class=\"line\">prepend() 、prependTo() 、append() 、appendTo() 为元素内部插入html</span><br><span class=\"line\"></span><br><span class=\"line\">before() 、insertBefore() 、after() 、insertAfter()为元素外部插入html</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"动态append添加元素后点击事件失效\"><a href=\"#动态append添加元素后点击事件失效\" class=\"headerlink\" title=\"动态append添加元素后点击事件失效\"></a>动态append添加元素后点击事件失效</h3><ol>\n<li>问题描述：在div中动态添加span元素，之后执行</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(selector).<span class=\"title function_\">click</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;<span class=\"keyword\">var</span> param = $(<span class=\"variable language_\">this</span>).<span class=\"title function_\">text</span>();&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>无法触发事件。</p>\n<ol start=\"2\">\n<li><p>原因：append中的节点是在整个文档加载完之后开始添加，页面不会为append的元素初始化添加点击事件，故使用这种方式动态添加的节点中的click事件没有生效。</p>\n</li>\n<li><p>解决方案：事件委托方式解决，将指定的事件绑定在document上，只要append元素符合指定的元素，就会绑定此事件 。$(document).on(“click”,”指定的元素”,function(){});<br>最后实现代码</p>\n</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"variable language_\">document</span>).<span class=\"title function_\">on</span>(<span class=\"string\">&quot;click&quot;</span>, selector, <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> param = $(<span class=\"variable language_\">this</span>).<span class=\"title function_\">text</span>();</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"获取父级元素用parent\"><a href=\"#获取父级元素用parent\" class=\"headerlink\" title=\"获取父级元素用parent()\"></a>获取父级元素用parent()</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"variable language_\">this</span>).<span class=\"title function_\">parent</span>(<span class=\"string\">&#x27;ul&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"获取同级元素用siblings\"><a href=\"#获取同级元素用siblings\" class=\"headerlink\" title=\"获取同级元素用siblings()\"></a>获取同级元素用siblings()</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"variable language_\">this</span>).<span class=\"title function_\">parent</span>(<span class=\"string\">&#x27;ul&#x27;</span>).<span class=\"title function_\">siblings</span>();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"获取子元素用find\"><a href=\"#获取子元素用find\" class=\"headerlink\" title=\"获取子元素用find()\"></a>获取子元素用find()</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"variable language_\">this</span>).<span class=\"title function_\">parent</span>(<span class=\"string\">&#x27;ul&#x27;</span>).<span class=\"title function_\">siblings</span>().<span class=\"title function_\">find</span>(<span class=\"string\">&#x27;li&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"jquery获取第几个元素的方法总结\"><a href=\"#jquery获取第几个元素的方法总结\" class=\"headerlink\" title=\"jquery获取第几个元素的方法总结\"></a>jquery获取第几个元素的方法总结</h3><p> 　使用jquery时经常会遇到，选择器选择一组元素后，需要在这组元素中找到第几个元素。</p>\n<p>　　jquery中使用eq()方法找到第几个元素或第N个元素，jquery中eq()的使用如下：</p>\n<p>　　eq() 选择器选取带有指定 index 值的元素。</p>\n<p>　　index 值从 0 开始，所有第一个元素的 index 值是 0(不是 1)。</p>\n<p>　　经常与其他元素&#x2F;选择器一起使用，来选择指定的组中特定序号的元素。</p>\n<p>　　例子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&#x27;#test&#x27;</span>).<span class=\"title function_\">children</span>().<span class=\"title function_\">eq</span>(<span class=\"number\">1</span>).<span class=\"title function_\">css</span>(&#123;<span class=\"string\">&#x27;display&#x27;</span>:<span class=\"string\">&#x27;inline-block&#x27;</span>&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>　　</p>\n<p>　　将id为test的元素的第二个子元素样式设置为’display’:’inline-block’。</p>\n<p>　　另一种写法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(<span class=\"string\">&quot;:eq(index)&quot;</span>)</span><br><span class=\"line\">如：$(<span class=\"string\">&quot;p:eq(1)&quot;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>　　</p>\n<p>　　附另一种办法的例子</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&quot;/jquery-latest.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">$(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"> $(<span class=\"string\">&#x27;a&#x27;</span>).<span class=\"title function_\">each</span>(<span class=\"keyword\">function</span>(<span class=\"params\">i</span>)&#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  <span class=\"variable language_\">this</span>.<span class=\"property\">onclick</span>=<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">   <span class=\"title function_\">alert</span>(i);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">   <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  &#125;;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"> &#125;);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">&#125;);</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>百度<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>google<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://www.111cn.net&quot;</span>&gt;</span>msn<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>qq<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>　　</p>\n<p>　　或者这样写</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&quot;jquery-1.1.3.1.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    $(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">      $(<span class=\"string\">&quot;a&quot;</span>).<span class=\"title function_\">bind</span>(<span class=\"string\">&quot;click&quot;</span>,<span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">      &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">        <span class=\"title function_\">alert</span>($(<span class=\"string\">&quot;a&quot;</span>).<span class=\"title function_\">index</span>(<span class=\"variable language_\">this</span>));</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">      &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">      )</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    )</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>　　</p>\n<p>　　效果是一样的哦。</p>\n<h3 id=\"JS，JQ输入框oninput事件1秒后请求接口\"><a href=\"#JS，JQ输入框oninput事件1秒后请求接口\" class=\"headerlink\" title=\"JS，JQ输入框oninput事件1秒后请求接口\"></a>JS，JQ输入框oninput事件1秒后请求接口</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> searchTimer = <span class=\"literal\">null</span>; <span class=\"comment\">//全局定时器</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$ele</span>.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;input&#x27;</span>, <span class=\"string\">&#x27;.search input&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">clearTimeout</span>(searchTimer); <span class=\"comment\">//输入清除定时器</span></span><br><span class=\"line\">  searchTimer = <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123; </span><br><span class=\"line\">  <span class=\"title function_\">fn</span>(); <span class=\"comment\">//接口请求函数</span></span><br><span class=\"line\">  &#125;,<span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"加减乘除运算时会出现精度损失\"><a href=\"#加减乘除运算时会出现精度损失\" class=\"headerlink\" title=\"加减乘除运算时会出现精度损失\"></a>加减乘除运算时会出现精度损失</h3><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  加法运算，避免数据相加小数点后产生多位数和计算精度损失。</span></span><br><span class=\"line\"><span class=\"comment\">  <span class=\"doctag\">@param</span> num1加数1 | num2加数2</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">numAdd</span>(<span class=\"params\">num1, num2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> baseNum, baseNum1, baseNum2;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      baseNum1 = num1.<span class=\"title function_\">toString</span>().<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">length</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">      baseNum1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      baseNum2 = num2.<span class=\"title function_\">toString</span>().<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">length</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">      baseNum2 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    baseNum = <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(<span class=\"number\">10</span>, <span class=\"title class_\">Math</span>.<span class=\"title function_\">max</span>(baseNum1, baseNum2));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (num1 * baseNum + num2 * baseNum) / baseNum;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  减法运算，避免数据相减小数点后产生多位数和计算精度损失。</span></span><br><span class=\"line\"><span class=\"comment\">  @param num1被减数 | num2减数</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">numSub</span>(<span class=\"params\">num1, num2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> baseNum, baseNum1, baseNum2;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> precision;<span class=\"comment\">// 精度</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      baseNum1 = num1.<span class=\"title function_\">toString</span>().<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">length</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">      baseNum1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      baseNum2 = num2.<span class=\"title function_\">toString</span>().<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">length</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">      baseNum2 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    baseNum = <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(<span class=\"number\">10</span>, <span class=\"title class_\">Math</span>.<span class=\"title function_\">max</span>(baseNum1, baseNum2));</span><br><span class=\"line\">    precision = (baseNum1 &gt;= baseNum2) ? baseNum1 : baseNum2;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ((num1 * baseNum - num2 * baseNum) / baseNum).<span class=\"title function_\">toFixed</span>(precision);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  乘法运算，避免数据相乘小数点后产生多位数和计算精度损失。</span></span><br><span class=\"line\"><span class=\"comment\">  @param num1被乘数 | num2乘数</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">numMulti</span>(<span class=\"params\">num1, num2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> baseNum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      baseNum += num1.<span class=\"title function_\">toString</span>().<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">length</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      baseNum += num2.<span class=\"title function_\">toString</span>().<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">length</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title class_\">Number</span>(num1.<span class=\"title function_\">toString</span>().<span class=\"title function_\">replace</span>(<span class=\"string\">&quot;.&quot;</span>, “”)) * <span class=\"title class_\">Number</span>(num2.<span class=\"title function_\">toString</span>().<span class=\"title function_\">replace</span>(<span class=\"string\">&quot;.&quot;</span>, “”)) / <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(<span class=\"number\">10</span>, baseNum);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  除法运算，避免数据相除小数点后产生多位数和计算精度损失。</span></span><br><span class=\"line\"><span class=\"comment\">  @param num1被除数 | num2除数</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">numDiv</span>(<span class=\"params\">num1, num2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> baseNum1 = <span class=\"number\">0</span>, baseNum2 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> baseNum3, baseNum4;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      baseNum1 = num1.<span class=\"title function_\">toString</span>().<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">length</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">      baseNum1 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      baseNum2 = num2.<span class=\"title function_\">toString</span>().<span class=\"title function_\">split</span>(<span class=\"string\">&quot;.&quot;</span>)[<span class=\"number\">1</span>].<span class=\"property\">length</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">      baseNum2 = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">with</span> (<span class=\"title class_\">Math</span>) &#123;</span><br><span class=\"line\">      baseNum3 = <span class=\"title class_\">Number</span>(num1.<span class=\"title function_\">toString</span>().<span class=\"title function_\">replace</span>(<span class=\"string\">&quot;.&quot;</span>, “”));</span><br><span class=\"line\">      baseNum4 = <span class=\"title class_\">Number</span>(num2.<span class=\"title function_\">toString</span>().<span class=\"title function_\">replace</span>(<span class=\"string\">&quot;.&quot;</span>, “”));</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (baseNum3 / baseNum4) * <span class=\"title function_\">pow</span>(<span class=\"number\">10</span>, baseNum2 - baseNum1);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n","categories":["js/jq"],"tags":["js","jq"]},{"title":"常用php操作","url":"/2023/11/22/%E5%B8%B8%E7%94%A8php%E6%93%8D%E4%BD%9C/","content":"<h3 id=\"处理数据单元-处理富文本截取\"><a href=\"#处理数据单元-处理富文本截取\" class=\"headerlink\" title=\"处理数据单元,处理富文本截取\"></a>处理数据单元,处理富文本截取</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extract_text</span>(<span class=\"params\"><span class=\"variable\">$html</span>, <span class=\"variable\">$length</span></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 剥离HTML标签</span></span><br><span class=\"line\">        <span class=\"variable\">$text</span> = <span class=\"title function_ invoke__\">strip_tags</span>(<span class=\"variable\">$html</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 提取前100个字符</span></span><br><span class=\"line\">        <span class=\"variable\">$text</span> = <span class=\"title function_ invoke__\">mb_substr</span>(<span class=\"variable\">$text</span>, <span class=\"number\">0</span>, <span class=\"variable\">$length</span>, <span class=\"string\">&#x27;UTF-8&#x27;</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">        <span class=\"comment\">// 如果截取的位置刚好在HTML标签内，则去除截断的不完整标签</span></span><br><span class=\"line\">        <span class=\"variable\">$lastTagEndPos</span> = <span class=\"title function_ invoke__\">strrpos</span>(<span class=\"variable\">$text</span>, <span class=\"string\">&#x27;&gt;&#x27;</span>);</span><br><span class=\"line\">        <span class=\"variable\">$lastTagStartPos</span> = <span class=\"title function_ invoke__\">strrpos</span>(<span class=\"variable\">$text</span>, <span class=\"string\">&#x27;&lt;&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$lastTagStartPos</span> !== <span class=\"literal\">false</span> &amp;&amp; <span class=\"variable\">$lastTagEndPos</span> === <span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable\">$text</span> = <span class=\"title function_ invoke__\">mb_substr</span>(<span class=\"variable\">$text</span>, <span class=\"number\">0</span>, <span class=\"variable\">$lastTagStartPos</span>, <span class=\"string\">&#x27;UTF-8&#x27;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">        <span class=\"comment\">// 如果截取的位置在HTML实体编码内，则将实体编码转换回原始字符</span></span><br><span class=\"line\">        <span class=\"variable\">$text</span> = <span class=\"title function_ invoke__\">html_entity_decode</span>(<span class=\"variable\">$text</span>, ENT_QUOTES | ENT_HTML5, <span class=\"string\">&#x27;UTF-8&#x27;</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$text</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getItem</span>(<span class=\"params\"><span class=\"variable\">$news</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"variable\">$news</span> <span class=\"keyword\">as</span> &amp;<span class=\"variable\">$v</span>)&#123;</span><br><span class=\"line\"><span class=\"comment\">//            $item = $item-&gt;getData();</span></span><br><span class=\"line\">            <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;year&#x27;</span>] = <span class=\"title function_ invoke__\">date</span>(<span class=\"string\">&#x27;Y&#x27;</span>, <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;add_time&#x27;</span>]); <span class=\"comment\">// 获取时间戳的年份</span></span><br><span class=\"line\">            <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;month&#x27;</span>] = <span class=\"title function_ invoke__\">date</span>(<span class=\"string\">&#x27;m&#x27;</span>, <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;add_time&#x27;</span>]); <span class=\"comment\">// 获取时间戳的月份</span></span><br><span class=\"line\">            <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;day&#x27;</span>] = <span class=\"title function_ invoke__\">date</span>(<span class=\"string\">&#x27;d&#x27;</span>, <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;add_time&#x27;</span>]); <span class=\"comment\">// 获取时间戳的日期</span></span><br><span class=\"line\">            <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;add_time&#x27;</span>] = <span class=\"title function_ invoke__\">date</span>(<span class=\"string\">&quot;Y-m-d H:i&quot;</span>, <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;add_time&#x27;</span>]);</span><br><span class=\"line\">            <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;url&#x27;</span>] = <span class=\"title function_ invoke__\">MyUrl</span>(<span class=\"string\">&#x27;index/article/index&#x27;</span>, [<span class=\"string\">&#x27;id&#x27;</span>=&gt;<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;id&#x27;</span>]]);</span><br><span class=\"line\">            <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;intro&#x27;</span>]=<span class=\"variable\">$result</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">extract_text</span>(<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;content&#x27;</span>], <span class=\"number\">100</span>);</span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;content&#x27;</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$news</span>;</span><br><span class=\"line\"><span class=\"comment\">//        pd($news);</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"二维数组去重\"><a href=\"#二维数组去重\" class=\"headerlink\" title=\"二维数组去重\"></a>二维数组去重</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//二维数组去重</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">assoc_unique</span>(<span class=\"params\"><span class=\"variable\">$arr</span>, <span class=\"variable\">$key</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$tmp_arr</span> = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (<span class=\"variable\">$arr</span> <span class=\"keyword\">as</span> <span class=\"variable\">$k</span> =&gt; <span class=\"variable\">$v</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">in_array</span>(<span class=\"variable\">$v</span>[<span class=\"variable\">$key</span>], <span class=\"variable\">$tmp_arr</span>)) &#123;<span class=\"comment\">//搜索$v[$key]是否在$tmp_arr数组中存在，若存在返回true</span></span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"variable\">$arr</span>[<span class=\"variable\">$k</span>]);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"variable\">$tmp_arr</span>[] = <span class=\"variable\">$v</span>[<span class=\"variable\">$key</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_ invoke__\">sort</span>(<span class=\"variable\">$arr</span>); <span class=\"comment\">//sort函数对数组进行排序</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"检测网址是否可以访问\"><a href=\"#检测网址是否可以访问\" class=\"headerlink\" title=\"检测网址是否可以访问\"></a>检测网址是否可以访问</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//检测网址是否可以访问</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">check_url</span>(<span class=\"params\"><span class=\"variable\">$url</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (@<span class=\"title function_ invoke__\">fopen</span>(<span class=\"variable\">$url</span>, <span class=\"string\">&#x27;r&#x27;</span>) == <span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"根据键值，对二维数组重新进行分组\"><a href=\"#根据键值，对二维数组重新进行分组\" class=\"headerlink\" title=\"根据键值，对二维数组重新进行分组\"></a>根据键值，对二维数组重新进行分组</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**&lt;br&gt;　　　*PHP根据键值，对二维数组重新进行分组</span></span><br><span class=\"line\"><span class=\"comment\">   * [array_group_by ph]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span>  [type] $arr [二维数组]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span>  [type] $key [键名]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return</span> [type]      [新的二维数组]</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">array_group_by</span>(<span class=\"params\"><span class=\"variable\">$arr</span>, <span class=\"variable\">$key</span></span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"variable\">$grouped</span> = <span class=\"keyword\">array</span>();</span><br><span class=\"line\">      <span class=\"keyword\">foreach</span> (<span class=\"variable\">$arr</span> <span class=\"keyword\">as</span> <span class=\"variable\">$value</span>) &#123;</span><br><span class=\"line\">          <span class=\"variable\">$grouped</span>[<span class=\"variable\">$value</span>[<span class=\"variable\">$key</span>]][] = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">func_num_args</span>() &gt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">          <span class=\"variable\">$args</span> = <span class=\"title function_ invoke__\">func_get_args</span>();</span><br><span class=\"line\">          <span class=\"keyword\">foreach</span> (<span class=\"variable\">$grouped</span> <span class=\"keyword\">as</span> <span class=\"variable\">$key</span> =&gt; <span class=\"variable\">$value</span>) &#123;</span><br><span class=\"line\">              <span class=\"variable\">$parms</span> = <span class=\"title function_ invoke__\">array_merge</span>(<span class=\"variable\">$value</span>, <span class=\"title function_ invoke__\">array_slice</span>(<span class=\"variable\">$args</span>, <span class=\"number\">2</span>, <span class=\"title function_ invoke__\">func_num_args</span>()));</span><br><span class=\"line\">              <span class=\"variable\">$grouped</span>[<span class=\"variable\">$key</span>] = <span class=\"title function_ invoke__\">call_user_func_array</span>(<span class=\"string\">&#x27;array_group_by&#x27;</span>, <span class=\"variable\">$parms</span>);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"variable\">$grouped</span>;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"根据时间判断是否执行某个操作\"><a href=\"#根据时间判断是否执行某个操作\" class=\"headerlink\" title=\"根据时间判断是否执行某个操作\"></a>根据时间判断是否执行某个操作</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get_time</span>(<span class=\"params\"><span class=\"variable\">$start</span>,<span class=\"variable\">$end</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//判断当前时间是否在时间段内，如果是，则执行</span></span><br><span class=\"line\">    <span class=\"variable\">$Day</span> = <span class=\"title function_ invoke__\">date</span>(<span class=\"string\">&#x27;Y-m-d &#x27;</span>,<span class=\"title function_ invoke__\">time</span>());</span><br><span class=\"line\">    <span class=\"variable\">$timeBegin</span> = <span class=\"title function_ invoke__\">strtotime</span>(<span class=\"variable\">$Day</span>.<span class=\"variable\">$start</span>.<span class=\"string\">&quot;:00&quot;</span>);</span><br><span class=\"line\">    <span class=\"variable\">$timeEnd</span> = <span class=\"title function_ invoke__\">strtotime</span>(<span class=\"variable\">$Day</span>.<span class=\"variable\">$end</span>.<span class=\"string\">&quot;:00&quot;</span>);</span><br><span class=\"line\">    <span class=\"variable\">$curr_time</span> = <span class=\"title function_ invoke__\">time</span>();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"variable\">$curr_time</span> &gt;= <span class=\"variable\">$timeBegin</span> &amp;&amp; <span class=\"variable\">$curr_time</span> &lt;= <span class=\"variable\">$timeEnd</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isCorrectTime</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$time</span> = <span class=\"title function_ invoke__\">time</span>();</span><br><span class=\"line\">    <span class=\"variable\">$w</span> = <span class=\"title function_ invoke__\">date</span>(<span class=\"string\">&#x27;w&#x27;</span>,<span class=\"variable\">$time</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!(<span class=\"variable\">$w</span> != <span class=\"number\">0</span> <span class=\"keyword\">and</span> <span class=\"variable\">$w</span> != <span class=\"number\">6</span>))</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//双休日</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//工作日</span></span><br><span class=\"line\">    <span class=\"comment\">//判断是否在规定时间内</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">get_time</span>(<span class=\"string\">&#x27;8:30&#x27;</span>,<span class=\"string\">&#x27;18:00&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"调试打印\"><a href=\"#调试打印\" class=\"headerlink\" title=\"调试打印\"></a>调试打印</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 打印调试函数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $content</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $is_die</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pre</span>(<span class=\"params\"><span class=\"variable\">$content</span>, <span class=\"variable\">$is_die</span> = <span class=\"literal\">true</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Content-type: text/html; charset=utf-8&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;&lt;pre&gt;&#x27;</span> . <span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$content</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    <span class=\"variable\">$is_die</span> &amp;&amp; <span class=\"keyword\">die</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pp</span>(<span class=\"params\"><span class=\"variable\">$data</span>,<span class=\"variable\">$is_die</span>=<span class=\"literal\">true</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 定义样式</span></span><br><span class=\"line\">  <span class=\"variable\">$str</span> = <span class=\"string\">&#x27;&lt;pre style=&quot;display: block;padding: 9.5px;margin: 44px 0 0 0;font-size: 13px;line-height: 1.42857;color: red;word-break: break-all;word-wrap: break-word;background-color: #F5F5F5;border: 1px solid #CCC;border-radius: 4px;&quot;&gt;&#x27;</span>;</span><br><span class=\"line\">  <span class=\"comment\">// 如果是boolean或者null直接显示文字；否则print</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">is_bool</span>(<span class=\"variable\">$data</span>)) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$show_data</span> = <span class=\"variable\">$data</span> ? <span class=\"string\">&#x27;true&#x27;</span> : <span class=\"string\">&#x27;false&#x27;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">elseif</span> (<span class=\"title function_ invoke__\">is_null</span>(<span class=\"variable\">$data</span>)) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$show_data</span> = <span class=\"string\">&#x27;null&#x27;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"variable\">$show_data</span> = <span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$data</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable\">$str</span> .= <span class=\"variable\">$show_data</span>;</span><br><span class=\"line\">  <span class=\"variable\">$str</span> .= <span class=\"string\">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"variable\">$str</span>;</span><br><span class=\"line\">  <span class=\"variable\">$is_die</span> &amp;&amp; <span class=\"keyword\">die</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pd</span>(<span class=\"params\"><span class=\"variable\">$data</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 定义样式</span></span><br><span class=\"line\">  <span class=\"variable\">$str</span> = <span class=\"string\">&#x27;&lt;pre style=&quot;display: block;padding: 9.5px;margin: 44px 0 0 0;font-size: 13px;line-height: 1.42857;color: #333;word-break: break-all;word-wrap: break-word;background-color: #F5F5F5;border: 1px solid #CCC;border-radius: 4px;&quot;&gt;&#x27;</span>;</span><br><span class=\"line\">  <span class=\"comment\">// 如果是boolean或者null直接显示文字；否则print</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">is_bool</span>(<span class=\"variable\">$data</span>)) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$show_data</span> = <span class=\"variable\">$data</span> ? <span class=\"string\">&#x27;true&#x27;</span> : <span class=\"string\">&#x27;false&#x27;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">elseif</span> (<span class=\"title function_ invoke__\">is_null</span>(<span class=\"variable\">$data</span>)) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$show_data</span> = <span class=\"string\">&#x27;null&#x27;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"variable\">$show_data</span> = <span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$data</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable\">$str</span> .= <span class=\"variable\">$show_data</span>;</span><br><span class=\"line\">  <span class=\"variable\">$str</span> .= <span class=\"string\">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"variable\">$str</span>;</span><br><span class=\"line\">  <span class=\"keyword\">die</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">p</span>(<span class=\"params\"><span class=\"variable\">$data</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 定义样式</span></span><br><span class=\"line\">  <span class=\"variable\">$str</span> = <span class=\"string\">&#x27;&lt;pre style=&quot;display: block;padding: 9.5px;margin: 44px 0 0 0;font-size: 13px;line-height: 1.42857;color: #333;word-break: break-all;word-wrap: break-word;background-color: #F5F5F5;border: 1px solid #CCC;border-radius: 4px;&quot;&gt;&#x27;</span>;</span><br><span class=\"line\">  <span class=\"comment\">// 如果是boolean或者null直接显示文字；否则print</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">is_bool</span>(<span class=\"variable\">$data</span>)) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$show_data</span> = <span class=\"variable\">$data</span> ? <span class=\"string\">&#x27;true&#x27;</span> : <span class=\"string\">&#x27;false&#x27;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">elseif</span> (<span class=\"title function_ invoke__\">is_null</span>(<span class=\"variable\">$data</span>)) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$show_data</span> = <span class=\"string\">&#x27;null&#x27;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"variable\">$show_data</span> = <span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$data</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable\">$str</span> .= <span class=\"variable\">$show_data</span>;</span><br><span class=\"line\">  <span class=\"variable\">$str</span> .= <span class=\"string\">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"variable\">$str</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"利用PhpOfficePhpSpreadsheet实现导入导出功能\"><a href=\"#利用PhpOfficePhpSpreadsheet实现导入导出功能\" class=\"headerlink\" title=\"利用PhpOfficePhpSpreadsheet实现导入导出功能\"></a>利用PhpOfficePhpSpreadsheet实现导入导出功能</h3><p>注意:</p>\n<ol>\n<li>之前有用过<code>PHPExcel</code>导出过数据,这个是一个不再维护的版本,对于php版本有要求,可以实现功能,但是考虑到<code>不再维护</code>和<code>版本要求在7.2以下</code>,使用方式为:<ol>\n<li>安装<code>composer require phpoffice/phpexcel</code>:</li>\n<li>使用:</li>\n</ol>\n</li>\n</ol>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">clientExcel</span>(<span class=\"params\"><span class=\"variable\">$data</span> = [],<span class=\"variable\">$name</span> = <span class=\"string\">&#x27;excel&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$excel</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">\\PHPExcel</span>(); <span class=\"comment\">//引用phpexcel</span></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">iconv</span>(<span class=\"string\">&#x27;UTF-8&#x27;</span>, <span class=\"string\">&#x27;gb2312&#x27;</span>, <span class=\"variable\">$name</span>); <span class=\"comment\">//针对中文名转码</span></span><br><span class=\"line\"><span class=\"comment\">//        $header = [&#x27;订单编号&#x27;, &#x27;订单状态&#x27;, &#x27;客户名字&#x27;, &#x27;订单名字&#x27;, &#x27;创建时间&#x27;,&#x27;订单备注&#x27;,&#x27;开料尺寸&#x27;,&#x27;印件色数&#x27;,&#x27;印件色别&#x27;,&#x27;印刷方式&#x27;,&#x27;成品尺寸&#x27;,&#x27;印刷板数&#x27;,&#x27;千印数量&#x27;]; //表头,名称可自定义</span></span><br><span class=\"line\">        <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">setActiveSheetIndex</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">setTitle</span>(<span class=\"variable\">$name</span>); <span class=\"comment\">//设置表名</span></span><br><span class=\"line\">        <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">getDefaultRowDimension</span>()-&gt;<span class=\"title function_ invoke__\">setRowHeight</span>(<span class=\"number\">18</span>);</span><br><span class=\"line\"><span class=\"comment\">//        $excel-&gt;getActiveSheet()-&gt;getColumnDimension(&#x27;B&#x27;)-&gt;setWidth(80);</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable\">$letter</span> = [<span class=\"string\">&#x27;A&#x27;</span>, <span class=\"string\">&#x27;B&#x27;</span>, <span class=\"string\">&#x27;C&#x27;</span>,<span class=\"string\">&#x27;D&#x27;</span>,<span class=\"string\">&#x27;E&#x27;</span>];<span class=\"comment\">//列坐标</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//设置表头</span></span><br><span class=\"line\">        <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">setActiveSheetIndex</span>(<span class=\"number\">0</span>)</span><br><span class=\"line\">            -&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;A1&#x27;</span>, <span class=\"string\">&#x27;商品编号&#x27;</span>)</span><br><span class=\"line\">            -&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;B1&#x27;</span>, <span class=\"string\">&#x27;商品型号&#x27;</span>)</span><br><span class=\"line\">            -&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;C1&#x27;</span>, <span class=\"string\">&#x27;销售价格&#x27;</span>)</span><br><span class=\"line\">            -&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;D1&#x27;</span>, <span class=\"string\">&#x27;库存数&#x27;</span>)</span><br><span class=\"line\">            -&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;E1&#x27;</span>, <span class=\"string\">&#x27;仓库名称&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//写入数据</span></span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"variable\">$data</span> <span class=\"keyword\">as</span> <span class=\"variable\">$k</span> =&gt; <span class=\"variable\">$v</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//从第二行开始写入数据（第一行为表头）</span></span><br><span class=\"line\">            <span class=\"comment\">//$excel-&gt;getActiveSheet()-&gt;setCellValue(&#x27;A&#x27;.($k+2),$v[&#x27;gid&#x27;]);</span></span><br><span class=\"line\">            <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;A&#x27;</span> . (<span class=\"variable\">$k</span> + <span class=\"number\">2</span>), <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;goods_id&#x27;</span>].<span class=\"string\">&quot;\\t&quot;</span>);</span><br><span class=\"line\">            <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;B&#x27;</span> . (<span class=\"variable\">$k</span> + <span class=\"number\">2</span>), <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;goods&#x27;</span>][<span class=\"string\">&#x27;model&#x27;</span>]);</span><br><span class=\"line\">            <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;C&#x27;</span> . (<span class=\"variable\">$k</span> + <span class=\"number\">2</span>), <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;goods&#x27;</span>][<span class=\"string\">&#x27;price&#x27;</span>]);</span><br><span class=\"line\">            <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;D&#x27;</span> . (<span class=\"variable\">$k</span> + <span class=\"number\">2</span>), <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;inventory&#x27;</span>]);</span><br><span class=\"line\">            <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"string\">&#x27;E&#x27;</span> . (<span class=\"variable\">$k</span> + <span class=\"number\">2</span>), <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;warehouse_name&#x27;</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//设置单元格边框</span></span><br><span class=\"line\">        <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">getStyle</span>(<span class=\"string\">&quot;A1:E&quot;</span> . (<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$data</span>) + <span class=\"number\">1</span>))-&gt;<span class=\"title function_ invoke__\">getBorders</span>()-&gt;<span class=\"title function_ invoke__\">getAllBorders</span>()-&gt;<span class=\"title function_ invoke__\">setBorderStyle</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">ob_end_clean</span>();</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Content-Type: application/vnd.ms-excel&#x27;</span>);</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Content-Disposition: attachment;filename=&quot;&#x27;</span> . <span class=\"variable\">$name</span> . <span class=\"string\">&#x27;.xls&quot;&#x27;</span>);</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Cache-Control: max-age=0&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable\">$res_excel</span> = <span class=\"title class_\">PHPExcel_IOFactory</span>::<span class=\"title function_ invoke__\">createWriter</span>(<span class=\"variable\">$excel</span>, <span class=\"string\">&#x27;Excel2007&#x27;</span>);</span><br><span class=\"line\">        <span class=\"variable\">$res_excel</span>-&gt;<span class=\"title function_ invoke__\">save</span>(<span class=\"string\">&#x27;php://output&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"phpspreadsheet使用\"><a href=\"#phpspreadsheet使用\" class=\"headerlink\" title=\"phpspreadsheet使用\"></a>phpspreadsheet使用</h3><h4 id=\"1-安装\"><a href=\"#1-安装\" class=\"headerlink\" title=\"1. 安装\"></a>1. 安装</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">composer require phpoffice/phpspreadsheet</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-导出\"><a href=\"#2-导出\" class=\"headerlink\" title=\"2. 导出\"></a>2. 导出</h4><p>查询数据</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 获取数据列表</span></span><br><span class=\"line\">        <span class=\"variable\">$data_params</span> = [</span><br><span class=\"line\">            <span class=\"string\">&#x27;n&#x27;</span>=&gt;<span class=\"number\">9999</span>, 　　　　　　　　<span class=\"string\">&#x27;field&#x27;</span>=&gt;<span class=\"string\">&#x27;id,model,min_price,brand_id,brand_name,price,original_price,goods_time,inventory,inventory_unit,access_count,add_time,upd_time&#x27;</span>,</span><br><span class=\"line\">        ];</span><br><span class=\"line\">        <span class=\"variable\">$ret</span> = <span class=\"title class_\">GoodsService</span>::<span class=\"title function_ invoke__\">GoodsListWithPriceTable</span>(<span class=\"variable\">$data_params</span>);</span><br><span class=\"line\">        <span class=\"variable\">$excel</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Office</span>();</span><br><span class=\"line\">        <span class=\"comment\">//设置表头：</span></span><br><span class=\"line\">        <span class=\"variable\">$head</span> = [<span class=\"string\">&#x27;编号&#x27;</span>, <span class=\"string\">&#x27;型号&#x27;</span>, <span class=\"string\">&#x27;品牌id&#x27;</span>, <span class=\"string\">&#x27;品牌名&#x27;</span>, <span class=\"string\">&#x27;价格&#x27;</span>,<span class=\"string\">&#x27;原价&#x27;</span>,<span class=\"string\">&#x27;货期&#x27;</span>,<span class=\"string\">&#x27;库存&#x27;</span>,<span class=\"string\">&#x27;库存单位&#x27;</span>,<span class=\"string\">&#x27;访问人数&#x27;</span>,<span class=\"string\">&#x27;阶梯价格&#x27;</span>];</span><br><span class=\"line\">        <span class=\"comment\">//数据中对应的字段，用于读取相应数据：</span></span><br><span class=\"line\">        <span class=\"variable\">$keys</span> = [<span class=\"string\">&#x27;id&#x27;</span>, <span class=\"string\">&#x27;model&#x27;</span>, <span class=\"string\">&#x27;brand_id&#x27;</span>, <span class=\"string\">&#x27;brand_name&#x27;</span>, <span class=\"string\">&#x27;price&#x27;</span> ,<span class=\"string\">&#x27;original_price&#x27;</span> ,<span class=\"string\">&#x27;goods_time&#x27;</span> ,<span class=\"string\">&#x27;inventory&#x27;</span> ,<span class=\"string\">&#x27;inventory_unit&#x27;</span> ,<span class=\"string\">&#x27;access_count&#x27;</span>,<span class=\"string\">&#x27;price_table&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable\">$excel</span>-&gt;<span class=\"title function_ invoke__\">outdataWithPriceTable</span>(<span class=\"string\">&#x27;产品信息表&#x27;</span>, <span class=\"variable\">$ret</span>[<span class=\"string\">&#x27;data&#x27;</span>], <span class=\"variable\">$head</span>, <span class=\"variable\">$keys</span>);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>导出的功能实现类</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">service</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpOffice</span>\\<span class=\"title\">PhpSpreadsheet</span>\\<span class=\"title\">Spreadsheet</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpOffice</span>\\<span class=\"title\">PhpSpreadsheet</span>\\<span class=\"title\">Writer</span>\\<span class=\"title\">Xlsx</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Office</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 导出excel表</span></span><br><span class=\"line\"><span class=\"comment\">     * $data：要导出excel表的数据，接受一个二维数组</span></span><br><span class=\"line\"><span class=\"comment\">     * $name：excel表的表名</span></span><br><span class=\"line\"><span class=\"comment\">     * $head：excel表的表头，接受一个一维数组</span></span><br><span class=\"line\"><span class=\"comment\">     * $key：$data中对应表头的键的数组，接受一个一维数组</span></span><br><span class=\"line\"><span class=\"comment\">     * 备注：此函数缺点是，表头（对应列数）不能超过26；</span></span><br><span class=\"line\"><span class=\"comment\">     *循环不够灵活，一个单元格中不方便存放两个数据库字段的值</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">outdata</span>(<span class=\"params\"><span class=\"variable\">$name</span>=<span class=\"string\">&#x27;测试表&#x27;</span>, <span class=\"variable\">$data</span>=[], <span class=\"variable\">$head</span>=[], <span class=\"variable\">$keys</span>=[]</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$count</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$head</span>);  <span class=\"comment\">//计算表头数量</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable\">$spreadsheet</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Spreadsheet</span>();</span><br><span class=\"line\">        <span class=\"variable\">$sheet</span> = <span class=\"variable\">$spreadsheet</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">65</span>; <span class=\"variable\">$i</span> &lt; <span class=\"variable\">$count</span> + <span class=\"number\">65</span>; <span class=\"variable\">$i</span>++) &#123;     <span class=\"comment\">//数字转字母从65开始，循环设置表头：</span></span><br><span class=\"line\">            <span class=\"variable\">$sheet</span>-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"title function_ invoke__\">strtoupper</span>(<span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$i</span>)) . <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"variable\">$head</span>[<span class=\"variable\">$i</span> - <span class=\"number\">65</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/*--------------开始从数据库提取信息插入Excel表中------------------*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"variable\">$data</span> <span class=\"keyword\">as</span> <span class=\"variable\">$key</span> =&gt; <span class=\"variable\">$item</span>) &#123;             <span class=\"comment\">//循环设置单元格：</span></span><br><span class=\"line\">            <span class=\"comment\">//$key+2,因为第一行是表头，所以写到表格时   从第二行开始写</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">65</span>; <span class=\"variable\">$i</span> &lt; <span class=\"variable\">$count</span> + <span class=\"number\">65</span>; <span class=\"variable\">$i</span>++) &#123;     <span class=\"comment\">//数字转字母从65开始：</span></span><br><span class=\"line\">                <span class=\"variable\">$sheet</span>-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"title function_ invoke__\">strtoupper</span>(<span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$i</span>)) . (<span class=\"variable\">$key</span> + <span class=\"number\">2</span>), <span class=\"variable\">$item</span>[<span class=\"variable\">$keys</span>[<span class=\"variable\">$i</span> - <span class=\"number\">65</span>]]);</span><br><span class=\"line\">                <span class=\"variable\">$spreadsheet</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">getColumnDimension</span>(<span class=\"title function_ invoke__\">strtoupper</span>(<span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$i</span>)))-&gt;<span class=\"title function_ invoke__\">setWidth</span>(<span class=\"number\">20</span>); <span class=\"comment\">//固定列宽</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Content-Type: application/vnd.ms-excel&#x27;</span>);</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Content-Disposition: attachment;filename=&quot;&#x27;</span> . <span class=\"variable\">$name</span> . <span class=\"string\">&#x27;.xlsx&quot;&#x27;</span>);</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Cache-Control: max-age=0&#x27;</span>);</span><br><span class=\"line\">        <span class=\"variable\">$writer</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Xlsx</span>(<span class=\"variable\">$spreadsheet</span>);</span><br><span class=\"line\">        <span class=\"variable\">$writer</span>-&gt;<span class=\"title function_ invoke__\">save</span>(<span class=\"string\">&#x27;php://output&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//删除清空：</span></span><br><span class=\"line\">        <span class=\"variable\">$spreadsheet</span>-&gt;<span class=\"title function_ invoke__\">disconnectWorksheets</span>();</span><br><span class=\"line\">        <span class=\"keyword\">unset</span>(<span class=\"variable\">$spreadsheet</span>);</span><br><span class=\"line\">        <span class=\"keyword\">exit</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">outdataWithPriceTable</span>(<span class=\"params\"><span class=\"variable\">$name</span>=<span class=\"string\">&#x27;测试表&#x27;</span>, <span class=\"variable\">$data</span>=[], <span class=\"variable\">$head</span>=[], <span class=\"variable\">$keys</span>=[]</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//        pd($data);</span></span><br><span class=\"line\">        <span class=\"variable\">$count</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$head</span>);  <span class=\"comment\">//计算表头数量</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable\">$spreadsheet</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Spreadsheet</span>();</span><br><span class=\"line\">        <span class=\"variable\">$sheet</span> = <span class=\"variable\">$spreadsheet</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">65</span>; <span class=\"variable\">$i</span> &lt; <span class=\"variable\">$count</span> + <span class=\"number\">65</span>; <span class=\"variable\">$i</span>++) &#123;     <span class=\"comment\">//数字转字母从65开始，循环设置表头：</span></span><br><span class=\"line\"><span class=\"comment\">//            if($i-65==10)&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//                $sheet-&gt;mergeCells(&#x27;K1:L1&#x27;)-&gt;setCellValue(strtoupper(chr($i)) . &#x27;1&#x27;, $head[$i - 65]);</span></span><br><span class=\"line\"><span class=\"comment\">//            &#125;else&#123;</span></span><br><span class=\"line\">                <span class=\"variable\">$sheet</span>-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"title function_ invoke__\">strtoupper</span>(<span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$i</span>)) . <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"variable\">$head</span>[<span class=\"variable\">$i</span> - <span class=\"number\">65</span>]);</span><br><span class=\"line\"><span class=\"comment\">//            &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/*--------------开始从数据库提取信息插入Excel表中------------------*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"variable\">$data</span> <span class=\"keyword\">as</span> <span class=\"variable\">$key</span> =&gt; <span class=\"variable\">$item</span>) &#123;             <span class=\"comment\">//循环设置单元格：</span></span><br><span class=\"line\">            <span class=\"comment\">//$key+2,因为第一行是表头，所以写到表格时   从第二行开始写</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">65</span>; <span class=\"variable\">$i</span> &lt; <span class=\"variable\">$count</span> + <span class=\"number\">65</span>; <span class=\"variable\">$i</span>++) &#123;     <span class=\"comment\">//数字转字母从65开始：</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(<span class=\"variable\">$i</span>-<span class=\"number\">65</span>==<span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">                    <span class=\"variable\">$num</span>=<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$item</span>[<span class=\"variable\">$keys</span>[<span class=\"variable\">$i</span> - <span class=\"number\">65</span>]]);</span><br><span class=\"line\">                    <span class=\"keyword\">for</span>(<span class=\"variable\">$j</span>=<span class=\"number\">0</span>;<span class=\"variable\">$j</span>&lt;<span class=\"variable\">$num</span>;<span class=\"variable\">$j</span>++)&#123;</span><br><span class=\"line\"><span class=\"comment\">//                        $spreadsheet-&gt;getActiveSheet()-&gt;mergeCells(strtoupper(chr($i+$j+1)) . ($key + 2 ).&#x27;:&#x27;.strtoupper(chr($i+$j+1)) . ($key + 2+(2*$num)));</span></span><br><span class=\"line\"><span class=\"comment\">//                        $sheet-&gt;setCellValue(strtoupper(chr($i+$j+1)) . ($key + 2 ),$item[$keys[$i - 65]][$j][&#x27;number&#x27;] );</span></span><br><span class=\"line\">                        <span class=\"variable\">$sheet</span>-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"title function_ invoke__\">strtoupper</span>(<span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$i</span>+<span class=\"variable\">$j</span>+<span class=\"number\">1</span>)) . (<span class=\"variable\">$key</span> + <span class=\"number\">2</span> ),<span class=\"variable\">$item</span>[<span class=\"variable\">$keys</span>[<span class=\"variable\">$i</span> - <span class=\"number\">65</span>]][<span class=\"variable\">$j</span>][<span class=\"string\">&#x27;number&#x27;</span>].<span class=\"string\">&#x27;x&#x27;</span>.<span class=\"variable\">$item</span>[<span class=\"variable\">$keys</span>[<span class=\"variable\">$i</span> - <span class=\"number\">65</span>]][<span class=\"variable\">$j</span>][<span class=\"string\">&#x27;one_price&#x27;</span>]  );</span><br><span class=\"line\"><span class=\"comment\">//                        $sheet-&gt;setCellValue(strtoupper(chr($i+$j+2)) . ($key + 2), 1);</span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"><span class=\"comment\">//                    for($ii=0;$ii&lt;$num;$ii++)&#123;</span></span><br><span class=\"line\"><span class=\"comment\">////                        $spreadsheet-&gt;getActiveSheet()-&gt;mergeCells(strtoupper(chr($i+$j+1)) . ($key + 2 ).&#x27;:&#x27;.strtoupper(chr($i+$j+1)) . ($key + 2+(2*$num)));</span></span><br><span class=\"line\"><span class=\"comment\">////                        $sheet-&gt;setCellValue(strtoupper(chr($i+$j+1)) . ($key + 2 ),$item[$keys[$i - 65]][$j][&#x27;number&#x27;] );</span></span><br><span class=\"line\"><span class=\"comment\">//                        $sheet-&gt;setCellValue(strtoupper(chr($i+$num+$ii+1)) . ($key + 2 ),$item[$keys[$i - 65]][$ii][&#x27;one_price&#x27;] );</span></span><br><span class=\"line\"><span class=\"comment\">////                        $sheet-&gt;setCellValue(strtoupper(chr($i+$j+2)) . ($key + 2), 1);</span></span><br><span class=\"line\"><span class=\"comment\">//                    &#125;</span></span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    <span class=\"variable\">$sheet</span>-&gt;<span class=\"title function_ invoke__\">setCellValue</span>(<span class=\"title function_ invoke__\">strtoupper</span>(<span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$i</span>)) . (<span class=\"variable\">$key</span> + <span class=\"number\">2</span>), <span class=\"variable\">$item</span>[<span class=\"variable\">$keys</span>[<span class=\"variable\">$i</span> - <span class=\"number\">65</span>]]);</span><br><span class=\"line\">                    <span class=\"variable\">$spreadsheet</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">getColumnDimension</span>(<span class=\"title function_ invoke__\">strtoupper</span>(<span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$i</span>)))-&gt;<span class=\"title function_ invoke__\">setWidth</span>(<span class=\"number\">20</span>); <span class=\"comment\">//固定列宽</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"comment\">//        die;</span></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Content-Type: application/vnd.ms-excel&#x27;</span>);</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Content-Disposition: attachment;filename=&quot;&#x27;</span> . <span class=\"variable\">$name</span> . <span class=\"string\">&#x27;.xlsx&quot;&#x27;</span>);</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Cache-Control: max-age=0&#x27;</span>);</span><br><span class=\"line\">        <span class=\"variable\">$writer</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Xlsx</span>(<span class=\"variable\">$spreadsheet</span>);</span><br><span class=\"line\">        <span class=\"variable\">$writer</span>-&gt;<span class=\"title function_ invoke__\">save</span>(<span class=\"string\">&#x27;php://output&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//删除清空：</span></span><br><span class=\"line\">        <span class=\"variable\">$spreadsheet</span>-&gt;<span class=\"title function_ invoke__\">disconnectWorksheets</span>();</span><br><span class=\"line\">        <span class=\"keyword\">unset</span>(<span class=\"variable\">$spreadsheet</span>);</span><br><span class=\"line\">        <span class=\"keyword\">exit</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>备注</code>:这里的第一个方法是实现一个二维数组的导出的</p>\n<p>第二个方法是因为在这次的数据中需要处理阶梯价格,是一个一对多的关系,这里导出是按照阶梯价格排成横用x号拼接的</p>\n<h4 id=\"3-导入\"><a href=\"#3-导入\" class=\"headerlink\" title=\"3. 导入\"></a>3. 导入</h4><p>视图层的代码</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;&#123;include file=&quot;public/header&quot; /&#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;am-form am-form-horizontal&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&#123;&#123;:MyUrl(&#x27;index/goods/upload&#x27;)&#125;&#125;&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;post&quot;</span> <span class=\"attr\">enctype</span>=<span class=\"string\">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;am-form-group&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;fileToUpload&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;am-u-sm-2 am-form-label &quot;</span> &gt;</span>选择文件<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;am-u-sm-10&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;file&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;fileToUpload&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;fileToUpload&quot;</span> &gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--            &lt;i class=&quot;am-icon-cloud-upload&quot;&gt;&lt;/i&gt; 选择要上传的文件&lt;/button&gt;--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;am-form-help&quot;</span>&gt;</span>请选择要上传的文件<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;am-form-group&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;am-u-sm-10 am-u-sm-offset-2&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;am-btn am-btn-primary&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span>上传<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>控制层的代码</p>\n<p><code>备注:</code>这里的代码还没有完善,还需要更新到数据库里面去</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 获取表单上传文件 例如上传了001.jpg</span></span><br><span class=\"line\">        <span class=\"variable\">$file</span> = <span class=\"title function_ invoke__\">request</span>()-&gt;<span class=\"title function_ invoke__\">file</span>(<span class=\"string\">&#x27;fileToUpload&#x27;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 移动到框架应用根目录/uploads/ 目录下</span></span><br><span class=\"line\">        <span class=\"variable\">$info</span> = <span class=\"variable\">$file</span>-&gt;<span class=\"title function_ invoke__\">move</span>( <span class=\"string\">&#x27;../public/static/xls&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"variable\">$info</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable\">$spreadsheet</span> = <span class=\"title class_\">IOFactory</span>::<span class=\"title function_ invoke__\">load</span>(<span class=\"variable\">$info</span>-&gt;<span class=\"title function_ invoke__\">getPathName</span>());</span><br><span class=\"line\">            <span class=\"variable\">$sheetData</span> = <span class=\"variable\">$spreadsheet</span>-&gt;<span class=\"title function_ invoke__\">getActiveSheet</span>()-&gt;<span class=\"title function_ invoke__\">toArray</span>(<span class=\"literal\">null</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">pd</span>(<span class=\"variable\">$sheetData</span>);</span><br><span class=\"line\">            <span class=\"comment\">//            $row_num = count($sheetData);</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//            $now_time = time();</span></span><br><span class=\"line\"><span class=\"comment\">//            $import_data = []; //数组形式获取表格数据</span></span><br><span class=\"line\"><span class=\"comment\">//            //从第二行开始做for循环</span></span><br><span class=\"line\"><span class=\"comment\">//            for ($i = 2; $i &lt;= $row_num; $i++) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//                $bank_deal_no = $sheetData[$i][&#x27;A&#x27;];</span></span><br><span class=\"line\"><span class=\"comment\">//                $account_name = $sheetData[$i][&#x27;B&#x27;];</span></span><br><span class=\"line\"><span class=\"comment\">//                $bank_card = $sheetData[$i][&#x27;C&#x27;];</span></span><br><span class=\"line\"><span class=\"comment\">//                $deal_money = $sheetData[$i][&#x27;D&#x27;];</span></span><br><span class=\"line\"><span class=\"comment\">//                $deal_time = $sheetData[$i][&#x27;E&#x27;];</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">////                if (!empty($bank_deal_no) &amp;&amp; !empty($account_name) &amp;&amp; !empty($bank_card) &amp;&amp; !empty($deal_money) &amp;&amp; !empty($deal_time)) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">////                    $import_data[$i][&#x27;bank_deal_no&#x27;] = $bank_deal_no;</span></span><br><span class=\"line\"><span class=\"comment\">////                    $import_data[$i][&#x27;account_name&#x27;] = $account_name;</span></span><br><span class=\"line\"><span class=\"comment\">////                    $import_data[$i][&#x27;bank_card&#x27;] = $bank_card;</span></span><br><span class=\"line\"><span class=\"comment\">////                    $import_data[$i][&#x27;deal_money&#x27;] = $deal_money;</span></span><br><span class=\"line\"><span class=\"comment\">////                    $import_data[$i][&#x27;deal_time&#x27;] = $deal_time;</span></span><br><span class=\"line\"><span class=\"comment\">////                    $import_data[$i][&#x27;create_time&#x27;] = $now_time;</span></span><br><span class=\"line\"><span class=\"comment\">////                    $import_data[$i][&#x27;update_time&#x27;] = $now_time;</span></span><br><span class=\"line\"><span class=\"comment\">////                &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//            &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//            sort($import_data);</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//            if (empty($import_data)) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//                return json([&#x27;status&#x27; =&gt; &#x27;1&#x27;, &#x27;message&#x27; =&gt; &#x27;数据解析失败&#x27;]);</span></span><br><span class=\"line\"><span class=\"comment\">//            &#125;</span></span><br><span class=\"line\">            <span class=\"comment\">// 成功上传后 获取上传信息</span></span><br><span class=\"line\">            <span class=\"comment\">// 输出 jpg</span></span><br><span class=\"line\"><span class=\"comment\">//            echo $info-&gt;getExtension();</span></span><br><span class=\"line\"><span class=\"comment\">//            echo $info-&gt;getPathName();</span></span><br><span class=\"line\">            <span class=\"comment\">// 输出 20160820/42a79759f284b767dfcb2a0197904287.jpg</span></span><br><span class=\"line\"><span class=\"comment\">//            echo $info-&gt;getSaveName();</span></span><br><span class=\"line\">            <span class=\"comment\">// 输出 42a79759f284b767dfcb2a0197904287.jpg</span></span><br><span class=\"line\"><span class=\"comment\">//            echo $info-&gt;getFilename();</span></span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 上传失败获取错误信息</span></span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"variable\">$file</span>-&gt;<span class=\"title function_ invoke__\">getError</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"获取IP\"><a href=\"#获取IP\" class=\"headerlink\" title=\"获取IP\"></a>获取IP</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getIP</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">static</span> <span class=\"variable\">$realip</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>(<span class=\"variable\">$_SERVER</span>))&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>(<span class=\"variable\">$_SERVER</span>[<span class=\"string\">&quot;HTTP_X_FORWARDED_FOR&quot;</span>]))&#123;</span><br><span class=\"line\">      <span class=\"variable\">$realip</span> = <span class=\"variable\">$_SERVER</span>[<span class=\"string\">&quot;HTTP_X_FORWARDED_FOR&quot;</span>];</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>(<span class=\"variable\">$_SERVER</span>[<span class=\"string\">&quot;HTTP_CLIENT_IP&quot;</span>])) &#123;</span><br><span class=\"line\">      <span class=\"variable\">$realip</span> = <span class=\"variable\">$_SERVER</span>[<span class=\"string\">&quot;HTTP_CLIENT_IP&quot;</span>];</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"variable\">$realip</span> = <span class=\"variable\">$_SERVER</span>[<span class=\"string\">&quot;REMOTE_ADDR&quot;</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">getenv</span>(<span class=\"string\">&quot;HTTP_X_FORWARDED_FOR&quot;</span>))&#123;</span><br><span class=\"line\">      <span class=\"variable\">$realip</span> = <span class=\"title function_ invoke__\">getenv</span>(<span class=\"string\">&quot;HTTP_X_FORWARDED_FOR&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">getenv</span>(<span class=\"string\">&quot;HTTP_CLIENT_IP&quot;</span>)) &#123;</span><br><span class=\"line\">      <span class=\"variable\">$realip</span> = <span class=\"title function_ invoke__\">getenv</span>(<span class=\"string\">&quot;HTTP_CLIENT_IP&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"variable\">$realip</span> = <span class=\"title function_ invoke__\">getenv</span>(<span class=\"string\">&quot;REMOTE_ADDR&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"variable\">$realip</span>;</span><br><span class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"variable\">$realip</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">getIP</span>();</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"判断图片资源是否有效\"><a href=\"#判断图片资源是否有效\" class=\"headerlink\" title=\"判断图片资源是否有效\"></a>判断图片资源是否有效</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$url</span>=<span class=\"title function_ invoke__\">config</span>(<span class=\"string\">&#x27;shopxo.attachment_host&#x27;</span>).<span class=\"variable\">$value</span>;</span><br><span class=\"line\"><span class=\"variable\">$array</span> = <span class=\"title function_ invoke__\">get_headers</span>(<span class=\"variable\">$url</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"title function_ invoke__\">preg_match</span>(<span class=\"string\">&#x27;/200/&#x27;</span>,<span class=\"variable\">$array</span>[<span class=\"number\">0</span>]))&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"variable\">$url</span>;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">config</span>(<span class=\"string\">&#x27;app.oss.path&#x27;</span>).<span class=\"variable\">$value</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//echo &quot;无效url资源！&quot;;</span></span><br><span class=\"line\">&#125;\t</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"json-encode中文\"><a href=\"#json-encode中文\" class=\"headerlink\" title=\"json_encode中文\"></a>json_encode中文</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$file</span>=<span class=\"string\">&#x27;./pay/notify&#x27;</span>.<span class=\"title function_ invoke__\">date</span>(<span class=\"string\">&#x27;YmdHis&#x27;</span>).<span class=\"string\">&#x27;.txt&#x27;</span>;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">file_put_contents</span>(<span class=\"variable\">$file</span>, <span class=\"title function_ invoke__\">json_encode</span>(<span class=\"variable\">$ret</span>,JSON_UNESCAPED_UNICODE), FILE_APPEND | LOCK_EX);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"php发送请求\"><a href=\"#php发送请求\" class=\"headerlink\" title=\"php发送请求\"></a>php发送请求</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">// +----------------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">// | CRMEB [ CRMEB赋能开发者，助力企业发展 ]</span></span><br><span class=\"line\"><span class=\"comment\">// +----------------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">// | Copyright (c) 2016~2020 https://www.crmeb.com All rights reserved.</span></span><br><span class=\"line\"><span class=\"comment\">// +----------------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">// | Licensed CRMEB并不是自由软件，未经许可不能去掉CRMEB相关版权</span></span><br><span class=\"line\"><span class=\"comment\">// +----------------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\">// | Author: CRMEB Team &lt;admin@crmeb.com&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// +----------------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">service</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HttpService</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 错误信息</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"variable\">$curlError</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * header头信息</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"variable\">$headerStr</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 请求状态</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> int</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"variable\">$status</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCurlError</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"variable\">$curlError</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getStatus</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"variable\">$status</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 模拟GET发起请求</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $url</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> array $data</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> bool $header</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $timeout</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool|string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRequest</span>(<span class=\"params\"><span class=\"variable\">$url</span>, <span class=\"variable\">$data</span> = <span class=\"keyword\">array</span>(<span class=\"params\"></span>), <span class=\"variable\">$header</span> = <span class=\"literal\">false</span>, <span class=\"variable\">$timeout</span> = <span class=\"number\">10</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$data</span>)) &#123;</span><br><span class=\"line\">            <span class=\"variable\">$url</span> .= (<span class=\"title function_ invoke__\">stripos</span>(<span class=\"variable\">$url</span>, <span class=\"string\">&#x27;?&#x27;</span>) === <span class=\"literal\">false</span> ? <span class=\"string\">&#x27;?&#x27;</span> : <span class=\"string\">&#x27;&amp;&#x27;</span>);</span><br><span class=\"line\">            <span class=\"variable\">$url</span> .= (<span class=\"title function_ invoke__\">is_array</span>(<span class=\"variable\">$data</span>) ? <span class=\"title function_ invoke__\">http_build_query</span>(<span class=\"variable\">$data</span>) : <span class=\"variable\">$data</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">request</span>(<span class=\"variable\">$url</span>, <span class=\"string\">&#x27;get&#x27;</span>, <span class=\"keyword\">array</span>(), <span class=\"variable\">$header</span>, <span class=\"variable\">$timeout</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * curl 请求</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $url</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $method</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> array $data</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> bool $header</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $timeout</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool|string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\"><span class=\"variable\">$url</span>, <span class=\"variable\">$method</span> = <span class=\"string\">&#x27;get&#x27;</span>, <span class=\"variable\">$data</span> = <span class=\"keyword\">array</span>(<span class=\"params\"></span>), <span class=\"variable\">$header</span> = <span class=\"literal\">false</span>, <span class=\"variable\">$timeout</span> = <span class=\"number\">15</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">self</span>::<span class=\"variable\">$status</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"built_in\">self</span>::<span class=\"variable\">$curlError</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"built_in\">self</span>::<span class=\"variable\">$headerStr</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable\">$curl</span> = <span class=\"title function_ invoke__\">curl_init</span>(<span class=\"variable\">$url</span>);</span><br><span class=\"line\">        <span class=\"variable\">$method</span> = <span class=\"title function_ invoke__\">strtoupper</span>(<span class=\"variable\">$method</span>);</span><br><span class=\"line\">        <span class=\"comment\">//请求方式</span></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLOPT_CUSTOMREQUEST, <span class=\"variable\">$method</span>);</span><br><span class=\"line\">        <span class=\"comment\">//post请求</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$method</span> == <span class=\"string\">&#x27;POST&#x27;</span>) <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLOPT_POSTFIELDS, <span class=\"variable\">$data</span>);</span><br><span class=\"line\">        <span class=\"comment\">//超时时间</span></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLOPT_TIMEOUT, <span class=\"variable\">$timeout</span>);</span><br><span class=\"line\">        <span class=\"comment\">//设置header头</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$header</span> !== <span class=\"literal\">false</span>) <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLOPT_HTTPHEADER, <span class=\"variable\">$header</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLOPT_FAILONERROR, <span class=\"literal\">false</span>);</span><br><span class=\"line\">        <span class=\"comment\">//返回抓取数据</span></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLOPT_RETURNTRANSFER, <span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//输出header头信息</span></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLOPT_HEADER, <span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//TRUE 时追踪句柄的请求字符串，从 PHP 5.1.3 开始可用。这个很关键，就是允许你查看请求header</span></span><br><span class=\"line\">        <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLINFO_HEADER_OUT, <span class=\"literal\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//https请求</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"number\">1</span> == <span class=\"title function_ invoke__\">strpos</span>(<span class=\"string\">&quot;$&quot;</span> . <span class=\"variable\">$url</span>, <span class=\"string\">&quot;https://&quot;</span>)) &#123;</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLOPT_SSL_VERIFYPEER, <span class=\"literal\">false</span>);</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$curl</span>, CURLOPT_SSL_VERIFYHOST, <span class=\"literal\">false</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">self</span>::<span class=\"variable\">$curlError</span> = <span class=\"title function_ invoke__\">curl_error</span>(<span class=\"variable\">$curl</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">list</span>(<span class=\"variable\">$content</span>, <span class=\"variable\">$status</span>) = [<span class=\"title function_ invoke__\">curl_exec</span>(<span class=\"variable\">$curl</span>), <span class=\"title function_ invoke__\">curl_getinfo</span>(<span class=\"variable\">$curl</span>), <span class=\"title function_ invoke__\">curl_close</span>(<span class=\"variable\">$curl</span>)];</span><br><span class=\"line\">        <span class=\"built_in\">self</span>::<span class=\"variable\">$status</span> = <span class=\"variable\">$status</span>;</span><br><span class=\"line\">        <span class=\"built_in\">self</span>::<span class=\"variable\">$headerStr</span> = <span class=\"title function_ invoke__\">trim</span>(<span class=\"title function_ invoke__\">substr</span>(<span class=\"variable\">$content</span>, <span class=\"number\">0</span>, <span class=\"variable\">$status</span>[<span class=\"string\">&#x27;header_size&#x27;</span>]));</span><br><span class=\"line\">        <span class=\"variable\">$content</span> = <span class=\"title function_ invoke__\">trim</span>(<span class=\"title function_ invoke__\">substr</span>(<span class=\"variable\">$content</span>, <span class=\"variable\">$status</span>[<span class=\"string\">&#x27;header_size&#x27;</span>]));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$status</span>[<span class=\"string\">&quot;http_code&quot;</span>]) === <span class=\"number\">200</span>) ? <span class=\"variable\">$content</span> : <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 模拟POST发起请求</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $url</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $data</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> bool $header</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> int $timeout</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool|string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">postRequest</span>(<span class=\"params\"><span class=\"variable\">$url</span>, <span class=\"variable\">$data</span> = <span class=\"keyword\">array</span>(<span class=\"params\"></span>), <span class=\"variable\">$header</span> = <span class=\"literal\">false</span>, <span class=\"variable\">$timeout</span> = <span class=\"number\">10</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">request</span>(<span class=\"variable\">$url</span>, <span class=\"string\">&#x27;post&#x27;</span>, <span class=\"variable\">$data</span>, <span class=\"variable\">$header</span>, <span class=\"variable\">$timeout</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取header头字符串类型</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> mixed</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHeaderStr</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"variable\">$headerStr</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 获取header头数组类型</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHeader</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$headArr</span> = <span class=\"title function_ invoke__\">explode</span>(<span class=\"string\">&quot;\\r\\n&quot;</span>, <span class=\"built_in\">self</span>::<span class=\"variable\">$headerStr</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$headArr</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">使用:</span><br><span class=\"line\"><span class=\"variable\">$res</span>=<span class=\"title class_\">HttpService</span>::<span class=\"title function_ invoke__\">postRequest</span>(<span class=\"variable\">$this</span>-&gt;url.<span class=\"variable\">$fun</span>,[<span class=\"string\">&quot;username&quot;</span>=&gt;<span class=\"variable\">$this</span>-&gt;username,<span class=\"string\">&quot;password&quot;</span>=&gt;<span class=\"variable\">$this</span>-&gt;password]);</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"phpstorm历史版本\"><a href=\"#phpstorm历史版本\" class=\"headerlink\" title=\"phpstorm历史版本\"></a>phpstorm历史版本</h3><p><code>https://www.jetbrains.com/phpstorm/download/other.html</code></p>\n<h3 id=\"压缩图片并保证清晰度\"><a href=\"#压缩图片并保证清晰度\" class=\"headerlink\" title=\"压缩图片并保证清晰度\"></a>压缩图片并保证清晰度</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">common</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Img</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"variable\">$src</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"variable\">$image</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"variable\">$imageinfo</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"variable\">$percent</span> = <span class=\"number\">0.5</span>;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 图片压缩</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> $src 源图</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> float $percent 压缩比例</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"variable\">$src</span>, <span class=\"variable\">$percent</span> = <span class=\"number\">0.5</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">$this</span>-&gt;src = <span class=\"variable\">$src</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">$this</span>-&gt;percent = <span class=\"variable\">$percent</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/** 高清压缩图片</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> string $saveName 提供图片名（可不带扩展名，用源图扩展名）用于保存。或不提供文件名直接显示</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compressImg</span>(<span class=\"params\"><span class=\"variable\">$saveName</span> = <span class=\"string\">&#x27;&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">_openImage</span>();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$saveName</span>)) <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">_saveImage</span>(<span class=\"variable\">$saveName</span>); <span class=\"comment\">//保存</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">_showImage</span>();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 内部：打开图片</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_openImage</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">list</span>(<span class=\"variable\">$width</span>, <span class=\"variable\">$height</span>, <span class=\"variable\">$type</span>, <span class=\"variable\">$attr</span>) = <span class=\"title function_ invoke__\">getimagesize</span>(<span class=\"variable\">$this</span>-&gt;src);</span><br><span class=\"line\">    <span class=\"variable language_\">$this</span>-&gt;imageinfo = <span class=\"keyword\">array</span>(</span><br><span class=\"line\">      <span class=\"string\">&#x27;width&#x27;</span> =&gt; <span class=\"variable\">$width</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;height&#x27;</span> =&gt; <span class=\"variable\">$height</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;type&#x27;</span> =&gt; <span class=\"title function_ invoke__\">image_type_to_extension</span>(<span class=\"variable\">$type</span>, <span class=\"literal\">false</span>),</span><br><span class=\"line\">      <span class=\"string\">&#x27;attr&#x27;</span> =&gt; <span class=\"variable\">$attr</span></span><br><span class=\"line\">    );</span><br><span class=\"line\">    <span class=\"variable\">$fun</span> = <span class=\"string\">&quot;imagecreatefrom&quot;</span> . <span class=\"variable language_\">$this</span>-&gt;imageinfo[<span class=\"string\">&#x27;type&#x27;</span>];</span><br><span class=\"line\">    <span class=\"variable language_\">$this</span>-&gt;image = <span class=\"variable\">$fun</span>(<span class=\"variable language_\">$this</span>-&gt;src);</span><br><span class=\"line\">    <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">_thumpImage</span>();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 内部：操作图片</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_thumpImage</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$new_width</span> = <span class=\"variable language_\">$this</span>-&gt;imageinfo[<span class=\"string\">&#x27;width&#x27;</span>] * <span class=\"variable language_\">$this</span>-&gt;percent;</span><br><span class=\"line\">    <span class=\"variable\">$new_height</span> = <span class=\"variable language_\">$this</span>-&gt;imageinfo[<span class=\"string\">&#x27;height&#x27;</span>] * <span class=\"variable language_\">$this</span>-&gt;percent;</span><br><span class=\"line\">    <span class=\"variable\">$image_thump</span> = <span class=\"title function_ invoke__\">imagecreatetruecolor</span>(<span class=\"variable\">$new_width</span>, <span class=\"variable\">$new_height</span>);</span><br><span class=\"line\">    <span class=\"comment\">//将原图复制带图片载体上面，并且按照一定比例压缩,极大的保持了清晰度</span></span><br><span class=\"line\">    <span class=\"title function_ invoke__\">imagecopyresampled</span>(<span class=\"variable\">$image_thump</span>, <span class=\"variable\">$this</span>-&gt;image, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"variable\">$new_width</span>, <span class=\"variable\">$new_height</span>, <span class=\"variable\">$this</span>-&gt;imageinfo[<span class=\"string\">&#x27;width&#x27;</span>], <span class=\"variable\">$this</span>-&gt;imageinfo[<span class=\"string\">&#x27;height&#x27;</span>]);</span><br><span class=\"line\">    <span class=\"title function_ invoke__\">imagedestroy</span>(<span class=\"variable\">$this</span>-&gt;image);</span><br><span class=\"line\">    <span class=\"variable language_\">$this</span>-&gt;image = <span class=\"variable\">$image_thump</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 输出图片:保存图片则用saveImage()</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_showImage</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;</span><br><span class=\"line\">    <span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&#x27;Content-Type: image/&#x27;</span> . <span class=\"variable\">$this</span>-&gt;imageinfo[<span class=\"string\">&#x27;type&#x27;</span>]);</span><br><span class=\"line\">    <span class=\"variable\">$funcs</span> = <span class=\"string\">&quot;image&quot;</span> . <span class=\"variable language_\">$this</span>-&gt;imageinfo[<span class=\"string\">&#x27;type&#x27;</span>];</span><br><span class=\"line\">    <span class=\"variable\">$funcs</span>(<span class=\"variable language_\">$this</span>-&gt;image);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 保存图片到硬盘：</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> string $dstImgName 、可指定字符串不带后缀的名称，使用源图扩展名 。、直接指定目标图片名带扩展名。</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_saveImage</span>(<span class=\"params\"><span class=\"variable\">$dstImgName</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">empty</span>(<span class=\"variable\">$dstImgName</span>)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"variable\">$allowImgs</span> = [<span class=\"string\">&#x27;.jpg&#x27;</span>, <span class=\"string\">&#x27;.jpeg&#x27;</span>, <span class=\"string\">&#x27;.png&#x27;</span>, <span class=\"string\">&#x27;.bmp&#x27;</span>, <span class=\"string\">&#x27;.wbmp&#x27;</span>, <span class=\"string\">&#x27;.gif&#x27;</span>];  <span class=\"comment\">//如果目标图片名有后缀就用目标图片扩展名 后缀，如果没有，则用源图的扩展名</span></span><br><span class=\"line\">    <span class=\"variable\">$dstExt</span> = <span class=\"title function_ invoke__\">strrchr</span>(<span class=\"variable\">$dstImgName</span>, <span class=\"string\">&quot;.&quot;</span>);</span><br><span class=\"line\">    <span class=\"variable\">$sourseExt</span> = <span class=\"title function_ invoke__\">strrchr</span>(<span class=\"variable\">$this</span>-&gt;src, <span class=\"string\">&quot;.&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$dstExt</span>)) <span class=\"variable\">$dstExt</span> = <span class=\"title function_ invoke__\">strtolower</span>(<span class=\"variable\">$dstExt</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$sourseExt</span>)) <span class=\"variable\">$sourseExt</span> = <span class=\"title function_ invoke__\">strtolower</span>(<span class=\"variable\">$sourseExt</span>);</span><br><span class=\"line\">    <span class=\"comment\">//有指定目标名扩展名</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$dstExt</span>) &amp;&amp; <span class=\"title function_ invoke__\">in_array</span>(<span class=\"variable\">$dstExt</span>, <span class=\"variable\">$allowImgs</span>)) &#123;</span><br><span class=\"line\">      <span class=\"variable\">$dstName</span> = <span class=\"variable\">$dstImgName</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">elseif</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$sourseExt</span>) &amp;&amp; <span class=\"title function_ invoke__\">in_array</span>(<span class=\"variable\">$sourseExt</span>, <span class=\"variable\">$allowImgs</span>)) &#123;</span><br><span class=\"line\">      <span class=\"variable\">$dstName</span> = <span class=\"variable\">$dstImgName</span> . <span class=\"variable\">$sourseExt</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"variable\">$dstName</span> = <span class=\"variable\">$dstImgName</span> . <span class=\"variable language_\">$this</span>-&gt;imageinfo[<span class=\"string\">&#x27;type&#x27;</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable\">$funcs</span> = <span class=\"string\">&quot;image&quot;</span> . <span class=\"variable language_\">$this</span>-&gt;imageinfo[<span class=\"string\">&#x27;type&#x27;</span>];</span><br><span class=\"line\">    <span class=\"variable\">$funcs</span>(<span class=\"variable language_\">$this</span>-&gt;image, <span class=\"variable\">$dstName</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 销毁图片</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__destruct</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">  </span>&#123;</span><br><span class=\"line\">    <span class=\"title function_ invoke__\">imagedestroy</span>(<span class=\"variable\">$this</span>-&gt;image);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable\">$img</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Img</span>(<span class=\"string\">&quot;https://www.zcdz.com/public/static/upload/images/slide/2022/07/19/1658221420955468.png&quot;</span>, <span class=\"number\">0.5</span>);</span><br><span class=\"line\"><span class=\"variable\">$img</span>-&gt;<span class=\"title function_ invoke__\">compressImg</span>(<span class=\"string\">&quot;banner7.png&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"批量更改数据库\"><a href=\"#批量更改数据库\" class=\"headerlink\" title=\"批量更改数据库\"></a>批量更改数据库</h3><p>​\t\t\t</p>\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//    public function goodsTime()&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//        $i=0;</span></span><br><span class=\"line\"><span class=\"comment\">//        while ($i&lt;400)&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//            $list=Db::table(&quot;sxo_goods&quot;)-&gt;field(&quot;id,goods_time&quot;)-&gt;limit($i,100)-&gt;select();</span></span><br><span class=\"line\"><span class=\"comment\">//            foreach ($list as $k=&gt;$v)&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//                $tmp=explode(&quot;天&quot;,$v[&quot;goods_time&quot;]);</span></span><br><span class=\"line\"><span class=\"comment\">//                if(count($tmp)&gt;1)&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//                    Db::table(&quot;sxo_goods&quot;)-&gt;where(&quot;id&quot;,$v[&quot;id&quot;])-&gt;update([&quot;goods_time&quot;=&gt;$tmp[0].&quot;个工作日&quot;]);</span></span><br><span class=\"line\"><span class=\"comment\">//                &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//            &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//            $i=$i+100;</span></span><br><span class=\"line\"><span class=\"comment\">//        &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//    &#125;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$goods</span>=<span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">&quot;GoodsSpecBase&quot;</span>)-&gt;<span class=\"title function_ invoke__\">limit</span>(<span class=\"number\">0</span>,<span class=\"number\">1700</span>)-&gt;<span class=\"title function_ invoke__\">select</span>();</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"variable\">$goods</span> <span class=\"keyword\">as</span> <span class=\"variable\">$k</span>=&gt;<span class=\"variable\">$v</span>)&#123;</span><br><span class=\"line\"><span class=\"comment\">//            echo $v[&#x27;goods_id&#x27;];</span></span><br><span class=\"line\">            <span class=\"variable\">$info</span>=<span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">&quot;GoodsPrice&quot;</span>)-&gt;<span class=\"title function_ invoke__\">where</span>(<span class=\"string\">&quot;goods_id&quot;</span>,<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;goods_id&#x27;</span>])-&gt;<span class=\"title function_ invoke__\">select</span>();</span><br><span class=\"line\"><span class=\"comment\">//            p($info);</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$info</span>)&gt;<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">                <span class=\"variable\">$cmf_arr</span> = <span class=\"title function_ invoke__\">array_column</span>(<span class=\"variable\">$info</span>, <span class=\"string\">&#x27;price&#x27;</span>);</span><br><span class=\"line\">                <span class=\"title function_ invoke__\">array_multisort</span>(<span class=\"variable\">$cmf_arr</span>, SORT_ASC);</span><br><span class=\"line\">                <span class=\"variable\">$data</span>[<span class=\"string\">&quot;price&quot;</span>]=<span class=\"variable\">$cmf_arr</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\">                <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">&#x27;Goods&#x27;</span>)-&gt;<span class=\"title function_ invoke__\">where</span>(<span class=\"string\">&#x27;id&#x27;</span>,<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;goods_id&#x27;</span>])-&gt;<span class=\"title function_ invoke__\">update</span>(<span class=\"variable\">$data</span>);</span><br><span class=\"line\">                <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">&#x27;GoodsSpecBase&#x27;</span>)-&gt;<span class=\"title function_ invoke__\">where</span>(<span class=\"string\">&#x27;goods_id&#x27;</span>,<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;goods_id&#x27;</span>])-&gt;<span class=\"title function_ invoke__\">update</span>(<span class=\"variable\">$data</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"thinkphp-5-1\"><a href=\"#thinkphp-5-1\" class=\"headerlink\" title=\"thinkphp 5.1\"></a>thinkphp 5.1</h3><h4 id=\"接收参数\"><a href=\"#接收参数\" class=\"headerlink\" title=\"接收参数\"></a>接收参数</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">//要用Request类 第一步就要引入他，才能在当前控制器上使用</span></span><br><span class=\"line\"><span class=\"comment\">//知识点：use 与 namespace前面不可有空格等其他操作。</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">admin</span>\\<span class=\"title class_\">controller</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">think</span>\\<span class=\"title\">Request</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Index</span></span>&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//  在index方法引入Request</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">index</span>(<span class=\"params\">Request <span class=\"variable\">$request</span></span>)</span>&#123;</span><br><span class=\"line\">   \t<span class=\"comment\">// parma 表示接收所有传过来的参数 不管是post请求还是get请求 parma都能接收到参数</span></span><br><span class=\"line\">   \t<span class=\"variable\">$data</span> = <span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">param</span>();</span><br><span class=\"line\">   \t<span class=\"comment\">// post表示只接收 post方式传出来的参数</span></span><br><span class=\"line\">   \t<span class=\"variable\">$data1</span>= <span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">post</span>();</span><br><span class=\"line\">   \t<span class=\"comment\">// get表示只接收get方式传出来的参数</span></span><br><span class=\"line\">   \t<span class=\"variable\">$data2</span>= <span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">get</span>();</span><br><span class=\"line\">   \t<span class=\"comment\">// 假如你只想拿到一个name值，这时我们可以在括号里面加上name即可。</span></span><br><span class=\"line\">   \t<span class=\"variable\">$data</span> = <span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">param</span>(<span class=\"string\">&#x27;name&#x27;</span>);</span><br><span class=\"line\">   \t<span class=\"comment\">// 假如你只想拿到一个name值，而且还想给个默认值的话，这时我们可以在括号里面加上name后面加上即可。</span></span><br><span class=\"line\">   \t<span class=\"variable\">$data</span> = <span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">param</span>(<span class=\"string\">&#x27;name&#x27;</span>,<span class=\"string\">&#x27;这是默认值&#x27;</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"判断请求类型\"><a href=\"#判断请求类型\" class=\"headerlink\" title=\"判断请求类型\"></a>判断请求类型</h4><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"comment\">//要用Request类 第一步就要引入他，才能在当前控制器上使用</span></span><br><span class=\"line\"><span class=\"comment\">//知识点：use 与 namespace前面不可有空格等其他操作。</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">admin</span>\\<span class=\"title class_\">controller</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">think</span>\\<span class=\"title\">Request</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Index</span></span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">//  在index方法引入Request</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">index</span>(<span class=\"params\">Request <span class=\"variable\">$request</span></span>)</span>&#123;</span><br><span class=\"line\">   \t<span class=\"comment\">//判断请求类型是否为 post</span></span><br><span class=\"line\">   \t<span class=\"keyword\">if</span>(<span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">isPost</span>())&#123;</span><br><span class=\"line\">   \t\t<span class=\"title function_ invoke__\">dump</span>(<span class=\"string\">&#x27;当前请求类型为post&#x27;</span>);</span><br><span class=\"line\">   \t&#125;</span><br><span class=\"line\">   \t<span class=\"comment\">//判断请求类型是否为 get</span></span><br><span class=\"line\">   \t<span class=\"keyword\">if</span>(<span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">isGet</span>())&#123;</span><br><span class=\"line\">   \t\t<span class=\"title function_ invoke__\">dump</span>(<span class=\"string\">&#x27;当前请求类型为get&#x27;</span>);</span><br><span class=\"line\">   \t&#125;</span><br><span class=\"line\">   \t<span class=\"comment\">//判断请求类型是否为 Put</span></span><br><span class=\"line\">   \t<span class=\"keyword\">if</span>(<span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">isPut</span>())&#123;</span><br><span class=\"line\">   \t\t<span class=\"title function_ invoke__\">dump</span>(<span class=\"string\">&#x27;当前请求类型为put&#x27;</span>);</span><br><span class=\"line\">   \t&#125;</span><br><span class=\"line\">   \t<span class=\"comment\">//判断请求类型是否为 ajax</span></span><br><span class=\"line\">   \t<span class=\"keyword\">if</span>(<span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">isAjax</span>())&#123;</span><br><span class=\"line\">   \t\t<span class=\"title function_ invoke__\">dump</span>(<span class=\"string\">&#x27;当前请求类型为ajax&#x27;</span>);</span><br><span class=\"line\">   \t&#125;</span><br><span class=\"line\">   \t<span class=\"comment\">//判断请求类型是否是手机访问</span></span><br><span class=\"line\">   \t<span class=\"keyword\">if</span>(<span class=\"variable\">$request</span>-&gt;<span class=\"title function_ invoke__\">isMobile</span>())&#123;</span><br><span class=\"line\">   \t\t<span class=\"title function_ invoke__\">dump</span>(<span class=\"string\">&#x27;当前请求类型为手机类型&#x27;</span>);</span><br><span class=\"line\">   \t&#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"去除字符串两端空格\"><a href=\"#去除字符串两端空格\" class=\"headerlink\" title=\"去除字符串两端空格\"></a>去除字符串两端空格</h3><figure class=\"highlight php\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$str</span> = <span class=\"string\">&quot;  This is a string with spaces.  &quot;</span>;</span><br><span class=\"line\"><span class=\"variable\">$trimmed</span> = <span class=\"title function_ invoke__\">trim</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$trimmed</span>; <span class=\"comment\">//输出：This is a string with spaces.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//去除左边或者右边空格</span></span><br><span class=\"line\"><span class=\"variable\">$str</span> = <span class=\"string\">&quot;   This is a string with spaces.   &quot;</span>;</span><br><span class=\"line\"><span class=\"variable\">$leftTrimmed</span> = <span class=\"title function_ invoke__\">ltrim</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\"><span class=\"variable\">$rightTrimmed</span> = <span class=\"title function_ invoke__\">rtrim</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$leftTrimmed</span>; <span class=\"comment\">//输出：This is a string with spaces.</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$rightTrimmed</span>; <span class=\"comment\">//输出：   This is a string with spaces.</span></span><br></pre></td></tr></table></figure>\n\n","categories":["php"],"tags":["php"]},{"title":"杂七杂八小杂本本","url":"/2023/11/24/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E5%B0%8F%E6%9D%82%E6%9C%AC%E6%9C%AC/","content":"<h3 id=\"输入圆点\"><a href=\"#输入圆点\" class=\"headerlink\" title=\"输入圆点\"></a>输入圆点</h3><ul>\n<li><p>alt+0149   :    •</p>\n</li>\n<li><p>搜狗输入法按「Ctrl+Shift+z」进入「字符大全」面板，搜索「加重号」</p>\n</li>\n</ul>\n","categories":["杂记"],"tags":["杂记","输入法"]},{"title":"typora","url":"/2023/11/24/typora/","content":"<h2 id=\"Typora-快捷键\"><a href=\"#Typora-快捷键\" class=\"headerlink\" title=\"Typora 快捷键\"></a>Typora 快捷键</h2><ul>\n<li>无序列表：输入-或者*之后输入空格</li>\n<li>有序列表：输入数字+“.”之后输入空格</li>\n<li>任务列表：输入-，再空格，再[]，在空格，再在]后面空格-</li>\n<li>有序列表：Ctrl+Shift+[</li>\n<li>无序列表：Ctrl+Shift+]</li>\n</ul>\n<hr>\n<ul>\n<li>标题：Ctrl+1&#x2F;2&#x2F;3&#x2F;4&#x2F;5</li>\n<li>段落：Ctrl+0</li>\n<li>增大标题级别：Ctrl++</li>\n<li>减少标题级别：Ctrl+-</li>\n<li>增加缩进：Ctrl+]</li>\n<li>减少缩进：Ctrl+[</li>\n</ul>\n<hr>\n<ul>\n<li>选中一整行：Ctrl+L</li>\n<li>选中单词：Ctrl+D</li>\n<li>选中相同格式的文字：Ctrl+E</li>\n<li>跳转到文章开头：Ctrl+Home</li>\n<li>跳转到文章结尾：Ctrl+end</li>\n<li>跳转到所选内容：Ctrl+J</li>\n</ul>\n<hr>\n<ul>\n<li>搜索：Ctrl+F</li>\n<li>替换：Ctrl+H</li>\n<li>清除格式：Ctrl+\\</li>\n</ul>\n<hr>\n<ul>\n<li>表格：Ctrl+T</li>\n<li>代码块：Ctrl+Shift+K</li>\n<li>公式块：Ctrl+Shift+M</li>\n<li>引用：Ctrl+Shift+Q</li>\n<li>代码：Ctrl+Shift+&#96;</li>\n<li>图像：Ctrl+Shift+I</li>\n<li>任务列表：Ctrl+Shift+X</li>\n</ul>\n<hr>\n<ul>\n<li><p>引用：输入&gt;之后输入空格&gt;</p>\n</li>\n<li><p>生成目录：<br>目录</p>\n</li>\n<li><ul>\n<li><a href=\"https://link.zhihu.com/?target=https://www.cnblogs.com/SaturnRing/p/16794566.html%23typora-%E5%BF%AB%E6%8D%B7%E9%94%AE\">Typora 快捷键</a></li>\n<li><a href=\"https://link.zhihu.com/?target=https://www.cnblogs.com/SaturnRing/p/16794566.html%23%E8%8F%9C%E5%8D%95%E6%A0%8F\">菜单栏</a></li>\n<li><a href=\"https://link.zhihu.com/?target=https://www.cnblogs.com/SaturnRing/p/16794566.html%23%E6%96%87%E4%BB%B6\">文件</a></li>\n<li><a href=\"https://link.zhihu.com/?target=https://www.cnblogs.com/SaturnRing/p/16794566.html%23%E7%BC%96%E8%BE%91\">编辑</a></li>\n</ul>\n</li>\n<li><p>高亮</p>\n</li>\n<li><p>上标：1</p>\n</li>\n<li><p>下标：1</p>\n</li>\n<li><p>脚注：[^1]</p>\n</li>\n<li><p><code>着重关键字</code>：Ctrl+shift+&#96;</p>\n</li>\n<li><p><strong>加粗：Ctrl+B</strong></p>\n</li>\n<li><p><em>倾斜：Ctrl+I</em></p>\n</li>\n<li><p>下划线：Ctrl+U</p>\n</li>\n<li><p>删除线：Alt+shift+5</p>\n</li>\n<li><p>插入图片：直接拖动到指定位置即可或者Ctrl+shift+i</p>\n</li>\n<li><p>超链接：Ctrl+K 百度 <a href=\"https://link.zhihu.com/?target=http://www.baidu.com\">http://www.baidu.com</a></p>\n</li>\n<li><ul>\n<li>第一种：直接打出网址，自动生成超链接</li>\n<li>第二种：要对网址进行命名，则需要输入：</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"菜单栏\"><a href=\"#菜单栏\" class=\"headerlink\" title=\"菜单栏\"></a>菜单栏</h2><p>文件：Alt+F</p>\n<p>编辑：Alt+E</p>\n<p>段落：Alt+P</p>\n<p>格式：Alt+O</p>\n<p>视图：Alt+V</p>\n<p>主题：Alt+T</p>\n<p>帮助：Alt+H</p>\n<h2 id=\"文件\"><a href=\"#文件\" class=\"headerlink\" title=\"文件\"></a>文件</h2><p>新建：Ctrl+N</p>\n<p>新建窗口：Ctrl+Shift+N</p>\n<p>打开：Ctrl+O</p>\n<p>快速打开：Ctrl+P</p>\n<p>保存：Ctrl+S</p>\n<p>另存为：Ctrl+Shift+S</p>\n<p>偏好：Ctrl+,</p>\n<p>关闭：Ctrl+W</p>\n<h2 id=\"编辑\"><a href=\"#编辑\" class=\"headerlink\" title=\"编辑\"></a>编辑</h2><p>撤销：Ctrl+Z</p>\n<p>重做：Ctrl+Y</p>\n<p>剪切：Ctrl+X</p>\n<p>复制：Ctrl+C</p>\n<p>粘贴：Ctrl+V</p>\n<p>全选：Ctrl+A</p>\n","categories":["typora"],"tags":["typora"]}]